(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.GitpleLiveChat=f()}})(function(){var define,module,exports;return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.ChatClient=exports.GroupChannelMessage=exports.GroupChannel=exports.BaseReport=exports.BaseMessage=exports.BaseChannel=exports.BaseUser=exports.GroupChannelEvent=exports.UserEvent=exports.ConnectionEvent=exports.GitpleLiveError=exports.ErrorType=void 0;const mqtt_1=__importDefault(require("mqtt"));const dayjs_1=__importDefault(require("dayjs"));const lodash_1=__importDefault(require("lodash"));const error_1=require("./lib/error");Object.defineProperty(exports,"ErrorType",{enumerable:true,get:function(){return error_1.ErrorType}});Object.defineProperty(exports,"GitpleLiveError",{enumerable:true,get:function(){return error_1.GitpleLiveError}});const GroupChannelModule_1=require("./lib/GroupChannelModule");const OpenChannelModule_1=require("./lib/OpenChannelModule");const Interfaces_1=require("./lib/Interfaces");Object.defineProperty(exports,"ConnectionEvent",{enumerable:true,get:function(){return Interfaces_1.ConnectionEvent}});Object.defineProperty(exports,"GroupChannelEvent",{enumerable:true,get:function(){return Interfaces_1.GroupChannelEvent}});Object.defineProperty(exports,"UserEvent",{enumerable:true,get:function(){return Interfaces_1.UserEvent}});const LiveEventEmitter_1=require("./lib/LiveEventEmitter");const ConnectionModule_1=require("./lib/ConnectionModule");const request_1=require("./lib/request");const timers_1=require("timers");const BaseMessage_1=require("./lib/BaseMessage");Object.defineProperty(exports,"BaseMessage",{enumerable:true,get:function(){return BaseMessage_1.BaseMessage}});const BaseChannel_1=require("./lib/BaseChannel");Object.defineProperty(exports,"BaseChannel",{enumerable:true,get:function(){return BaseChannel_1.BaseChannel}});const BaseUser_1=require("./lib/BaseUser");Object.defineProperty(exports,"BaseUser",{enumerable:true,get:function(){return BaseUser_1.BaseUser}});const BaseReport_1=require("./lib/BaseReport");Object.defineProperty(exports,"BaseReport",{enumerable:true,get:function(){return BaseReport_1.BaseReport}});const GroupChannel_1=require("./lib/GroupChannel");Object.defineProperty(exports,"GroupChannel",{enumerable:true,get:function(){return GroupChannel_1.GroupChannel}});const UserModule_1=require("./lib/UserModule");const GroupChannelMessage_1=require("./lib/GroupChannelMessage");Object.defineProperty(exports,"GroupChannelMessage",{enumerable:true,get:function(){return GroupChannelMessage_1.GroupChannelMessage}});const ModerationModule_1=require("./lib/ModerationModule");const MAX_RETRY_COUNT=10;const CONNECTION_LOSS_SECONDS=3*1e3;const MIN_TOKEN_SECONDS=1*60*60*1e3;const TOKEN_CHECK_INTERVAL_SECONDS=10*60*1e3;const TOKEN_EXPIRE_CALIBRATION_MS=1e4;class ChatClient extends LiveEventEmitter_1.LiveEventEmitter{constructor(config){var _a,_b,_c,_d;super();this.version="v1.0.0";this.apiVersionPrefix="/v1";this.topicPrefix="mqtt/topic/gitple/live";this.apiUrl="";this.clientIp="";this.clientId="";this.userId="";this.sessionToken="";this.sessionTokenExpireAt=0;this.firstConnectionDone=false;this.connected=false;this.currentRetryCount=1;this.reconnecting=false;this.disconnectedTime=0;this.memberSubscribedTopics=[];this.managerSubscribedTopics=[];this.allSubscribedTopics=[];this.sdkToken="";this.sdkTokenExpiresAt=0;this.joinedGroupChannelList=[];if(!config.host||!config.app_id){throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_PARAMETERS)}this.host=this.checkHost(config.host);this.appId=config.app_id;this.apiUrl=this.host+this.apiVersionPrefix;this.connection=new ConnectionModule_1.ConnectionModule;this.groupChannel=new GroupChannelModule_1.GroupChannelModule(this.appId,this.userId,this.sdkToken,this.apiUrl,(_a=this.debug)===null||_a===void 0?void 0:_a.mode);this.openChannel=new OpenChannelModule_1.OpenChannelModule(this.appId,this.userId,this.sdkToken,this.apiUrl,(_b=this.debug)===null||_b===void 0?void 0:_b.mode);this.user=new UserModule_1.UserModule(this.appId,this.userId,this.sdkToken,this.apiUrl,(_c=this.debug)===null||_c===void 0?void 0:_c.mode);this.moderation=new ModerationModule_1.ModerationModule(this.appId,this.userId,this.sdkToken,this.apiUrl,(_d=this.debug)===null||_d===void 0?void 0:_d.mode);if(config.debug){this.debug=config.debug}}isConnected(){return this.connected}connectUser(info){return __awaiter(this,void 0,void 0,function*(){if(!info||!info.user_id||!info.session_token){throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_PARAMETERS)}yield this.setTokenInformation(info===null||info===void 0?void 0:info.user_id,info===null||info===void 0?void 0:info.session_token);yield this.setClientIP();yield this.setSdkToken();yield this.setJoinedChannelList();this.startTokenRefreshInterval();this.connect()})}disconnectUser(){this.stopTokenRefreshInterval();this.disconnect()}checkTokenExpired(exp){if(!lodash_1.default.isNumber(exp))return true;return exp-TOKEN_EXPIRE_CALIBRATION_MS>Date.now()?false:true}checkSdkTokenExpired(){if(!lodash_1.default.isNumber(this.sdkTokenExpiresAt))return true;return this.sdkTokenExpiresAt-TOKEN_EXPIRE_CALIBRATION_MS>Date.now()?false:true}initConn(){this.reconnecting=false;this.currentRetryCount=0;this.disconnectedTime=0}subscribeTopics(){return __awaiter(this,void 0,void 0,function*(){return new Promise(resolve=>{if(this.mqttClient){this.mqttClient.unsubscribe(this.allSubscribedTopics);this.mqttClient.subscribe(this.allSubscribedTopics,(error,res)=>{let errorTopics=[];if(res&&res.length>0)errorTopics=lodash_1.default.filter(res,{qos:128});if(error||errorTopics.length>0){this.emit("error",new error_1.GitpleLiveError(error_1.ErrorType.UNABLE_SUBSCRIBE_ERROR));this.disconnect();resolve(false)}else{resolve(true)}})}else{this.disconnect();resolve(false)}})})}connect(){var _a,_b,_c;this.disconnect(false);this.clientId=`${this.appId}::${this.userId}::${this.version}::${Date.now()}::${this.clientIp}`;if(this.checkSdkTokenExpired()){throw new error_1.GitpleLiveError(error_1.ErrorType.EXPIRED_TOKEN)}let url=lodash_1.default.cloneDeep(this.host);let protocol="wss";let port=443;if(((_a=this.debug)===null||_a===void 0?void 0:_a.mqttPort)&&((_b=this.host)===null||_b===void 0?void 0:_b.includes("localhost"))){url="mqtt://localhost";protocol="ws";port=(_c=this.debug)===null||_c===void 0?void 0:_c.mqttPort}const opts={clientId:this.clientId,path:"/ws",protocol:protocol,port:port,clean:true,keepalive:30,reconnectPeriod:5*1e3,connectTimeout:30*100,username:this.userId,password:this.sdkToken};this.mqttClient=mqtt_1.default.connect(url,opts);this.mqttClient.on("connect",data=>__awaiter(this,void 0,void 0,function*(){if(this.firstConnectionDone){if(this.reconnecting){this.connection.emit(Interfaces_1.ConnectionEvent.reconnectSuccess);this.reconnecting=false}}else{this.firstConnectionDone=true}this.connected=true;this.initConn();this.setTopics();if(yield this.subscribeTopics()){this.setModules(this.connected);console.log("[GitpleLive] Connected");this.connection.emit(Interfaces_1.ConnectionEvent.connected)}}));this.mqttClient.on("reconnect",()=>{var _a;if((_a=this.debug)===null||_a===void 0?void 0:_a.mode){console.log("[GitpleLive] websocket reconnect",this.currentRetryCount)}if(this.checkSdkTokenExpired()){this.emit("error",new error_1.GitpleLiveError(error_1.ErrorType.EXPIRED_TOKEN));this.disconnect();return}if(this.firstConnectionDone&&this.disconnectedTime>0){const lossTime=Date.now()-this.disconnectedTime;if(lossTime>CONNECTION_LOSS_SECONDS){if(!this.reconnecting){this.reconnecting=true;this.emit("reconnectTry",{})}if(this.reconnecting){if(this.currentRetryCount>=MAX_RETRY_COUNT){this.disconnect()}else{this.currentRetryCount++}}}}});this.mqttClient.on("close",()=>{var _a;if((_a=this.debug)===null||_a===void 0?void 0:_a.mode){console.log("[GitpleLive] websocket close")}if(this.firstConnectionDone){if(this.disconnectedTime===0){this.disconnectedTime=Date.now()}}});this.mqttClient.on("error",error=>{var _a,_b;if((_a=this.debug)===null||_a===void 0?void 0:_a.mode){console.log("[GitpleLive] websocket error",error)}if(!this.mqttClient){return}else if(this.reconnecting){if((_b=this.debug)===null||_b===void 0?void 0:_b.mode){console.log("[GitpleLive] websocket reconnecting...",error)}return}if(error.code==="ENOTFOUND"||error.code==="ECONNREFUSED"){this.emit("error",new error_1.GitpleLiveError(error_1.ErrorType.UNABLE_CONNECT_ERROR))}else if(error.code===4){this.emit("error",new error_1.GitpleLiveError(error_1.ErrorType.AUTHORIZATION_ERROR))}else{const UNKNOWN_ERROR=new error_1.GitpleLiveError(error_1.ErrorType.AUTHORIZATION_ERROR);UNKNOWN_ERROR.meta=error;this.emit("error",UNKNOWN_ERROR)}});this.mqttClient.on("message",(topic,payload)=>{var _a;let parsePayload;try{parsePayload=JSON.parse(String(payload))}catch(error){if((_a=this.debug)===null||_a===void 0?void 0:_a.mode){console.log("[GitpleLive] invalid payload error",error)}return}try{const category=parsePayload===null||parsePayload===void 0?void 0:parsePayload.category;const channel=(parsePayload===null||parsePayload===void 0?void 0:parsePayload.channel)&&new BaseChannel_1.BaseChannel(parsePayload.channel);const user=(parsePayload===null||parsePayload===void 0?void 0:parsePayload.user)&&new BaseUser_1.BaseUser(parsePayload.user);const message=(parsePayload===null||parsePayload===void 0?void 0:parsePayload.message)&&new BaseMessage_1.BaseMessage(parsePayload.message);const data=parsePayload===null||parsePayload===void 0?void 0:parsePayload.data;if(category.startsWith("group:")){if(channel){if(user&&message&&data){this.groupChannel.emit(category,channel,user,message,data)}else if(user&&message){this.groupChannel.emit(category,channel,user,message)}else if(user&&data){this.groupChannel.emit(category,channel,user,data)}else if(message&&data){this.groupChannel.emit(category,channel,message,data)}else if(user){this.groupChannel.emit(category,channel,user)}else if(message){this.groupChannel.emit(category,channel,message)}else{this.groupChannel.emit(category,channel,data)}if(category===Interfaces_1.GroupChannelEvent.channelDeleted){this.unSubscribeChannel(channel.type,channel.channel_id);this.unSubscribeChannel(channel.type,channel.channel_id,true)}else if((category===Interfaces_1.GroupChannelEvent.channelLeft||category===Interfaces_1.GroupChannelEvent.channelBan)&&(user===null||user===void 0?void 0:user.user_id)===this.userId){this.unSubscribeChannel(channel.type,channel.channel_id);this.unSubscribeChannel(channel.type,channel.channel_id,true)}else if(category===Interfaces_1.GroupChannelEvent.managerDeleted&&(user===null||user===void 0?void 0:user.user_id)===this.userId){this.unSubscribeChannel(channel.type,channel.channel_id,true)}else if(category===Interfaces_1.GroupChannelEvent.channelJoined){this.addChannelSubscribe(channel.type,channel.channel_id)}else if(category===Interfaces_1.GroupChannelEvent.managerCreated&&(user===null||user===void 0?void 0:user.user_id)===this.userId){this.addChannelSubscribe(channel.type,channel.channel_id,true)}}}else if(category.startsWith("open:")){if(channel){if(user&&message){this.openChannel.emit(category,channel,user,message)}else if(user){this.openChannel.emit(category,channel,user)}else if(message){this.openChannel.emit(category,channel,message)}else{this.openChannel.emit(category,channel,data)}}}else{if(user){if(category===Interfaces_1.InternalUserEvent.userJoinedChannel&&channel){this.addChannelSubscribe(channel.type,channel.channel_id);this.groupChannel.emit(Interfaces_1.GroupChannelEvent.channelJoined,channel,user)}else if(category===Interfaces_1.InternalUserEvent.userBecomeManager&&channel){this.addChannelSubscribe(channel.type,channel.channel_id,true);if(channel.type==="group"){this.groupChannel.emit(Interfaces_1.GroupChannelEvent.managerCreated,channel,user)}else{this.openChannel.emit(Interfaces_1.OpenChannelEvent.managerCreated,channel,user)}}else{this.user.emit(category,user,data)}if(category===Interfaces_1.UserEvent.userDelete){this.disconnect()}}}}catch(error){const UNKNOWN_ERROR=new error_1.GitpleLiveError(error_1.ErrorType.UNKNOWN_ERROR);UNKNOWN_ERROR.meta=error;this.emit("error",UNKNOWN_ERROR)}})}setTopics(){if(this.mqttClient&&this.connected){const memberTopics=[];const managerTopics=[];memberTopics.push(`${this.topicPrefix}/${this.appId}/user/all/${this.userId}/#`);this.joinedGroupChannelList.map(channel=>{memberTopics.push(`${this.topicPrefix}/${this.appId}/channel/${channel.type}/${channel.channel_id}/all/#`);const manager=lodash_1.default.find(channel.managers,o=>{return o.user_id===this.userId});if(manager){managerTopics.push(`${this.topicPrefix}/${this.appId}/channel/${channel.type}/${channel.channel_id}/manager/#`)}});this.memberSubscribedTopics=memberTopics;this.managerSubscribedTopics=managerTopics;this.allSubscribedTopics=[...new Set([...memberTopics,...managerTopics])]}}addChannelSubscribe(channelType,channelId,isManager=false){if(this.mqttClient&&this.connected){const topic=`${this.topicPrefix}/${this.appId}/channel/${channelType}/${channelId}/${isManager?"manager":"all"}/#`;if(isManager){this.managerSubscribedTopics.push(topic)}else{this.memberSubscribedTopics.push(topic)}this.allSubscribedTopics=[...new Set([...this.memberSubscribedTopics,...this.managerSubscribedTopics])];this.mqttClient.subscribe(topic,(error,res)=>{var _a;if((_a=this.debug)===null||_a===void 0?void 0:_a.mode){console.log("[GitpleLive] add event Error",error)}})}}unSubscribeChannel(channelType,channelId,isManager=false){var _a;const topic=`${this.topicPrefix}/${this.appId}/channel/${channelType}/${channelId}/${isManager?"manager":"all"}/#`;if(isManager){this.managerSubscribedTopics=lodash_1.default.filter(this.managerSubscribedTopics,i=>i!==topic)}else{this.memberSubscribedTopics=lodash_1.default.filter(this.memberSubscribedTopics,i=>i!==topic)}this.allSubscribedTopics=[...new Set([...this.memberSubscribedTopics,...this.managerSubscribedTopics])];(_a=this.mqttClient)===null||_a===void 0?void 0:_a.unsubscribe(topic)}disconnect(sendEvent=true){if(this.mqttClient){if(this.reconnecting){this.connection.emit(Interfaces_1.ConnectionEvent.reconnectFailed)}this.mqttClient.end()}this.mqttClient=null;this.connected=false;this.reconnecting=false;this.firstConnectionDone=false;this.setModules(false);if(sendEvent){this.connection.emit(Interfaces_1.ConnectionEvent.disconnected)}}startTokenRefreshInterval(){this.stopTokenRefreshInterval();this.intervalCheckTokenExpired=(0,timers_1.setInterval)(()=>{const now=(0,dayjs_1.default)().unix()*1e3;if(this.sdkTokenExpiresAt-now<MIN_TOKEN_SECONDS){void this.setSdkToken()}},TOKEN_CHECK_INTERVAL_SECONDS,[this])}stopTokenRefreshInterval(){if(this.intervalCheckTokenExpired){clearInterval(this.intervalCheckTokenExpired);this.intervalCheckTokenExpired=undefined}}setTokenInformation(userId,sessionToken){var _a;return __awaiter(this,void 0,void 0,function*(){try{const splitToken=sessionToken.split(".");if(lodash_1.default.size(splitToken)!==3){throw new Error("split error")}const payload=Buffer.from(splitToken[1],"base64");const{user_id,iat,exp}=JSON.parse(payload.toString());if(user_id!==userId){throw new Error("user not match")}if(this.checkTokenExpired(exp)){throw new error_1.GitpleLiveError(error_1.ErrorType.EXPIRED_TOKEN)}this.userId=userId;this.sessionToken=sessionToken;this.sessionTokenExpireAt=exp}catch(error){if((_a=this.debug)===null||_a===void 0?void 0:_a.mode){console.log("[GitpleLive] parse token Error",error)}if(error===null||error===void 0?void 0:error.code){throw error}else{throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_TOKEN)}}})}setClientIP(){var _a,_b,_c;return __awaiter(this,void 0,void 0,function*(){const url=`${this.host}${request_1.GitpleLiveSdkUrls.health}`;const auth={appSubId:this.appId,userSubId:this.userId,token:this.sessionToken};try{const result=yield(0,request_1.request)((_a=this.debug)===null||_a===void 0?void 0:_a.mode,auth,"GET",url);let clientIp=result.headers["x-forwarded-for"];if((_b=this.host)===null||_b===void 0?void 0:_b.includes("localhost")){if(clientIp&&clientIp.includes("::ffff:")){clientIp=clientIp.replace("::ffff:","")}}this.clientIp=clientIp}catch(error){if((_c=this.debug)===null||_c===void 0?void 0:_c.mode){console.log("[GitpleLive] health Error",error)}throw new error_1.GitpleLiveError(error_1.ErrorType.SERVER_NOT_RESPONDING)}})}setSdkToken(){var _a,_b,_c;return __awaiter(this,void 0,void 0,function*(){const url=this.apiUrl+request_1.GitpleLiveSdkUrls.user.token;const auth={appSubId:this.appId,userSubId:this.userId,token:this.sessionToken};const result=yield(0,request_1.request)((_a=this.debug)===null||_a===void 0?void 0:_a.mode,auth,"POST",url);this.sdkToken=(_b=result===null||result===void 0?void 0:result.data)===null||_b===void 0?void 0:_b.token;this.sdkTokenExpiresAt=(_c=result===null||result===void 0?void 0:result.data)===null||_c===void 0?void 0:_c.expires_at;if(this.mqttClient){this.mqttClient.options.password=this.sdkToken}this.setModules(this.connected)})}setJoinedChannelList(){var _a;return __awaiter(this,void 0,void 0,function*(){const url=this.apiUrl+request_1.GitpleLiveSdkUrls.group.joinedChannelListForTopic+"?show_managers=true";const auth={appSubId:this.appId,userSubId:this.userId,token:this.sessionToken};const result=yield(0,request_1.request)((_a=this.debug)===null||_a===void 0?void 0:_a.mode,auth,"GET",url);this.joinedGroupChannelList=result===null||result===void 0?void 0:result.data})}checkHost(host){const last=host.slice(-1);const httpPrefix="http://";const httpsPrefix="https://";let result=last==="/"?host.slice(0,-1):host;if(!result.startsWith("https://")){if(result.startsWith("http://")){if(!result.includes("localhost")){result=result.replace("http://","https://")}}else{if(result.includes("localhost")){result=httpPrefix+result}else{result=httpsPrefix+result}}}return result}setModules(flag=false){this.groupChannel.set({connected:flag,userId:this.userId,token:this.sdkToken});this.openChannel.set({connected:flag,userId:this.userId,token:this.sdkToken});this.user.set({connected:flag,userId:this.userId,token:this.sdkToken});this.moderation.set({connected:flag,userId:this.userId,token:this.sdkToken})}}exports.ChatClient=ChatClient}).call(this)}).call(this,require("buffer").Buffer)},{"./lib/BaseChannel":2,"./lib/BaseMessage":3,"./lib/BaseReport":4,"./lib/BaseUser":5,"./lib/ConnectionModule":6,"./lib/GroupChannel":7,"./lib/GroupChannelMessage":8,"./lib/GroupChannelModule":9,"./lib/Interfaces":10,"./lib/LiveEventEmitter":11,"./lib/ModerationModule":12,"./lib/OpenChannelModule":13,"./lib/UserModule":14,"./lib/error":15,"./lib/request":16,buffer:54,dayjs:55,lodash:63,mqtt:74,timers:126}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BaseChannel=void 0;class BaseChannel{constructor(channel){this.freeze=false;this.total_message_count=0;this.total_file_count=0;this.channel_id=channel.channel_id;this.type=channel.type;this.name=channel.name;this.freeze=channel.freeze;this.created_at=channel.created_at;this.updated_at=channel.updated_at;if(channel.profile_url)this.profile_url=channel.profile_url;if(channel.meta)this.meta=channel.meta;if(channel.total_message_count)this.total_message_count=channel.total_message_count;if(channel.total_file_count)this.total_file_count=channel.total_file_count}}exports.BaseChannel=BaseChannel},{}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BaseMessage=void 0;const BaseUser_1=require("./BaseUser");class BaseMessage{constructor(message){this.type=message.type;this.message_id=message.message_id;this.channel_id=message.channel_id;this.user=new BaseUser_1.BaseUser(message.user);this.created_at=message.created_at;this.updated_at=message.updated_at;if(message.content){this.content=message.content}if(message.file){this.file=message.file}if(message.meta){this.meta=message.meta}}}exports.BaseMessage=BaseMessage},{"./BaseUser":5}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BaseReport=void 0;class BaseReport{constructor(report){this.report_id=report.report_id;this.report_type=report.report_type;this.report_category=report.report_category;this.report_type=report.report_type;this.created_at=report.created_at;this.updated_at=report.updated_at;if(report.reason)this.reason=report.reason;if(report.user)this.user=report.user;if(report.channel)this.channel=report.channel;if(report.message)this.message=report.message}}exports.BaseReport=BaseReport},{}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BannedUser=exports.BaseUser=void 0;class BaseUser{constructor(user){this.meta={};this.user_id=user.user_id;this.name=user.name;this.created_at=user.created_at;this.updated_at=user.updated_at;if(user.profile_url)this.profile_url=user.profile_url;if(user.meta)this.meta=user.meta;if(user.joined_at)this.joined_at=user.joined_at}}exports.BaseUser=BaseUser;class BannedUser{constructor(bannedUser){this.user=bannedUser.user;this.start_at=bannedUser.start_at;this.end_at=bannedUser.end_at}}exports.BannedUser=BannedUser},{}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ConnectionModule=void 0;const LiveEventEmitter_1=require("./LiveEventEmitter");class ConnectionModule extends LiveEventEmitter_1.LiveEventEmitter{constructor(){super()}}exports.ConnectionModule=ConnectionModule},{"./LiveEventEmitter":11}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GroupChannel=void 0;const BaseChannel_1=require("./BaseChannel");class GroupChannel extends BaseChannel_1.BaseChannel{constructor(channel){super(channel);if(channel.members)this.members=channel.members;if(channel.managers)this.managers=channel.managers;if(channel.unread)this.unread=channel.unread;if(channel.read_receipt)this.read_receipt=channel.read_receipt;if(channel.delivery_receipt)this.delivery_receipt=channel.delivery_receipt;if(channel.last_message)this.last_message=channel.last_message}}exports.GroupChannel=GroupChannel},{"./BaseChannel":2}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GroupChannelMessage=void 0;const BaseMessage_1=require("./BaseMessage");class GroupChannelMessage extends BaseMessage_1.BaseMessage{constructor(message){super(message)}}exports.GroupChannelMessage=GroupChannelMessage},{"./BaseMessage":3}],9:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(receiver,state,value,kind,f){if(kind==="m")throw new TypeError("Private method is not writable");if(kind==="a"&&!f)throw new TypeError("Private accessor was defined without a setter");if(typeof state==="function"?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return kind==="a"?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(receiver,state,kind,f){if(kind==="a"&&!f)throw new TypeError("Private accessor was defined without a getter");if(typeof state==="function"?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return kind==="m"?f:kind==="a"?f.call(receiver):f?f.value:state.get(receiver)};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};var _GroupChannelModule_appSubId,_GroupChannelModule_userSubId,_GroupChannelModule_token,_GroupChannelModule_apiUrl,_GroupChannelModule_connected,_GroupChannelModule_debug;Object.defineProperty(exports,"__esModule",{value:true});exports.GroupChannelModule=void 0;const error_1=require("./error");const GroupChannel_1=require("./GroupChannel");const request_1=require("./request");const lodash_1=__importDefault(require("lodash"));const BaseUser_1=require("./BaseUser");const BaseChannel_1=require("./BaseChannel");const GroupChannelMessage_1=require("./GroupChannelMessage");const LiveEventEmitter_1=require("./LiveEventEmitter");const BaseReport_1=require("./BaseReport");class GroupChannelModule extends LiveEventEmitter_1.LiveEventEmitter{constructor(appSubId,userSubId,token,apiUrl,debug=false){super();_GroupChannelModule_appSubId.set(this,void 0);_GroupChannelModule_userSubId.set(this,void 0);_GroupChannelModule_token.set(this,void 0);_GroupChannelModule_apiUrl.set(this,void 0);_GroupChannelModule_connected.set(this,false);_GroupChannelModule_debug.set(this,false);__classPrivateFieldSet(this,_GroupChannelModule_appSubId,appSubId,"f");__classPrivateFieldSet(this,_GroupChannelModule_userSubId,userSubId,"f");__classPrivateFieldSet(this,_GroupChannelModule_token,token,"f");__classPrivateFieldSet(this,_GroupChannelModule_apiUrl,apiUrl,"f");__classPrivateFieldSet(this,_GroupChannelModule_debug,debug,"f")}getAuth(){return{appSubId:__classPrivateFieldGet(this,_GroupChannelModule_appSubId,"f"),userSubId:__classPrivateFieldGet(this,_GroupChannelModule_userSubId,"f"),token:__classPrivateFieldGet(this,_GroupChannelModule_token,"f")}}set(data){if(typeof(data===null||data===void 0?void 0:data.connected)==="boolean"){__classPrivateFieldSet(this,_GroupChannelModule_connected,data.connected,"f")}if(data===null||data===void 0?void 0:data.userId){__classPrivateFieldSet(this,_GroupChannelModule_userSubId,data.userId,"f")}if(data===null||data===void 0?void 0:data.token){__classPrivateFieldSet(this,_GroupChannelModule_token,data.token,"f")}if(data===null||data===void 0?void 0:data.token){__classPrivateFieldSet(this,_GroupChannelModule_token,data.token,"f")}}getChannel(channelSubId){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.channelList}/${channelSubId}`;const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"GET",url);return new BaseChannel_1.BaseChannel(result.data)})}getChannelList(query){var _a;return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.channelList}`;const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"GET",url,query);const channels=lodash_1.default.map((_a=result===null||result===void 0?void 0:result.data)===null||_a===void 0?void 0:_a.channels,o=>{return new GroupChannel_1.GroupChannel(o)});result.data.channels=channels;return result.data})}getJoinedChannelList(query){var _a;return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.joinedChannelList}`;const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"GET",url,query);const channels=lodash_1.default.map((_a=result===null||result===void 0?void 0:result.data)===null||_a===void 0?void 0:_a.channels,o=>{return new GroupChannel_1.GroupChannel(o)});result.data.channels=channels;return result.data})}getMemberList(channelSubId){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.memberList.replace(request_1.REPLACE_KEYWORD_CHANNEL,channelSubId)}`;const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"GET",url);const members=lodash_1.default.map(result===null||result===void 0?void 0:result.data,o=>{return new BaseUser_1.BaseUser(o)});return members})}getManagerList(channelSubId){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.managerList.replace(request_1.REPLACE_KEYWORD_CHANNEL,channelSubId)}`;const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"GET",url);const managers=lodash_1.default.map(result===null||result===void 0?void 0:result.data,o=>{return new BaseUser_1.BaseUser(o)});return managers})}createChannel(createItem){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.channelList}`;const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"POST",url,createItem);return new GroupChannel_1.GroupChannel(result.data)})}updateChannel(channelSubId,updateItem){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.channelList}/${channelSubId}`;const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"PUT",url,updateItem);return new BaseChannel_1.BaseChannel(result.data)})}deleteChannel(channelSubId){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.channelList}/${channelSubId}`;yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"DELETE",url);return})}joinChannel(channelSubId){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.join.replace(request_1.REPLACE_KEYWORD_CHANNEL,channelSubId)}`;yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"PUT",url);return})}leaveChannel(channelSubId){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.leave.replace(request_1.REPLACE_KEYWORD_CHANNEL,channelSubId)}`;yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"PUT",url);return})}registerManager(channelSubId,manager){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.registerManager.replace(request_1.REPLACE_KEYWORD_CHANNEL,channelSubId)}`;const body={manager:manager};yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"POST",url,body);return})}deleteManager(channelSubId,manager){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.registerManager.replace(request_1.REPLACE_KEYWORD_CHANNEL,channelSubId)}`;const body={manager:manager};yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"DELETE",url,body);return})}freezeChannel(channelSubId,freeze){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.freeze.replace(request_1.REPLACE_KEYWORD_CHANNEL,channelSubId)}`;const body={freeze:freeze};const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"PUT",url,body);return new BaseChannel_1.BaseChannel(result.data)})}updateMeta(channelSubId,meta){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.updateMeta.replace(request_1.REPLACE_KEYWORD_CHANNEL,channelSubId)}`;const body={meta:meta};const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"PUT",url,body);return new BaseChannel_1.BaseChannel(result.data)})}deleteMeta(channelSubId,keys){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.deleteMeta.replace(request_1.REPLACE_KEYWORD_CHANNEL,channelSubId)}`;const body={keys:keys};const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"DELETE",url,body);return new BaseChannel_1.BaseChannel(result.data)})}readMessage(channelSubIds){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubIds)||lodash_1.default.isEmpty(channelSubIds))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);if(lodash_1.default.isArray(channelSubIds)){const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.user.readMessage}`;const body={channels:channelSubIds};yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"PUT",url,body)}else{const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.readMessage.replace(request_1.REPLACE_KEYWORD_CHANNEL,channelSubIds)}`;yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"PUT",url)}return})}deliveredMessage(channelSubId){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.deliveredMessage.replace(request_1.REPLACE_KEYWORD_CHANNEL,channelSubId)}`;yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"PUT",url);return})}ban(channelSubId,item){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.ban.replace(request_1.REPLACE_KEYWORD_CHANNEL,channelSubId)}`;const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"POST",url,item);return new BaseUser_1.BannedUser(result.data)})}unban(channelSubId,userSubId){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.unban.replace(request_1.REPLACE_KEYWORD_CHANNEL,channelSubId).replace(request_1.REPLACE_KEYWORD_USER,userSubId)}`;yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"DELETE",url);return})}getBannedList(channelSubId){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.bannedList.replace(request_1.REPLACE_KEYWORD_CHANNEL,channelSubId)}`;const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"GET",url);const bannedList=lodash_1.default.map(result===null||result===void 0?void 0:result.data,o=>{return new BaseUser_1.BannedUser(o)});return bannedList})}getOnlineMemberList(channelSubId){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.onlineMembers.replace(request_1.REPLACE_KEYWORD_CHANNEL,channelSubId)}`;const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"GET",url);return result.data})}sendMessage(channelSubId,item){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.messages.send.replace(request_1.REPLACE_KEYWORD_CHANNEL,channelSubId)}`;const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"POST",url,item);return new GroupChannelMessage_1.GroupChannelMessage(result.data)})}getMessageList(channelSubId,query){var _a;return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.messages.list.replace(request_1.REPLACE_KEYWORD_CHANNEL,channelSubId)}`;const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"GET",url,query);const messages=lodash_1.default.map((_a=result===null||result===void 0?void 0:result.data)===null||_a===void 0?void 0:_a.messages,o=>{return new GroupChannelMessage_1.GroupChannelMessage(o)});result.data.messages=messages;return result.data})}deleteMessage(channelSubId,messageSubId){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.messages.delete.replace(request_1.REPLACE_KEYWORD_CHANNEL,channelSubId).replace(request_1.REPLACE_KEYWORD_MESSAGE,String(messageSubId))}`;yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"DELETE",url);return})}updateMessageMeta(channelSubId,messageSubId,meta){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.messages.updateMeta.replace(request_1.REPLACE_KEYWORD_CHANNEL,channelSubId).replace(request_1.REPLACE_KEYWORD_MESSAGE,String(messageSubId))}`;const body={meta:meta};const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"PUT",url,body);return new GroupChannelMessage_1.GroupChannelMessage(result.data)})}deleteMessageMeta(channelSubId,messageSubId,keys){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.group.messages.deleteMeta.replace(request_1.REPLACE_KEYWORD_CHANNEL,channelSubId).replace(request_1.REPLACE_KEYWORD_MESSAGE,String(messageSubId))}`;const body={keys:keys};const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"DELETE",url,body);return new GroupChannelMessage_1.GroupChannelMessage(result.data)})}getReportList(channelSubId,query){var _a;return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_GroupChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);if(lodash_1.default.isNil(channelSubId)||lodash_1.default.isEmpty(channelSubId))throw new error_1.GitpleLiveError(error_1.ErrorType.INVALID_CHANNEL_ID);const url=`${__classPrivateFieldGet(this,_GroupChannelModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.moderation.report.list.replace(request_1.REPLACE_KEYWORD_CHANNEL,channelSubId)}`;const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_GroupChannelModule_debug,"f"),this.getAuth(),"GET",url,query);const reports=lodash_1.default.map((_a=result===null||result===void 0?void 0:result.data)===null||_a===void 0?void 0:_a.reports,o=>{return new BaseReport_1.BaseReport(o)});result.data.reports=reports;return result.data})}}exports.GroupChannelModule=GroupChannelModule;_GroupChannelModule_appSubId=new WeakMap,_GroupChannelModule_userSubId=new WeakMap,_GroupChannelModule_token=new WeakMap,_GroupChannelModule_apiUrl=new WeakMap,_GroupChannelModule_connected=new WeakMap,_GroupChannelModule_debug=new WeakMap},{"./BaseChannel":2,"./BaseReport":4,"./BaseUser":5,"./GroupChannel":7,"./GroupChannelMessage":8,"./LiveEventEmitter":11,"./error":15,"./request":16,lodash:63}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OpenChannelEvent=exports.GroupChannelEvent=exports.InternalUserEvent=exports.UserEvent=exports.ConnectionEvent=void 0;var ConnectionEvent;(function(ConnectionEvent){ConnectionEvent["connected"]="connected";ConnectionEvent["reconnectStart"]="reconnect_start";ConnectionEvent["reconnectSuccess"]="reconnect_success";ConnectionEvent["reconnectFailed"]="reconnect_failed";ConnectionEvent["disconnected"]="disconnected"})(ConnectionEvent=exports.ConnectionEvent||(exports.ConnectionEvent={}));var UserEvent;(function(UserEvent){UserEvent["userUpdate"]="user_update";UserEvent["userDelete"]="user_delete"})(UserEvent=exports.UserEvent||(exports.UserEvent={}));var InternalUserEvent;(function(InternalUserEvent){InternalUserEvent["userJoinedChannel"]="user_joined_channel";InternalUserEvent["userBecomeManager"]="user_become_manager"})(InternalUserEvent=exports.InternalUserEvent||(exports.InternalUserEvent={}));var GroupChannelEvent;(function(GroupChannelEvent){GroupChannelEvent["channelUpdated"]="group:channel_update";GroupChannelEvent["channelDeleted"]="group:channel_delete";GroupChannelEvent["channelJoined"]="group:channel_join";GroupChannelEvent["channelLeft"]="group:channel_leave";GroupChannelEvent["managerCreated"]="group:channel_manager_create";GroupChannelEvent["managerDeleted"]="group:channel_manager_delete";GroupChannelEvent["channelFrozen"]="group:channel_freeze";GroupChannelEvent["channelUnfrozen"]="group:channel_unfreeze";GroupChannelEvent["channelBan"]="group:channel_ban";GroupChannelEvent["channelUnBan"]="group:channel_unban";GroupChannelEvent["messageCreate"]="group:message_send";GroupChannelEvent["messageUpdated"]="group:message_update";GroupChannelEvent["messageDeleted"]="group:message_delete";GroupChannelEvent["messageRead"]="group:channel_message_read_event";GroupChannelEvent["messageDelivered"]="group:channel_message_delivered_event";GroupChannelEvent["reportCreated"]="group:report_create"})(GroupChannelEvent=exports.GroupChannelEvent||(exports.GroupChannelEvent={}));var OpenChannelEvent;(function(OpenChannelEvent){OpenChannelEvent["channelUpdated"]="open:channel_update";OpenChannelEvent["channelDeleted"]="open:channel_delete";OpenChannelEvent["managerCreated"]="open:channel_manager_create";OpenChannelEvent["managerDeleted"]="open:channel_manager_delete";OpenChannelEvent["channelFrozen"]="open:channel_freeze";OpenChannelEvent["channelUnfrozen"]="open:channel_unfreeze";OpenChannelEvent["channelBan"]="open:channel_ban";OpenChannelEvent["channelUnBan"]="open:channel_unban";OpenChannelEvent["messageReceived"]="open:message_send";OpenChannelEvent["messageUpdated"]="open:message_update";OpenChannelEvent["messageDeleted"]="open:message_delete"})(OpenChannelEvent=exports.OpenChannelEvent||(exports.OpenChannelEvent={}))},{}],11:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.LiveEventEmitter=void 0;const events_1=__importDefault(require("events"));class LiveEventEmitter{constructor(){this.emitter=new events_1.default;this.emit=(event,...args)=>this.emitter.emit(event,...args);this.on=(event,cb)=>this.emitter.on(event,cb)}}exports.LiveEventEmitter=LiveEventEmitter},{events:60}],12:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(receiver,state,value,kind,f){if(kind==="m")throw new TypeError("Private method is not writable");if(kind==="a"&&!f)throw new TypeError("Private accessor was defined without a setter");if(typeof state==="function"?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return kind==="a"?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(receiver,state,kind,f){if(kind==="a"&&!f)throw new TypeError("Private accessor was defined without a getter");if(typeof state==="function"?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return kind==="m"?f:kind==="a"?f.call(receiver):f?f.value:state.get(receiver)};var _ModerationModule_appSubId,_ModerationModule_userSubId,_ModerationModule_token,_ModerationModule_apiUrl,_ModerationModule_connected,_ModerationModule_debug;Object.defineProperty(exports,"__esModule",{value:true});exports.ModerationModule=void 0;const BaseReport_1=require("./BaseReport");const error_1=require("./error");const LiveEventEmitter_1=require("./LiveEventEmitter");const request_1=require("./request");class ModerationModule extends LiveEventEmitter_1.LiveEventEmitter{constructor(appSubId,userSubId,token,apiUrl,debug=false){super();_ModerationModule_appSubId.set(this,void 0);_ModerationModule_userSubId.set(this,void 0);_ModerationModule_token.set(this,void 0);_ModerationModule_apiUrl.set(this,void 0);_ModerationModule_connected.set(this,false);_ModerationModule_debug.set(this,false);__classPrivateFieldSet(this,_ModerationModule_appSubId,appSubId,"f");__classPrivateFieldSet(this,_ModerationModule_userSubId,userSubId,"f");__classPrivateFieldSet(this,_ModerationModule_token,token,"f");__classPrivateFieldSet(this,_ModerationModule_apiUrl,apiUrl,"f");__classPrivateFieldSet(this,_ModerationModule_debug,debug,"f")}getAuth(){return{appSubId:__classPrivateFieldGet(this,_ModerationModule_appSubId,"f"),userSubId:__classPrivateFieldGet(this,_ModerationModule_userSubId,"f"),token:__classPrivateFieldGet(this,_ModerationModule_token,"f")}}set(data){if(typeof(data===null||data===void 0?void 0:data.connected)==="boolean"){__classPrivateFieldSet(this,_ModerationModule_connected,data.connected,"f")}if(data===null||data===void 0?void 0:data.userId){__classPrivateFieldSet(this,_ModerationModule_userSubId,data.userId,"f")}if(data===null||data===void 0?void 0:data.token){__classPrivateFieldSet(this,_ModerationModule_token,data.token,"f")}if(data===null||data===void 0?void 0:data.token){__classPrivateFieldSet(this,_ModerationModule_token,data.token,"f")}}createReport(createItem){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_ModerationModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);const url=`${__classPrivateFieldGet(this,_ModerationModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.moderation.report.create}`;const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_ModerationModule_debug,"f"),this.getAuth(),"POST",url,createItem);return new BaseReport_1.BaseReport(result.data)})}}exports.ModerationModule=ModerationModule;_ModerationModule_appSubId=new WeakMap,_ModerationModule_userSubId=new WeakMap,_ModerationModule_token=new WeakMap,_ModerationModule_apiUrl=new WeakMap,_ModerationModule_connected=new WeakMap,_ModerationModule_debug=new WeakMap},{"./BaseReport":4,"./LiveEventEmitter":11,"./error":15,"./request":16}],13:[function(require,module,exports){"use strict";var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(receiver,state,value,kind,f){if(kind==="m")throw new TypeError("Private method is not writable");if(kind==="a"&&!f)throw new TypeError("Private accessor was defined without a setter");if(typeof state==="function"?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return kind==="a"?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(receiver,state,kind,f){if(kind==="a"&&!f)throw new TypeError("Private accessor was defined without a getter");if(typeof state==="function"?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return kind==="m"?f:kind==="a"?f.call(receiver):f?f.value:state.get(receiver)};var _OpenChannelModule_appSubId,_OpenChannelModule_userSubId,_OpenChannelModule_token,_OpenChannelModule_apiUrl,_OpenChannelModule_apiVersion,_OpenChannelModule_connected,_OpenChannelModule_debug;Object.defineProperty(exports,"__esModule",{value:true});exports.OpenChannelModule=void 0;const error_1=require("./error");const LiveEventEmitter_1=require("./LiveEventEmitter");const request_1=require("./request");class OpenChannelModule extends LiveEventEmitter_1.LiveEventEmitter{constructor(appSubId,userSubId,token,apiUrl,debug=false){super();_OpenChannelModule_appSubId.set(this,void 0);_OpenChannelModule_userSubId.set(this,void 0);_OpenChannelModule_token.set(this,void 0);_OpenChannelModule_apiUrl.set(this,void 0);_OpenChannelModule_apiVersion.set(this,"v1");_OpenChannelModule_connected.set(this,false);_OpenChannelModule_debug.set(this,false);__classPrivateFieldSet(this,_OpenChannelModule_appSubId,appSubId,"f");__classPrivateFieldSet(this,_OpenChannelModule_userSubId,userSubId,"f");__classPrivateFieldSet(this,_OpenChannelModule_token,token,"f");__classPrivateFieldSet(this,_OpenChannelModule_apiUrl,apiUrl,"f");__classPrivateFieldSet(this,_OpenChannelModule_debug,debug,"f")}getAuth(){return{appSubId:__classPrivateFieldGet(this,_OpenChannelModule_appSubId,"f"),userSubId:__classPrivateFieldGet(this,_OpenChannelModule_userSubId,"f"),token:__classPrivateFieldGet(this,_OpenChannelModule_token,"f")}}set(data){if(typeof(data===null||data===void 0?void 0:data.connected)==="boolean"){__classPrivateFieldSet(this,_OpenChannelModule_connected,data.connected,"f")}if(data===null||data===void 0?void 0:data.userId){__classPrivateFieldSet(this,_OpenChannelModule_userSubId,data.userId,"f")}if(data===null||data===void 0?void 0:data.token){__classPrivateFieldSet(this,_OpenChannelModule_token,data.token,"f")}}getChannel(channel_id){if(!__classPrivateFieldGet(this,_OpenChannelModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);const url=`${__classPrivateFieldGet(this,_OpenChannelModule_apiUrl,"f")}/${__classPrivateFieldGet(this,_OpenChannelModule_apiVersion,"f")}/sdk/open/channels/${channel_id}`;return(0,request_1.request)(__classPrivateFieldGet(this,_OpenChannelModule_debug,"f"),this.getAuth(),"GET",url)}}exports.OpenChannelModule=OpenChannelModule;_OpenChannelModule_appSubId=new WeakMap,_OpenChannelModule_userSubId=new WeakMap,_OpenChannelModule_token=new WeakMap,_OpenChannelModule_apiUrl=new WeakMap,_OpenChannelModule_apiVersion=new WeakMap,_OpenChannelModule_connected=new WeakMap,_OpenChannelModule_debug=new WeakMap},{"./LiveEventEmitter":11,"./error":15,"./request":16}],14:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(receiver,state,value,kind,f){if(kind==="m")throw new TypeError("Private method is not writable");if(kind==="a"&&!f)throw new TypeError("Private accessor was defined without a setter");if(typeof state==="function"?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return kind==="a"?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(receiver,state,kind,f){if(kind==="a"&&!f)throw new TypeError("Private accessor was defined without a getter");if(typeof state==="function"?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return kind==="m"?f:kind==="a"?f.call(receiver):f?f.value:state.get(receiver)};var _UserModule_appSubId,_UserModule_userSubId,_UserModule_token,_UserModule_apiUrl,_UserModule_connected,_UserModule_debug;Object.defineProperty(exports,"__esModule",{value:true});exports.UserModule=void 0;const BaseUser_1=require("./BaseUser");const error_1=require("./error");const LiveEventEmitter_1=require("./LiveEventEmitter");const request_1=require("./request");class UserModule extends LiveEventEmitter_1.LiveEventEmitter{constructor(appSubId,userSubId,token,apiUrl,debug=false){super();_UserModule_appSubId.set(this,void 0);_UserModule_userSubId.set(this,void 0);_UserModule_token.set(this,void 0);_UserModule_apiUrl.set(this,void 0);_UserModule_connected.set(this,false);_UserModule_debug.set(this,false);__classPrivateFieldSet(this,_UserModule_appSubId,appSubId,"f");__classPrivateFieldSet(this,_UserModule_userSubId,userSubId,"f");__classPrivateFieldSet(this,_UserModule_token,token,"f");__classPrivateFieldSet(this,_UserModule_apiUrl,apiUrl,"f");__classPrivateFieldSet(this,_UserModule_debug,debug,"f")}getAuth(){return{appSubId:__classPrivateFieldGet(this,_UserModule_appSubId,"f"),userSubId:__classPrivateFieldGet(this,_UserModule_userSubId,"f"),token:__classPrivateFieldGet(this,_UserModule_token,"f")}}set(data){if(typeof(data===null||data===void 0?void 0:data.connected)==="boolean"){__classPrivateFieldSet(this,_UserModule_connected,data.connected,"f")}if(data===null||data===void 0?void 0:data.userId){__classPrivateFieldSet(this,_UserModule_userSubId,data.userId,"f")}if(data===null||data===void 0?void 0:data.token){__classPrivateFieldSet(this,_UserModule_token,data.token,"f")}if(data===null||data===void 0?void 0:data.token){__classPrivateFieldSet(this,_UserModule_token,data.token,"f")}}me(){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_UserModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);const url=`${__classPrivateFieldGet(this,_UserModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.user.me}`;const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_UserModule_debug,"f"),this.getAuth(),"GET",url);return new BaseUser_1.BaseUser(result.data)})}updateUser(updateItem){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_UserModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);const url=`${__classPrivateFieldGet(this,_UserModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.user.update}`;const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_UserModule_debug,"f"),this.getAuth(),"PUT",url,updateItem);return new BaseUser_1.BaseUser(result.data)})}updateMeta(meta){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_UserModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);const url=`${__classPrivateFieldGet(this,_UserModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.user.updateMeta.replace(request_1.REPLACE_KEYWORD_USER,__classPrivateFieldGet(this,_UserModule_userSubId,"f"))}`;const body={meta:meta};const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_UserModule_debug,"f"),this.getAuth(),"PUT",url,body);return new BaseUser_1.BaseUser(result.data)})}deleteMeta(keys){return __awaiter(this,void 0,void 0,function*(){if(!__classPrivateFieldGet(this,_UserModule_connected,"f"))throw new error_1.GitpleLiveError(error_1.ErrorType.NOT_CONNECTED);const url=`${__classPrivateFieldGet(this,_UserModule_apiUrl,"f")}${request_1.GitpleLiveSdkUrls.user.deleteMeta.replace(request_1.REPLACE_KEYWORD_USER,__classPrivateFieldGet(this,_UserModule_userSubId,"f"))}`;const body={keys:keys};const result=yield(0,request_1.request)(__classPrivateFieldGet(this,_UserModule_debug,"f"),this.getAuth(),"DELETE",url,body);return new BaseUser_1.BaseUser(result.data)})}}exports.UserModule=UserModule;_UserModule_appSubId=new WeakMap,_UserModule_userSubId=new WeakMap,_UserModule_token=new WeakMap,_UserModule_apiUrl=new WeakMap,_UserModule_connected=new WeakMap,_UserModule_debug=new WeakMap},{"./BaseUser":5,"./LiveEventEmitter":11,"./error":15,"./request":16}],15:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GitpleLiveError=exports.ErrorType=void 0;exports.ErrorType={AUTHORIZATION_ERROR:{code:4001,name:"unauthorized",message:"Unauthorized."},INVALID_PARAMETERS:{code:60101,name:"invalid_parameters",message:"Check the sdk initialization init parameters."},INVALID_TOKEN:{code:60102,name:"invalid_token",message:"invalid session token."},EXPIRED_TOKEN:{code:60103,name:"expired_token",message:"Generate token again."},INVALID_CHANNEL_ID:{code:60104,name:"invalid_channel_id",message:"Invalid channel ID."},SERVER_NOT_RESPONDING:{code:60901,name:"server_not_responding",message:"The server is not responding."},UNABLE_CONNECT_ERROR:{code:60902,name:"unable_to_connect",message:"Unable to connect to the server."},UNABLE_SUBSCRIBE_ERROR:{code:60903,name:"unable_to_subscribe_event",message:"Unable to subscribe to the event."},NOT_CONNECTED:{code:60904,name:"not_connected",message:"The device is not connected to the server."},UNKNOWN_ERROR:{code:60999,name:"unknown_error",message:"Check the message on the console."}};class GitpleLiveError extends Error{constructor(error){super(error===null||error===void 0?void 0:error.name);this.code=60999;this.meta={};this.name=error===null||error===void 0?void 0:error.name;this.code=error===null||error===void 0?void 0:error.code;this.message=error===null||error===void 0?void 0:error.message;Object.setPrototypeOf(this,GitpleLiveError.prototype)}toString(){return`code=${this.code}, message=${this.message}`}}exports.GitpleLiveError=GitpleLiveError},{}],16:[function(require,module,exports){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:true});exports.request=exports.GitpleLiveSdkUrls=exports.GitpleLiveUrls=exports.REPLACE_KEYWORD_MESSAGE=exports.REPLACE_KEYWORD_CHANNEL=exports.REPLACE_KEYWORD_USER=void 0;const axios_1=__importStar(require("axios"));const error_1=require("./error");exports.REPLACE_KEYWORD_USER="{user_id}";exports.REPLACE_KEYWORD_CHANNEL="{channel_id}";exports.REPLACE_KEYWORD_MESSAGE="{message_id}";exports.GitpleLiveUrls={};exports.GitpleLiveSdkUrls={health:"/health",user:{me:"/sdk/users/info/me",update:"/sdk/users",token:"/sdk/users/token",updateMeta:"/sdk/users/{user_id}/meta",deleteMeta:"/sdk/users/{user_id}/meta",readMessage:"/sdk/users/messages/read"},group:{channelList:"/sdk/group/channels",getJoinedChannelByChannelID:"/sdk/group/channels/{channel_id}",joinedChannelList:"/sdk/group/channels/joined/list",joinedChannelListForTopic:"/sdk/group/channels/joined/list/all",memberList:"/sdk/group/channels/{channel_id}/members",managerList:"/sdk/group/channels/{channel_id}/managers",join:"/sdk/group/channels/{channel_id}/join",leave:"/sdk/group/channels/{channel_id}/leave",registerManager:"/sdk/group/channels/{channel_id}/managers",deleteManager:"/sdk/group/channels/{channel_id}/managers",freeze:"/sdk/group/channels/{channel_id}/freeze",updateMeta:"/sdk/group/channels/{channel_id}/meta",deleteMeta:"/sdk/group/channels/{channel_id}/meta",readMessage:"/sdk/group/channels/{channel_id}/messages/read",deliveredMessage:"/sdk/group/channels/{channel_id}/messages/delivered",bannedList:"/sdk/group/channels/{channel_id}/banned_list",ban:"/sdk/group/channels/{channel_id}/ban",unban:"/sdk/group/channels/{channel_id}/ban/{user_id}",onlineMembers:"/sdk/group/channels/{channel_id}/online_members",messages:{send:"/sdk/group/channels/{channel_id}/messages",list:"/sdk/group/channels/{channel_id}/messages",delete:"/sdk/group/channels/{channel_id}/messages/{message_id}",updateMeta:"/sdk/group/channels/{channel_id}/messages/{message_id}/meta",deleteMeta:"/sdk/group/channels/{channel_id}/messages/{message_id}/meta"}},moderation:{report:{list:"/sdk/reports/group/channels/{channel_id}",create:"/sdk/reports"}}};function request(debug=false,auth,method,url,body){var _a;return __awaiter(this,void 0,void 0,function*(){const headers={APP_ID:auth===null||auth===void 0?void 0:auth.appSubId,USER_ID:auth===null||auth===void 0?void 0:auth.userSubId,Authorization:`Bearer ${auth===null||auth===void 0?void 0:auth.token}`};if(body===null||body===void 0?void 0:body.file){headers["Content-Type"]="multipart/form-data"}const config={url:url,method:method,headers:headers};if(method==="GET"){config.params=body}else{config.data=body}try{return yield axios_1.default.request(config)}catch(error){if(error instanceof axios_1.AxiosError){if(debug){console.log("[GitpleLive] sdk request Error",error===null||error===void 0?void 0:error.response)}throw new error_1.GitpleLiveError((_a=error===null||error===void 0?void 0:error.response)===null||_a===void 0?void 0:_a.data)}else{throw new error_1.GitpleLiveError(error_1.ErrorType.UNKNOWN_ERROR)}}})}exports.request=request},{"./error":15,axios:17}],17:[function(require,module,exports){module.exports=require("./lib/axios")},{"./lib/axios":19}],18:[function(require,module,exports){"use strict";var utils=require("./../utils");var settle=require("./../core/settle");var cookies=require("./../helpers/cookies");var buildURL=require("./../helpers/buildURL");var buildFullPath=require("../core/buildFullPath");var parseHeaders=require("./../helpers/parseHeaders");var isURLSameOrigin=require("./../helpers/isURLSameOrigin");var transitionalDefaults=require("../defaults/transitional");var AxiosError=require("../core/AxiosError");var CanceledError=require("../cancel/CanceledError");var parseProtocol=require("../helpers/parseProtocol");module.exports=function xhrAdapter(config){return new Promise(function dispatchXhrRequest(resolve,reject){var requestData=config.data;var requestHeaders=config.headers;var responseType=config.responseType;var onCanceled;function done(){if(config.cancelToken){config.cancelToken.unsubscribe(onCanceled)}if(config.signal){config.signal.removeEventListener("abort",onCanceled)}}if(utils.isFormData(requestData)&&utils.isStandardBrowserEnv()){delete requestHeaders["Content-Type"]}var request=new XMLHttpRequest;if(config.auth){var username=config.auth.username||"";var password=config.auth.password?unescape(encodeURIComponent(config.auth.password)):"";requestHeaders.Authorization="Basic "+btoa(username+":"+password)}var fullPath=buildFullPath(config.baseURL,config.url);request.open(config.method.toUpperCase(),buildURL(fullPath,config.params,config.paramsSerializer),true);request.timeout=config.timeout;function onloadend(){if(!request){return}var responseHeaders="getAllResponseHeaders"in request?parseHeaders(request.getAllResponseHeaders()):null;var responseData=!responseType||responseType==="text"||responseType==="json"?request.responseText:request.response;var response={data:responseData,status:request.status,statusText:request.statusText,headers:responseHeaders,config:config,request:request};settle(function _resolve(value){resolve(value);done()},function _reject(err){reject(err);done()},response);request=null}if("onloadend"in request){request.onloadend=onloadend}else{request.onreadystatechange=function handleLoad(){if(!request||request.readyState!==4){return}if(request.status===0&&!(request.responseURL&&request.responseURL.indexOf("file:")===0)){return}setTimeout(onloadend)}}request.onabort=function handleAbort(){if(!request){return}reject(new AxiosError("Request aborted",AxiosError.ECONNABORTED,config,request));request=null};request.onerror=function handleError(){reject(new AxiosError("Network Error",AxiosError.ERR_NETWORK,config,request,request));request=null};request.ontimeout=function handleTimeout(){var timeoutErrorMessage=config.timeout?"timeout of "+config.timeout+"ms exceeded":"timeout exceeded";var transitional=config.transitional||transitionalDefaults;if(config.timeoutErrorMessage){timeoutErrorMessage=config.timeoutErrorMessage}reject(new AxiosError(timeoutErrorMessage,transitional.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,config,request));request=null};if(utils.isStandardBrowserEnv()){var xsrfValue=(config.withCredentials||isURLSameOrigin(fullPath))&&config.xsrfCookieName?cookies.read(config.xsrfCookieName):undefined;if(xsrfValue){requestHeaders[config.xsrfHeaderName]=xsrfValue}}if("setRequestHeader"in request){utils.forEach(requestHeaders,function setRequestHeader(val,key){if(typeof requestData==="undefined"&&key.toLowerCase()==="content-type"){delete requestHeaders[key]}else{request.setRequestHeader(key,val)}})}if(!utils.isUndefined(config.withCredentials)){request.withCredentials=!!config.withCredentials}if(responseType&&responseType!=="json"){request.responseType=config.responseType}if(typeof config.onDownloadProgress==="function"){request.addEventListener("progress",config.onDownloadProgress)}if(typeof config.onUploadProgress==="function"&&request.upload){request.upload.addEventListener("progress",config.onUploadProgress)}if(config.cancelToken||config.signal){onCanceled=function(cancel){if(!request){return}reject(!cancel||cancel&&cancel.type?new CanceledError:cancel);request.abort();request=null};config.cancelToken&&config.cancelToken.subscribe(onCanceled);if(config.signal){config.signal.aborted?onCanceled():config.signal.addEventListener("abort",onCanceled)}}if(!requestData){requestData=null}var protocol=parseProtocol(fullPath);if(protocol&&["http","https","file"].indexOf(protocol)===-1){reject(new AxiosError("Unsupported protocol "+protocol+":",AxiosError.ERR_BAD_REQUEST,config));return}request.send(requestData)})}},{"../cancel/CanceledError":21,"../core/AxiosError":24,"../core/buildFullPath":26,"../defaults/transitional":32,"../helpers/parseProtocol":44,"./../core/settle":29,"./../helpers/buildURL":35,"./../helpers/cookies":37,"./../helpers/isURLSameOrigin":40,"./../helpers/parseHeaders":43,"./../utils":48}],19:[function(require,module,exports){"use strict";var utils=require("./utils");var bind=require("./helpers/bind");var Axios=require("./core/Axios");var mergeConfig=require("./core/mergeConfig");var defaults=require("./defaults");function createInstance(defaultConfig){var context=new Axios(defaultConfig);var instance=bind(Axios.prototype.request,context);utils.extend(instance,Axios.prototype,context);utils.extend(instance,context);instance.create=function create(instanceConfig){return createInstance(mergeConfig(defaultConfig,instanceConfig))};return instance}var axios=createInstance(defaults);axios.Axios=Axios;axios.CanceledError=require("./cancel/CanceledError");axios.CancelToken=require("./cancel/CancelToken");axios.isCancel=require("./cancel/isCancel");axios.VERSION=require("./env/data").version;axios.toFormData=require("./helpers/toFormData");axios.AxiosError=require("../lib/core/AxiosError");axios.Cancel=axios.CanceledError;axios.all=function all(promises){return Promise.all(promises)};axios.spread=require("./helpers/spread");axios.isAxiosError=require("./helpers/isAxiosError");module.exports=axios;module.exports.default=axios},{"../lib/core/AxiosError":24,"./cancel/CancelToken":20,"./cancel/CanceledError":21,"./cancel/isCancel":22,"./core/Axios":23,"./core/mergeConfig":28,"./defaults":31,"./env/data":33,"./helpers/bind":34,"./helpers/isAxiosError":39,"./helpers/spread":45,"./helpers/toFormData":46,"./utils":48}],20:[function(require,module,exports){"use strict";var CanceledError=require("./CanceledError");function CancelToken(executor){if(typeof executor!=="function"){throw new TypeError("executor must be a function.")}var resolvePromise;this.promise=new Promise(function promiseExecutor(resolve){resolvePromise=resolve});var token=this;this.promise.then(function(cancel){if(!token._listeners)return;var i;var l=token._listeners.length;for(i=0;i<l;i++){token._listeners[i](cancel)}token._listeners=null});this.promise.then=function(onfulfilled){var _resolve;var promise=new Promise(function(resolve){token.subscribe(resolve);_resolve=resolve}).then(onfulfilled);promise.cancel=function reject(){token.unsubscribe(_resolve)};return promise};executor(function cancel(message){if(token.reason){return}token.reason=new CanceledError(message);resolvePromise(token.reason)})}CancelToken.prototype.throwIfRequested=function throwIfRequested(){if(this.reason){throw this.reason}};CancelToken.prototype.subscribe=function subscribe(listener){if(this.reason){listener(this.reason);return}if(this._listeners){this._listeners.push(listener)}else{this._listeners=[listener]}};CancelToken.prototype.unsubscribe=function unsubscribe(listener){if(!this._listeners){return}var index=this._listeners.indexOf(listener);if(index!==-1){this._listeners.splice(index,1)}};CancelToken.source=function source(){var cancel;var token=new CancelToken(function executor(c){cancel=c});return{token:token,cancel:cancel}};module.exports=CancelToken},{"./CanceledError":21}],21:[function(require,module,exports){"use strict";var AxiosError=require("../core/AxiosError");var utils=require("../utils");function CanceledError(message){AxiosError.call(this,message==null?"canceled":message,AxiosError.ERR_CANCELED);this.name="CanceledError"}utils.inherits(CanceledError,AxiosError,{__CANCEL__:true});module.exports=CanceledError},{"../core/AxiosError":24,"../utils":48}],22:[function(require,module,exports){"use strict";module.exports=function isCancel(value){return!!(value&&value.__CANCEL__)}},{}],23:[function(require,module,exports){"use strict";var utils=require("./../utils");var buildURL=require("../helpers/buildURL");var InterceptorManager=require("./InterceptorManager");var dispatchRequest=require("./dispatchRequest");var mergeConfig=require("./mergeConfig");var buildFullPath=require("./buildFullPath");var validator=require("../helpers/validator");var validators=validator.validators;function Axios(instanceConfig){this.defaults=instanceConfig;this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios.prototype.request=function request(configOrUrl,config){if(typeof configOrUrl==="string"){config=config||{};config.url=configOrUrl}else{config=configOrUrl||{}}config=mergeConfig(this.defaults,config);if(config.method){config.method=config.method.toLowerCase()}else if(this.defaults.method){config.method=this.defaults.method.toLowerCase()}else{config.method="get"}var transitional=config.transitional;if(transitional!==undefined){validator.assertOptions(transitional,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},false)}var requestInterceptorChain=[];var synchronousRequestInterceptors=true;this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor){if(typeof interceptor.runWhen==="function"&&interceptor.runWhen(config)===false){return}synchronousRequestInterceptors=synchronousRequestInterceptors&&interceptor.synchronous;requestInterceptorChain.unshift(interceptor.fulfilled,interceptor.rejected)});var responseInterceptorChain=[];this.interceptors.response.forEach(function pushResponseInterceptors(interceptor){responseInterceptorChain.push(interceptor.fulfilled,interceptor.rejected)});var promise;if(!synchronousRequestInterceptors){var chain=[dispatchRequest,undefined];Array.prototype.unshift.apply(chain,requestInterceptorChain);chain=chain.concat(responseInterceptorChain);promise=Promise.resolve(config);while(chain.length){promise=promise.then(chain.shift(),chain.shift())}return promise}var newConfig=config;while(requestInterceptorChain.length){var onFulfilled=requestInterceptorChain.shift();var onRejected=requestInterceptorChain.shift();try{newConfig=onFulfilled(newConfig)}catch(error){onRejected(error);break}}try{promise=dispatchRequest(newConfig)}catch(error){return Promise.reject(error)}while(responseInterceptorChain.length){promise=promise.then(responseInterceptorChain.shift(),responseInterceptorChain.shift())}return promise};Axios.prototype.getUri=function getUri(config){config=mergeConfig(this.defaults,config);var fullPath=buildFullPath(config.baseURL,config.url);return buildURL(fullPath,config.params,config.paramsSerializer)};utils.forEach(["delete","get","head","options"],function forEachMethodNoData(method){Axios.prototype[method]=function(url,config){return this.request(mergeConfig(config||{},{method:method,url:url,data:(config||{}).data}))}});utils.forEach(["post","put","patch"],function forEachMethodWithData(method){function generateHTTPMethod(isForm){return function httpMethod(url,data,config){return this.request(mergeConfig(config||{},{method:method,headers:isForm?{"Content-Type":"multipart/form-data"}:{},url:url,data:data}))}}Axios.prototype[method]=generateHTTPMethod();Axios.prototype[method+"Form"]=generateHTTPMethod(true)});module.exports=Axios},{"../helpers/buildURL":35,"../helpers/validator":47,"./../utils":48,"./InterceptorManager":25,"./buildFullPath":26,"./dispatchRequest":27,"./mergeConfig":28}],24:[function(require,module,exports){"use strict";var utils=require("../utils");function AxiosError(message,code,config,request,response){Error.call(this);this.message=message;this.name="AxiosError";code&&(this.code=code);config&&(this.config=config);request&&(this.request=request);response&&(this.response=response)}utils.inherits(AxiosError,Error,{toJSON:function toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var prototype=AxiosError.prototype;var descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(code){descriptors[code]={value:code}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype,"isAxiosError",{value:true});AxiosError.from=function(error,code,config,request,response,customProps){var axiosError=Object.create(prototype);utils.toFlatObject(error,axiosError,function filter(obj){return obj!==Error.prototype});AxiosError.call(axiosError,error.message,code,config,request,response);axiosError.name=error.name;customProps&&Object.assign(axiosError,customProps);return axiosError};module.exports=AxiosError},{"../utils":48}],25:[function(require,module,exports){"use strict";var utils=require("./../utils");function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function use(fulfilled,rejected,options){this.handlers.push({fulfilled:fulfilled,rejected:rejected,synchronous:options?options.synchronous:false,runWhen:options?options.runWhen:null});return this.handlers.length-1};InterceptorManager.prototype.eject=function eject(id){if(this.handlers[id]){this.handlers[id]=null}};InterceptorManager.prototype.forEach=function forEach(fn){utils.forEach(this.handlers,function forEachHandler(h){if(h!==null){fn(h)}})};module.exports=InterceptorManager},{"./../utils":48}],26:[function(require,module,exports){"use strict";var isAbsoluteURL=require("../helpers/isAbsoluteURL");var combineURLs=require("../helpers/combineURLs");module.exports=function buildFullPath(baseURL,requestedURL){if(baseURL&&!isAbsoluteURL(requestedURL)){return combineURLs(baseURL,requestedURL)}return requestedURL}},{"../helpers/combineURLs":36,"../helpers/isAbsoluteURL":38}],27:[function(require,module,exports){"use strict";var utils=require("./../utils");var transformData=require("./transformData");var isCancel=require("../cancel/isCancel");var defaults=require("../defaults");var CanceledError=require("../cancel/CanceledError");function throwIfCancellationRequested(config){if(config.cancelToken){config.cancelToken.throwIfRequested()}if(config.signal&&config.signal.aborted){throw new CanceledError}}module.exports=function dispatchRequest(config){throwIfCancellationRequested(config);config.headers=config.headers||{};config.data=transformData.call(config,config.data,config.headers,config.transformRequest);config.headers=utils.merge(config.headers.common||{},config.headers[config.method]||{},config.headers);utils.forEach(["delete","get","head","post","put","patch","common"],function cleanHeaderConfig(method){delete config.headers[method]});var adapter=config.adapter||defaults.adapter;return adapter(config).then(function onAdapterResolution(response){throwIfCancellationRequested(config);response.data=transformData.call(config,response.data,response.headers,config.transformResponse);return response},function onAdapterRejection(reason){if(!isCancel(reason)){throwIfCancellationRequested(config);if(reason&&reason.response){reason.response.data=transformData.call(config,reason.response.data,reason.response.headers,config.transformResponse)}}return Promise.reject(reason)})}},{"../cancel/CanceledError":21,"../cancel/isCancel":22,"../defaults":31,"./../utils":48,"./transformData":30}],28:[function(require,module,exports){"use strict";var utils=require("../utils");module.exports=function mergeConfig(config1,config2){config2=config2||{};var config={};function getMergedValue(target,source){if(utils.isPlainObject(target)&&utils.isPlainObject(source)){return utils.merge(target,source)}else if(utils.isPlainObject(source)){return utils.merge({},source)}else if(utils.isArray(source)){return source.slice()}return source}function mergeDeepProperties(prop){if(!utils.isUndefined(config2[prop])){return getMergedValue(config1[prop],config2[prop])}else if(!utils.isUndefined(config1[prop])){return getMergedValue(undefined,config1[prop])}}function valueFromConfig2(prop){if(!utils.isUndefined(config2[prop])){return getMergedValue(undefined,config2[prop])}}function defaultToConfig2(prop){if(!utils.isUndefined(config2[prop])){return getMergedValue(undefined,config2[prop])}else if(!utils.isUndefined(config1[prop])){return getMergedValue(undefined,config1[prop])}}function mergeDirectKeys(prop){if(prop in config2){return getMergedValue(config1[prop],config2[prop])}else if(prop in config1){return getMergedValue(undefined,config1[prop])}}var mergeMap={url:valueFromConfig2,method:valueFromConfig2,data:valueFromConfig2,baseURL:defaultToConfig2,transformRequest:defaultToConfig2,transformResponse:defaultToConfig2,paramsSerializer:defaultToConfig2,timeout:defaultToConfig2,timeoutMessage:defaultToConfig2,withCredentials:defaultToConfig2,adapter:defaultToConfig2,responseType:defaultToConfig2,xsrfCookieName:defaultToConfig2,xsrfHeaderName:defaultToConfig2,onUploadProgress:defaultToConfig2,onDownloadProgress:defaultToConfig2,decompress:defaultToConfig2,maxContentLength:defaultToConfig2,maxBodyLength:defaultToConfig2,beforeRedirect:defaultToConfig2,transport:defaultToConfig2,httpAgent:defaultToConfig2,httpsAgent:defaultToConfig2,cancelToken:defaultToConfig2,socketPath:defaultToConfig2,responseEncoding:defaultToConfig2,validateStatus:mergeDirectKeys};utils.forEach(Object.keys(config1).concat(Object.keys(config2)),function computeConfigValue(prop){var merge=mergeMap[prop]||mergeDeepProperties;var configValue=merge(prop);utils.isUndefined(configValue)&&merge!==mergeDirectKeys||(config[prop]=configValue)});return config}},{"../utils":48}],29:[function(require,module,exports){"use strict";var AxiosError=require("./AxiosError");module.exports=function settle(resolve,reject,response){var validateStatus=response.config.validateStatus;if(!response.status||!validateStatus||validateStatus(response.status)){resolve(response)}else{reject(new AxiosError("Request failed with status code "+response.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(response.status/100)-4],response.config,response.request,response))}}},{"./AxiosError":24}],30:[function(require,module,exports){"use strict";var utils=require("./../utils");var defaults=require("../defaults");module.exports=function transformData(data,headers,fns){var context=this||defaults;utils.forEach(fns,function transform(fn){data=fn.call(context,data,headers)});return data}},{"../defaults":31,"./../utils":48}],31:[function(require,module,exports){(function(process){(function(){"use strict";var utils=require("../utils");var normalizeHeaderName=require("../helpers/normalizeHeaderName");var AxiosError=require("../core/AxiosError");var transitionalDefaults=require("./transitional");var toFormData=require("../helpers/toFormData");var DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(headers,value){if(!utils.isUndefined(headers)&&utils.isUndefined(headers["Content-Type"])){headers["Content-Type"]=value}}function getDefaultAdapter(){var adapter;if(typeof XMLHttpRequest!=="undefined"){adapter=require("../adapters/xhr")}else if(typeof process!=="undefined"&&Object.prototype.toString.call(process)==="[object process]"){adapter=require("../adapters/http")}return adapter}function stringifySafely(rawValue,parser,encoder){if(utils.isString(rawValue)){try{(parser||JSON.parse)(rawValue);return utils.trim(rawValue)}catch(e){if(e.name!=="SyntaxError"){throw e}}}return(encoder||JSON.stringify)(rawValue)}var defaults={transitional:transitionalDefaults,adapter:getDefaultAdapter(),transformRequest:[function transformRequest(data,headers){normalizeHeaderName(headers,"Accept");normalizeHeaderName(headers,"Content-Type");if(utils.isFormData(data)||utils.isArrayBuffer(data)||utils.isBuffer(data)||utils.isStream(data)||utils.isFile(data)||utils.isBlob(data)){return data}if(utils.isArrayBufferView(data)){return data.buffer}if(utils.isURLSearchParams(data)){setContentTypeIfUnset(headers,"application/x-www-form-urlencoded;charset=utf-8");return data.toString()}var isObjectPayload=utils.isObject(data);var contentType=headers&&headers["Content-Type"];var isFileList;if((isFileList=utils.isFileList(data))||isObjectPayload&&contentType==="multipart/form-data"){var _FormData=this.env&&this.env.FormData;return toFormData(isFileList?{"files[]":data}:data,_FormData&&new _FormData)}else if(isObjectPayload||contentType==="application/json"){setContentTypeIfUnset(headers,"application/json");return stringifySafely(data)}return data}],transformResponse:[function transformResponse(data){var transitional=this.transitional||defaults.transitional;var silentJSONParsing=transitional&&transitional.silentJSONParsing;var forcedJSONParsing=transitional&&transitional.forcedJSONParsing;var strictJSONParsing=!silentJSONParsing&&this.responseType==="json";if(strictJSONParsing||forcedJSONParsing&&utils.isString(data)&&data.length){try{return JSON.parse(data)}catch(e){if(strictJSONParsing){if(e.name==="SyntaxError"){throw AxiosError.from(e,AxiosError.ERR_BAD_RESPONSE,this,null,this.response)}throw e}}}return data}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:require("./env/FormData")},validateStatus:function validateStatus(status){return status>=200&&status<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],function forEachMethodNoData(method){defaults.headers[method]={}});utils.forEach(["post","put","patch"],function forEachMethodWithData(method){defaults.headers[method]=utils.merge(DEFAULT_CONTENT_TYPE)});module.exports=defaults}).call(this)}).call(this,require("_process"))},{"../adapters/http":18,"../adapters/xhr":18,"../core/AxiosError":24,"../helpers/normalizeHeaderName":41,"../helpers/toFormData":46,"../utils":48,"./env/FormData":42,"./transitional":32,_process:101}],32:[function(require,module,exports){"use strict";module.exports={silentJSONParsing:true,forcedJSONParsing:true,clarifyTimeoutError:false}},{}],33:[function(require,module,exports){module.exports={version:"0.27.2"}},{}],34:[function(require,module,exports){"use strict";module.exports=function bind(fn,thisArg){return function wrap(){var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}return fn.apply(thisArg,args)}}},{}],35:[function(require,module,exports){"use strict";var utils=require("./../utils");function encode(val){return encodeURIComponent(val).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}module.exports=function buildURL(url,params,paramsSerializer){if(!params){return url}var serializedParams;if(paramsSerializer){serializedParams=paramsSerializer(params)}else if(utils.isURLSearchParams(params)){serializedParams=params.toString()}else{var parts=[];utils.forEach(params,function serialize(val,key){if(val===null||typeof val==="undefined"){return}if(utils.isArray(val)){key=key+"[]"}else{val=[val]}utils.forEach(val,function parseValue(v){if(utils.isDate(v)){v=v.toISOString()}else if(utils.isObject(v)){v=JSON.stringify(v)}parts.push(encode(key)+"="+encode(v))})});serializedParams=parts.join("&")}if(serializedParams){var hashmarkIndex=url.indexOf("#");if(hashmarkIndex!==-1){url=url.slice(0,hashmarkIndex)}url+=(url.indexOf("?")===-1?"?":"&")+serializedParams}return url}},{"./../utils":48}],36:[function(require,module,exports){"use strict";module.exports=function combineURLs(baseURL,relativeURL){return relativeURL?baseURL.replace(/\/+$/,"")+"/"+relativeURL.replace(/^\/+/,""):baseURL}},{}],37:[function(require,module,exports){"use strict";var utils=require("./../utils");module.exports=utils.isStandardBrowserEnv()?function standardBrowserEnv(){return{write:function write(name,value,expires,path,domain,secure){var cookie=[];cookie.push(name+"="+encodeURIComponent(value));if(utils.isNumber(expires)){cookie.push("expires="+new Date(expires).toGMTString())}if(utils.isString(path)){cookie.push("path="+path)}if(utils.isString(domain)){cookie.push("domain="+domain)}if(secure===true){cookie.push("secure")}document.cookie=cookie.join("; ")},read:function read(name){var match=document.cookie.match(new RegExp("(^|;\\s*)("+name+")=([^;]*)"));return match?decodeURIComponent(match[3]):null},remove:function remove(name){this.write(name,"",Date.now()-864e5)}}}():function nonStandardBrowserEnv(){return{write:function write(){},read:function read(){return null},remove:function remove(){}}}()},{"./../utils":48}],38:[function(require,module,exports){"use strict";module.exports=function isAbsoluteURL(url){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(url)}},{}],39:[function(require,module,exports){"use strict";var utils=require("./../utils");module.exports=function isAxiosError(payload){return utils.isObject(payload)&&payload.isAxiosError===true}},{"./../utils":48}],40:[function(require,module,exports){"use strict";var utils=require("./../utils");module.exports=utils.isStandardBrowserEnv()?function standardBrowserEnv(){var msie=/(msie|trident)/i.test(navigator.userAgent);var urlParsingNode=document.createElement("a");var originURL;function resolveURL(url){var href=url;if(msie){urlParsingNode.setAttribute("href",href);href=urlParsingNode.href}urlParsingNode.setAttribute("href",href);return{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:urlParsingNode.pathname.charAt(0)==="/"?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}originURL=resolveURL(window.location.href);return function isURLSameOrigin(requestURL){var parsed=utils.isString(requestURL)?resolveURL(requestURL):requestURL;return parsed.protocol===originURL.protocol&&parsed.host===originURL.host}}():function nonStandardBrowserEnv(){return function isURLSameOrigin(){return true}}()},{"./../utils":48}],41:[function(require,module,exports){"use strict";var utils=require("../utils");module.exports=function normalizeHeaderName(headers,normalizedName){utils.forEach(headers,function processHeader(value,name){if(name!==normalizedName&&name.toUpperCase()===normalizedName.toUpperCase()){headers[normalizedName]=value;delete headers[name]}})}},{"../utils":48}],42:[function(require,module,exports){module.exports=null},{}],43:[function(require,module,exports){"use strict";var utils=require("./../utils");var ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];module.exports=function parseHeaders(headers){var parsed={};var key;var val;var i;if(!headers){return parsed}utils.forEach(headers.split("\n"),function parser(line){i=line.indexOf(":");key=utils.trim(line.substr(0,i)).toLowerCase();val=utils.trim(line.substr(i+1));if(key){if(parsed[key]&&ignoreDuplicateOf.indexOf(key)>=0){return}if(key==="set-cookie"){parsed[key]=(parsed[key]?parsed[key]:[]).concat([val])}else{parsed[key]=parsed[key]?parsed[key]+", "+val:val}}});return parsed}},{"./../utils":48}],44:[function(require,module,exports){"use strict";module.exports=function parseProtocol(url){var match=/^([-+\w]{1,25})(:?\/\/|:)/.exec(url);return match&&match[1]||""}},{}],45:[function(require,module,exports){"use strict";module.exports=function spread(callback){return function wrap(arr){return callback.apply(null,arr)}}},{}],46:[function(require,module,exports){(function(Buffer){(function(){"use strict";var utils=require("../utils");function toFormData(obj,formData){formData=formData||new FormData;var stack=[];function convertValue(value){if(value===null)return"";if(utils.isDate(value)){return value.toISOString()}if(utils.isArrayBuffer(value)||utils.isTypedArray(value)){return typeof Blob==="function"?new Blob([value]):Buffer.from(value)}return value}function build(data,parentKey){if(utils.isPlainObject(data)||utils.isArray(data)){if(stack.indexOf(data)!==-1){throw Error("Circular reference detected in "+parentKey)}stack.push(data);utils.forEach(data,function each(value,key){if(utils.isUndefined(value))return;var fullKey=parentKey?parentKey+"."+key:key;var arr;if(value&&!parentKey&&typeof value==="object"){if(utils.endsWith(key,"{}")){value=JSON.stringify(value)}else if(utils.endsWith(key,"[]")&&(arr=utils.toArray(value))){arr.forEach(function(el){!utils.isUndefined(el)&&formData.append(fullKey,convertValue(el))});return}}build(value,fullKey)});stack.pop()}else{formData.append(parentKey,convertValue(data))}}build(obj);return formData}module.exports=toFormData}).call(this)}).call(this,require("buffer").Buffer)},{"../utils":48,buffer:54}],47:[function(require,module,exports){"use strict";var VERSION=require("../env/data").version;var AxiosError=require("../core/AxiosError");var validators={};["object","boolean","number","function","string","symbol"].forEach(function(type,i){validators[type]=function validator(thing){return typeof thing===type||"a"+(i<1?"n ":" ")+type}});var deprecatedWarnings={};validators.transitional=function transitional(validator,version,message){function formatMessage(opt,desc){return"[Axios v"+VERSION+"] Transitional option '"+opt+"'"+desc+(message?". "+message:"")}return function(value,opt,opts){if(validator===false){throw new AxiosError(formatMessage(opt," has been removed"+(version?" in "+version:"")),AxiosError.ERR_DEPRECATED)}if(version&&!deprecatedWarnings[opt]){deprecatedWarnings[opt]=true;console.warn(formatMessage(opt," has been deprecated since v"+version+" and will be removed in the near future"))}return validator?validator(value,opt,opts):true}};function assertOptions(options,schema,allowUnknown){if(typeof options!=="object"){throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE)}var keys=Object.keys(options);var i=keys.length;while(i-- >0){var opt=keys[i];var validator=schema[opt];if(validator){var value=options[opt];var result=value===undefined||validator(value,opt,options);if(result!==true){throw new AxiosError("option "+opt+" must be "+result,AxiosError.ERR_BAD_OPTION_VALUE)}continue}if(allowUnknown!==true){throw new AxiosError("Unknown option "+opt,AxiosError.ERR_BAD_OPTION)}}}module.exports={assertOptions:assertOptions,validators:validators}},{"../core/AxiosError":24,"../env/data":33}],48:[function(require,module,exports){"use strict";var bind=require("./helpers/bind");var toString=Object.prototype.toString;var kindOf=function(cache){return function(thing){var str=toString.call(thing);return cache[str]||(cache[str]=str.slice(8,-1).toLowerCase())}}(Object.create(null));function kindOfTest(type){type=type.toLowerCase();return function isKindOf(thing){return kindOf(thing)===type}}function isArray(val){return Array.isArray(val)}function isUndefined(val){return typeof val==="undefined"}function isBuffer(val){return val!==null&&!isUndefined(val)&&val.constructor!==null&&!isUndefined(val.constructor)&&typeof val.constructor.isBuffer==="function"&&val.constructor.isBuffer(val)}var isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(val){var result;if(typeof ArrayBuffer!=="undefined"&&ArrayBuffer.isView){result=ArrayBuffer.isView(val)}else{result=val&&val.buffer&&isArrayBuffer(val.buffer)}return result}function isString(val){return typeof val==="string"}function isNumber(val){return typeof val==="number"}function isObject(val){return val!==null&&typeof val==="object"}function isPlainObject(val){if(kindOf(val)!=="object"){return false}var prototype=Object.getPrototypeOf(val);return prototype===null||prototype===Object.prototype}var isDate=kindOfTest("Date");var isFile=kindOfTest("File");var isBlob=kindOfTest("Blob");var isFileList=kindOfTest("FileList");function isFunction(val){return toString.call(val)==="[object Function]"}function isStream(val){return isObject(val)&&isFunction(val.pipe)}function isFormData(thing){var pattern="[object FormData]";return thing&&(typeof FormData==="function"&&thing instanceof FormData||toString.call(thing)===pattern||isFunction(thing.toString)&&thing.toString()===pattern)}var isURLSearchParams=kindOfTest("URLSearchParams");function trim(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){if(typeof navigator!=="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")){return false}return typeof window!=="undefined"&&typeof document!=="undefined"}function forEach(obj,fn){if(obj===null||typeof obj==="undefined"){return}if(typeof obj!=="object"){obj=[obj]}if(isArray(obj)){for(var i=0,l=obj.length;i<l;i++){fn.call(null,obj[i],i,obj)}}else{for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){fn.call(null,obj[key],key,obj)}}}}function merge(){var result={};function assignValue(val,key){if(isPlainObject(result[key])&&isPlainObject(val)){result[key]=merge(result[key],val)}else if(isPlainObject(val)){result[key]=merge({},val)}else if(isArray(val)){result[key]=val.slice()}else{result[key]=val}}for(var i=0,l=arguments.length;i<l;i++){forEach(arguments[i],assignValue)}return result}function extend(a,b,thisArg){forEach(b,function assignValue(val,key){if(thisArg&&typeof val==="function"){a[key]=bind(val,thisArg)}else{a[key]=val}});return a}function stripBOM(content){if(content.charCodeAt(0)===65279){content=content.slice(1)}return content}function inherits(constructor,superConstructor,props,descriptors){constructor.prototype=Object.create(superConstructor.prototype,descriptors);constructor.prototype.constructor=constructor;props&&Object.assign(constructor.prototype,props)}function toFlatObject(sourceObj,destObj,filter){var props;var i;var prop;var merged={};destObj=destObj||{};do{props=Object.getOwnPropertyNames(sourceObj);i=props.length;while(i-- >0){prop=props[i];if(!merged[prop]){destObj[prop]=sourceObj[prop];merged[prop]=true}}sourceObj=Object.getPrototypeOf(sourceObj)}while(sourceObj&&(!filter||filter(sourceObj,destObj))&&sourceObj!==Object.prototype);return destObj}function endsWith(str,searchString,position){str=String(str);if(position===undefined||position>str.length){position=str.length}position-=searchString.length;var lastIndex=str.indexOf(searchString,position);return lastIndex!==-1&&lastIndex===position}function toArray(thing){if(!thing)return null;var i=thing.length;if(isUndefined(i))return null;var arr=new Array(i);while(i-- >0){arr[i]=thing[i]}return arr}var isTypedArray=function(TypedArray){return function(thing){return TypedArray&&thing instanceof TypedArray}}(typeof Uint8Array!=="undefined"&&Object.getPrototypeOf(Uint8Array));module.exports={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isObject:isObject,isPlainObject:isPlainObject,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isFunction:isFunction,isStream:isStream,isURLSearchParams:isURLSearchParams,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach,merge:merge,extend:extend,trim:trim,stripBOM:stripBOM,inherits:inherits,toFlatObject:toFlatObject,kindOf:kindOf,kindOfTest:kindOfTest,endsWith:endsWith,toArray:toArray,isTypedArray:isTypedArray,isFileList:isFileList}},{"./helpers/bind":34}],49:[function(require,module,exports){"use strict";exports.byteLength=byteLength;exports.toByteArray=toByteArray;exports.fromByteArray=fromByteArray;var lookup=[];var revLookup=[];var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i){lookup[i]=code[i];revLookup[code.charCodeAt(i)]=i}revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(b64){var len=b64.length;if(len%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var validLen=b64.indexOf("=");if(validLen===-1)validLen=len;var placeHoldersLen=validLen===len?0:4-validLen%4;return[validLen,placeHoldersLen]}function byteLength(b64){var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function _byteLength(b64,validLen,placeHoldersLen){return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function toByteArray(b64){var tmp;var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];var arr=new Arr(_byteLength(b64,validLen,placeHoldersLen));var curByte=0;var len=placeHoldersLen>0?validLen-4:validLen;var i;for(i=0;i<len;i+=4){tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)];arr[curByte++]=tmp>>16&255;arr[curByte++]=tmp>>8&255;arr[curByte++]=tmp&255}if(placeHoldersLen===2){tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4;arr[curByte++]=tmp&255}if(placeHoldersLen===1){tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2;arr[curByte++]=tmp>>8&255;arr[curByte++]=tmp&255}return arr}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[num&63]}function encodeChunk(uint8,start,end){var tmp;var output=[];for(var i=start;i<end;i+=3){tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(uint8[i+2]&255);output.push(tripletToBase64(tmp))}return output.join("")}function fromByteArray(uint8){var tmp;var len=uint8.length;var extraBytes=len%3;var parts=[];var maxChunkLength=16383;for(var i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength){parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength))}if(extraBytes===1){tmp=uint8[len-1];parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")}else if(extraBytes===2){tmp=(uint8[len-2]<<8)+uint8[len-1];parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"=")}return parts.join("")}},{}],50:[function(require,module,exports){"use strict";const{Buffer}=require("buffer");const symbol=Symbol.for("BufferList");function BufferList(buf){if(!(this instanceof BufferList)){return new BufferList(buf)}BufferList._init.call(this,buf)}BufferList._init=function _init(buf){Object.defineProperty(this,symbol,{value:true});this._bufs=[];this.length=0;if(buf){this.append(buf)}};BufferList.prototype._new=function _new(buf){return new BufferList(buf)};BufferList.prototype._offset=function _offset(offset){if(offset===0){return[0,0]}let tot=0;for(let i=0;i<this._bufs.length;i++){const _t=tot+this._bufs[i].length;if(offset<_t||i===this._bufs.length-1){return[i,offset-tot]}tot=_t}};BufferList.prototype._reverseOffset=function(blOffset){const bufferId=blOffset[0];let offset=blOffset[1];for(let i=0;i<bufferId;i++){offset+=this._bufs[i].length}return offset};BufferList.prototype.get=function get(index){if(index>this.length||index<0){return undefined}const offset=this._offset(index);return this._bufs[offset[0]][offset[1]]};BufferList.prototype.slice=function slice(start,end){if(typeof start==="number"&&start<0){start+=this.length}if(typeof end==="number"&&end<0){end+=this.length}return this.copy(null,0,start,end)};BufferList.prototype.copy=function copy(dst,dstStart,srcStart,srcEnd){if(typeof srcStart!=="number"||srcStart<0){srcStart=0}if(typeof srcEnd!=="number"||srcEnd>this.length){srcEnd=this.length}if(srcStart>=this.length){return dst||Buffer.alloc(0)}if(srcEnd<=0){return dst||Buffer.alloc(0)}const copy=!!dst;const off=this._offset(srcStart);const len=srcEnd-srcStart;let bytes=len;let bufoff=copy&&dstStart||0;let start=off[1];if(srcStart===0&&srcEnd===this.length){if(!copy){return this._bufs.length===1?this._bufs[0]:Buffer.concat(this._bufs,this.length)}for(let i=0;i<this._bufs.length;i++){this._bufs[i].copy(dst,bufoff);bufoff+=this._bufs[i].length}return dst}if(bytes<=this._bufs[off[0]].length-start){return copy?this._bufs[off[0]].copy(dst,dstStart,start,start+bytes):this._bufs[off[0]].slice(start,start+bytes)}if(!copy){dst=Buffer.allocUnsafe(len)}for(let i=off[0];i<this._bufs.length;i++){const l=this._bufs[i].length-start;if(bytes>l){this._bufs[i].copy(dst,bufoff,start);bufoff+=l}else{this._bufs[i].copy(dst,bufoff,start,start+bytes);bufoff+=l;break}bytes-=l;if(start){start=0}}if(dst.length>bufoff)return dst.slice(0,bufoff);return dst};BufferList.prototype.shallowSlice=function shallowSlice(start,end){start=start||0;end=typeof end!=="number"?this.length:end;if(start<0){start+=this.length}if(end<0){end+=this.length}if(start===end){return this._new()}const startOffset=this._offset(start);const endOffset=this._offset(end);const buffers=this._bufs.slice(startOffset[0],endOffset[0]+1);if(endOffset[1]===0){buffers.pop()}else{buffers[buffers.length-1]=buffers[buffers.length-1].slice(0,endOffset[1])}if(startOffset[1]!==0){buffers[0]=buffers[0].slice(startOffset[1])}return this._new(buffers)};BufferList.prototype.toString=function toString(encoding,start,end){return this.slice(start,end).toString(encoding)};BufferList.prototype.consume=function consume(bytes){bytes=Math.trunc(bytes);if(Number.isNaN(bytes)||bytes<=0)return this;while(this._bufs.length){if(bytes>=this._bufs[0].length){bytes-=this._bufs[0].length;this.length-=this._bufs[0].length;this._bufs.shift()}else{this._bufs[0]=this._bufs[0].slice(bytes);this.length-=bytes;break}}return this};BufferList.prototype.duplicate=function duplicate(){const copy=this._new();for(let i=0;i<this._bufs.length;i++){copy.append(this._bufs[i])}return copy};BufferList.prototype.append=function append(buf){if(buf==null){return this}if(buf.buffer){this._appendBuffer(Buffer.from(buf.buffer,buf.byteOffset,buf.byteLength))}else if(Array.isArray(buf)){for(let i=0;i<buf.length;i++){this.append(buf[i])}}else if(this._isBufferList(buf)){for(let i=0;i<buf._bufs.length;i++){this.append(buf._bufs[i])}}else{if(typeof buf==="number"){buf=buf.toString()}this._appendBuffer(Buffer.from(buf))}return this};BufferList.prototype._appendBuffer=function appendBuffer(buf){this._bufs.push(buf);this.length+=buf.length};BufferList.prototype.indexOf=function(search,offset,encoding){if(encoding===undefined&&typeof offset==="string"){encoding=offset;offset=undefined}if(typeof search==="function"||Array.isArray(search)){throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.')}else if(typeof search==="number"){search=Buffer.from([search])}else if(typeof search==="string"){search=Buffer.from(search,encoding)}else if(this._isBufferList(search)){search=search.slice()}else if(Array.isArray(search.buffer)){search=Buffer.from(search.buffer,search.byteOffset,search.byteLength)}else if(!Buffer.isBuffer(search)){search=Buffer.from(search)}offset=Number(offset||0);if(isNaN(offset)){offset=0}if(offset<0){offset=this.length+offset}if(offset<0){offset=0}if(search.length===0){return offset>this.length?this.length:offset}const blOffset=this._offset(offset);let blIndex=blOffset[0];let buffOffset=blOffset[1];for(;blIndex<this._bufs.length;blIndex++){const buff=this._bufs[blIndex];while(buffOffset<buff.length){const availableWindow=buff.length-buffOffset;if(availableWindow>=search.length){const nativeSearchResult=buff.indexOf(search,buffOffset);if(nativeSearchResult!==-1){return this._reverseOffset([blIndex,nativeSearchResult])}buffOffset=buff.length-search.length+1}else{const revOffset=this._reverseOffset([blIndex,buffOffset]);if(this._match(revOffset,search)){return revOffset}buffOffset++}}buffOffset=0}return-1};BufferList.prototype._match=function(offset,search){if(this.length-offset<search.length){return false}for(let searchOffset=0;searchOffset<search.length;searchOffset++){if(this.get(offset+searchOffset)!==search[searchOffset]){return false}}return true};(function(){const methods={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const m in methods){(function(m){if(methods[m]===null){BufferList.prototype[m]=function(offset,byteLength){return this.slice(offset,offset+byteLength)[m](0,byteLength)}}else{BufferList.prototype[m]=function(offset=0){return this.slice(offset,offset+methods[m])[m](0)}}})(m)}})();BufferList.prototype._isBufferList=function _isBufferList(b){return b instanceof BufferList||BufferList.isBufferList(b)};BufferList.isBufferList=function isBufferList(b){return b!=null&&b[symbol]};module.exports=BufferList},{buffer:54}],51:[function(require,module,exports){"use strict";const DuplexStream=require("readable-stream").Duplex;const inherits=require("inherits");const BufferList=require("./BufferList");function BufferListStream(callback){if(!(this instanceof BufferListStream)){return new BufferListStream(callback)}if(typeof callback==="function"){this._callback=callback;const piper=function piper(err){if(this._callback){this._callback(err);this._callback=null}}.bind(this);this.on("pipe",function onPipe(src){src.on("error",piper)});this.on("unpipe",function onUnpipe(src){src.removeListener("error",piper)});callback=null}BufferList._init.call(this,callback);DuplexStream.call(this)}inherits(BufferListStream,DuplexStream);Object.assign(BufferListStream.prototype,BufferList.prototype);BufferListStream.prototype._new=function _new(callback){return new BufferListStream(callback)};BufferListStream.prototype._write=function _write(buf,encoding,callback){this._appendBuffer(buf);if(typeof callback==="function"){callback()}};BufferListStream.prototype._read=function _read(size){if(!this.length){return this.push(null)}size=Math.min(size,this.length);this.push(this.slice(0,size));this.consume(size)};BufferListStream.prototype.end=function end(chunk){DuplexStream.prototype.end.call(this,chunk);if(this._callback){this._callback(null,this.slice());this._callback=null}};BufferListStream.prototype._destroy=function _destroy(err,cb){this._bufs.length=0;this.length=0;cb(err)};BufferListStream.prototype._isBufferList=function _isBufferList(b){return b instanceof BufferListStream||b instanceof BufferList||BufferListStream.isBufferList(b)};BufferListStream.isBufferList=BufferList.isBufferList;module.exports=BufferListStream;module.exports.BufferListStream=BufferListStream;module.exports.BufferList=BufferList},{"./BufferList":50,inherits:62,"readable-stream":119}],52:[function(require,module,exports){},{}],53:[function(require,module,exports){(function(global){(function(){(function(root){var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=typeof module=="object"&&module&&!module.nodeType&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal){root=freeGlobal}var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,key;function error(type){throw new RangeError(errors[type])}function map(array,fn){var length=array.length;var result=[];while(length--){result[length]=fn(array[length])}return result}function mapDomain(string,fn){var parts=string.split("@");var result="";if(parts.length>1){result=parts[0]+"@";string=parts[1]}string=string.replace(regexSeparators,".");var labels=string.split(".");var encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){var output=[],counter=0,length=string.length,value,extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){return map(array,function(value){var output="";if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value);return output}).join("")}function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22}if(codePoint-65<26){return codePoint-65}if(codePoint-97<26){return codePoint-97}return base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5)}function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin)}return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;basic=input.lastIndexOf(delimiter);if(basic<0){basic=0}for(j=0;j<basic;++j){if(input.charCodeAt(j)>=128){error("not-basic")}output.push(input.charCodeAt(j))}for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;;k+=base){if(index>=inputLength){error("invalid-input")}digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error("overflow")}i+=digit*w;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break}baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error("overflow")}w*=baseMinusT}out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error("overflow")}n+=floor(i/out);i%=out;output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;input=ucs2decode(input);inputLength=input.length;n=initialN;delta=0;bias=initialBias;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<128){output.push(stringFromCharCode(currentValue))}}handledCPCount=basicLength=output.length;if(basicLength){output.push(delimiter)}while(handledCPCount<inputLength){for(m=maxInt,j=0;j<inputLength;++j){currentValue=input[j];if(currentValue>=n&&currentValue<m){m=currentValue}}handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error("overflow")}delta+=(m-n)*handledCPCountPlusOne;n=m;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<n&&++delta>maxInt){error("overflow")}if(currentValue==n){for(q=delta,k=base;;k+=base){t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break}qMinusT=q-t;baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT)}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount}}++delta;++n}return output.join("")}function toUnicode(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string})}function toASCII(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string})}punycode={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define("punycode",function(){return punycode})}else if(freeExports&&freeModule){if(module.exports==freeExports){freeModule.exports=punycode}else{for(key in punycode){punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key])}}}else{root.punycode=punycode}})(this)}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],54:[function(require,module,exports){(function(Buffer){(function(){"use strict";var base64=require("base64-js");var ieee754=require("ieee754");exports.Buffer=Buffer;exports.SlowBuffer=SlowBuffer;exports.INSPECT_MAX_BYTES=50;var K_MAX_LENGTH=2147483647;exports.kMaxLength=K_MAX_LENGTH;Buffer.TYPED_ARRAY_SUPPORT=typedArraySupport();if(!Buffer.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function typedArraySupport(){try{var arr=new Uint8Array(1);arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return arr.foo()===42}catch(e){return false}}Object.defineProperty(Buffer.prototype,"parent",{enumerable:true,get:function(){if(!Buffer.isBuffer(this))return undefined;return this.buffer}});Object.defineProperty(Buffer.prototype,"offset",{enumerable:true,get:function(){if(!Buffer.isBuffer(this))return undefined;return this.byteOffset}});function createBuffer(length){if(length>K_MAX_LENGTH){throw new RangeError('The value "'+length+'" is invalid for option "size"')}var buf=new Uint8Array(length);buf.__proto__=Buffer.prototype;return buf}function Buffer(arg,encodingOrOffset,length){if(typeof arg==="number"){if(typeof encodingOrOffset==="string"){throw new TypeError('The "string" argument must be of type string. Received type number')}return allocUnsafe(arg)}return from(arg,encodingOrOffset,length)}if(typeof Symbol!=="undefined"&&Symbol.species!=null&&Buffer[Symbol.species]===Buffer){Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:true,enumerable:false,writable:false})}Buffer.poolSize=8192;function from(value,encodingOrOffset,length){if(typeof value==="string"){return fromString(value,encodingOrOffset)}if(ArrayBuffer.isView(value)){return fromArrayLike(value)}if(value==null){throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof value)}if(isInstance(value,ArrayBuffer)||value&&isInstance(value.buffer,ArrayBuffer)){return fromArrayBuffer(value,encodingOrOffset,length)}if(typeof value==="number"){throw new TypeError('The "value" argument must not be of type number. Received type number')}var valueOf=value.valueOf&&value.valueOf();if(valueOf!=null&&valueOf!==value){return Buffer.from(valueOf,encodingOrOffset,length)}var b=fromObject(value);if(b)return b;if(typeof Symbol!=="undefined"&&Symbol.toPrimitive!=null&&typeof value[Symbol.toPrimitive]==="function"){return Buffer.from(value[Symbol.toPrimitive]("string"),encodingOrOffset,length)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof value)}Buffer.from=function(value,encodingOrOffset,length){return from(value,encodingOrOffset,length)};Buffer.prototype.__proto__=Uint8Array.prototype;Buffer.__proto__=Uint8Array;function assertSize(size){if(typeof size!=="number"){throw new TypeError('"size" argument must be of type number')}else if(size<0){throw new RangeError('The value "'+size+'" is invalid for option "size"')}}function alloc(size,fill,encoding){assertSize(size);if(size<=0){return createBuffer(size)}if(fill!==undefined){return typeof encoding==="string"?createBuffer(size).fill(fill,encoding):createBuffer(size).fill(fill)}return createBuffer(size)}Buffer.alloc=function(size,fill,encoding){return alloc(size,fill,encoding)};function allocUnsafe(size){assertSize(size);return createBuffer(size<0?0:checked(size)|0)}Buffer.allocUnsafe=function(size){return allocUnsafe(size)};Buffer.allocUnsafeSlow=function(size){return allocUnsafe(size)};function fromString(string,encoding){if(typeof encoding!=="string"||encoding===""){encoding="utf8"}if(!Buffer.isEncoding(encoding)){throw new TypeError("Unknown encoding: "+encoding)}var length=byteLength(string,encoding)|0;var buf=createBuffer(length);var actual=buf.write(string,encoding);if(actual!==length){buf=buf.slice(0,actual)}return buf}function fromArrayLike(array){var length=array.length<0?0:checked(array.length)|0;var buf=createBuffer(length);for(var i=0;i<length;i+=1){buf[i]=array[i]&255}return buf}function fromArrayBuffer(array,byteOffset,length){if(byteOffset<0||array.byteLength<byteOffset){throw new RangeError('"offset" is outside of buffer bounds')}if(array.byteLength<byteOffset+(length||0)){throw new RangeError('"length" is outside of buffer bounds')}var buf;if(byteOffset===undefined&&length===undefined){buf=new Uint8Array(array)}else if(length===undefined){buf=new Uint8Array(array,byteOffset)}else{buf=new Uint8Array(array,byteOffset,length)}buf.__proto__=Buffer.prototype;return buf}function fromObject(obj){if(Buffer.isBuffer(obj)){var len=checked(obj.length)|0;var buf=createBuffer(len);if(buf.length===0){return buf}obj.copy(buf,0,0,len);return buf}if(obj.length!==undefined){if(typeof obj.length!=="number"||numberIsNaN(obj.length)){return createBuffer(0)}return fromArrayLike(obj)}if(obj.type==="Buffer"&&Array.isArray(obj.data)){return fromArrayLike(obj.data)}}function checked(length){if(length>=K_MAX_LENGTH){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+K_MAX_LENGTH.toString(16)+" bytes")}return length|0}function SlowBuffer(length){if(+length!=length){length=0}return Buffer.alloc(+length)}Buffer.isBuffer=function isBuffer(b){return b!=null&&b._isBuffer===true&&b!==Buffer.prototype};Buffer.compare=function compare(a,b){if(isInstance(a,Uint8Array))a=Buffer.from(a,a.offset,a.byteLength);if(isInstance(b,Uint8Array))b=Buffer.from(b,b.offset,b.byteLength);if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b)){throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array')}if(a===b)return 0;var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len;++i){if(a[i]!==b[i]){x=a[i];y=b[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};Buffer.concat=function concat(list,length){if(!Array.isArray(list)){throw new TypeError('"list" argument must be an Array of Buffers')}if(list.length===0){return Buffer.alloc(0)}var i;if(length===undefined){length=0;for(i=0;i<list.length;++i){length+=list[i].length}}var buffer=Buffer.allocUnsafe(length);var pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(isInstance(buf,Uint8Array)){buf=Buffer.from(buf)}if(!Buffer.isBuffer(buf)){throw new TypeError('"list" argument must be an Array of Buffers')}buf.copy(buffer,pos);pos+=buf.length}return buffer};function byteLength(string,encoding){if(Buffer.isBuffer(string)){return string.length}if(ArrayBuffer.isView(string)||isInstance(string,ArrayBuffer)){return string.byteLength}if(typeof string!=="string"){throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. '+"Received type "+typeof string)}var len=string.length;var mustMatch=arguments.length>2&&arguments[2]===true;if(!mustMatch&&len===0)return 0;var loweredCase=false;for(;;){switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return len*2;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase){return mustMatch?-1:utf8ToBytes(string).length}encoding=(""+encoding).toLowerCase();loweredCase=true}}}Buffer.byteLength=byteLength;function slowToString(encoding,start,end){var loweredCase=false;if(start===undefined||start<0){start=0}if(start>this.length){return""}if(end===undefined||end>this.length){end=this.length}if(end<=0){return""}end>>>=0;start>>>=0;if(end<=start){return""}if(!encoding)encoding="utf8";while(true){switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase();loweredCase=true}}}Buffer.prototype._isBuffer=true;function swap(b,n,m){var i=b[n];b[n]=b[m];b[m]=i}Buffer.prototype.swap16=function swap16(){var len=this.length;if(len%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var i=0;i<len;i+=2){swap(this,i,i+1)}return this};Buffer.prototype.swap32=function swap32(){var len=this.length;if(len%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var i=0;i<len;i+=4){swap(this,i,i+3);swap(this,i+1,i+2)}return this};Buffer.prototype.swap64=function swap64(){var len=this.length;if(len%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var i=0;i<len;i+=8){swap(this,i,i+7);swap(this,i+1,i+6);swap(this,i+2,i+5);swap(this,i+3,i+4)}return this};Buffer.prototype.toString=function toString(){var length=this.length;if(length===0)return"";if(arguments.length===0)return utf8Slice(this,0,length);return slowToString.apply(this,arguments)};Buffer.prototype.toLocaleString=Buffer.prototype.toString;Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return true;return Buffer.compare(this,b)===0};Buffer.prototype.inspect=function inspect(){var str="";var max=exports.INSPECT_MAX_BYTES;str=this.toString("hex",0,max).replace(/(.{2})/g,"$1 ").trim();if(this.length>max)str+=" ... ";return"<Buffer "+str+">"};Buffer.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(isInstance(target,Uint8Array)){target=Buffer.from(target,target.offset,target.byteLength)}if(!Buffer.isBuffer(target)){throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. '+"Received type "+typeof target)}if(start===undefined){start=0}if(end===undefined){end=target?target.length:0}if(thisStart===undefined){thisStart=0}if(thisEnd===undefined){thisEnd=this.length}if(start<0||end>target.length||thisStart<0||thisEnd>this.length){throw new RangeError("out of range index")}if(thisStart>=thisEnd&&start>=end){return 0}if(thisStart>=thisEnd){return-1}if(start>=end){return 1}start>>>=0;end>>>=0;thisStart>>>=0;thisEnd>>>=0;if(this===target)return 0;var x=thisEnd-thisStart;var y=end-start;var len=Math.min(x,y);var thisCopy=this.slice(thisStart,thisEnd);var targetCopy=target.slice(start,end);for(var i=0;i<len;++i){if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i];y=targetCopy[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(buffer.length===0)return-1;if(typeof byteOffset==="string"){encoding=byteOffset;byteOffset=0}else if(byteOffset>2147483647){byteOffset=2147483647}else if(byteOffset<-2147483648){byteOffset=-2147483648}byteOffset=+byteOffset;if(numberIsNaN(byteOffset)){byteOffset=dir?0:buffer.length-1}if(byteOffset<0)byteOffset=buffer.length+byteOffset;if(byteOffset>=buffer.length){if(dir)return-1;else byteOffset=buffer.length-1}else if(byteOffset<0){if(dir)byteOffset=0;else return-1}if(typeof val==="string"){val=Buffer.from(val,encoding)}if(Buffer.isBuffer(val)){if(val.length===0){return-1}return arrayIndexOf(buffer,val,byteOffset,encoding,dir)}else if(typeof val==="number"){val=val&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(dir){return Uint8Array.prototype.indexOf.call(buffer,val,byteOffset)}else{return Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset)}}return arrayIndexOf(buffer,[val],byteOffset,encoding,dir)}throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var indexSize=1;var arrLength=arr.length;var valLength=val.length;if(encoding!==undefined){encoding=String(encoding).toLowerCase();if(encoding==="ucs2"||encoding==="ucs-2"||encoding==="utf16le"||encoding==="utf-16le"){if(arr.length<2||val.length<2){return-1}indexSize=2;arrLength/=2;valLength/=2;byteOffset/=2}}function read(buf,i){if(indexSize===1){return buf[i]}else{return buf.readUInt16BE(i*indexSize)}}var i;if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++){if(read(arr,i)===read(val,foundIndex===-1?0:i-foundIndex)){if(foundIndex===-1)foundIndex=i;if(i-foundIndex+1===valLength)return foundIndex*indexSize}else{if(foundIndex!==-1)i-=i-foundIndex;foundIndex=-1}}}else{if(byteOffset+valLength>arrLength)byteOffset=arrLength-valLength;for(i=byteOffset;i>=0;i--){var found=true;for(var j=0;j<valLength;j++){if(read(arr,i+j)!==read(val,j)){found=false;break}}if(found)return i}}return-1}Buffer.prototype.includes=function includes(val,byteOffset,encoding){return this.indexOf(val,byteOffset,encoding)!==-1};Buffer.prototype.indexOf=function indexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,true)};Buffer.prototype.lastIndexOf=function lastIndexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,false)};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}var strLen=string.length;if(length>strLen/2){length=strLen/2}for(var i=0;i<length;++i){var parsed=parseInt(string.substr(i*2,2),16);if(numberIsNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}Buffer.prototype.write=function write(string,offset,length,encoding){if(offset===undefined){encoding="utf8";length=this.length;offset=0}else if(length===undefined&&typeof offset==="string"){encoding=offset;length=this.length;offset=0}else if(isFinite(offset)){offset=offset>>>0;if(isFinite(length)){length=length>>>0;if(encoding===undefined)encoding="utf8"}else{encoding=length;length=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var remaining=this.length-offset;if(length===undefined||length>remaining)length=remaining;if(string.length>0&&(length<0||offset<0)||offset>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!encoding)encoding="utf8";var loweredCase=false;for(;;){switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase();loweredCase=true}}};Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(buf,start,end){if(start===0&&end===buf.length){return base64.fromByteArray(buf)}else{return base64.fromByteArray(buf.slice(start,end))}}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);var res=[];var i=start;while(i<end){var firstByte=buf[i];var codePoint=null;var bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:if(firstByte<128){codePoint=firstByte}break;case 2:secondByte=buf[i+1];if((secondByte&192)===128){tempCodePoint=(firstByte&31)<<6|secondByte&63;if(tempCodePoint>127){codePoint=tempCodePoint}}break;case 3:secondByte=buf[i+1];thirdByte=buf[i+2];if((secondByte&192)===128&&(thirdByte&192)===128){tempCodePoint=(firstByte&15)<<12|(secondByte&63)<<6|thirdByte&63;if(tempCodePoint>2047&&(tempCodePoint<55296||tempCodePoint>57343)){codePoint=tempCodePoint}}break;case 4:secondByte=buf[i+1];thirdByte=buf[i+2];fourthByte=buf[i+3];if((secondByte&192)===128&&(thirdByte&192)===128&&(fourthByte&192)===128){tempCodePoint=(firstByte&15)<<18|(secondByte&63)<<12|(thirdByte&63)<<6|fourthByte&63;if(tempCodePoint>65535&&tempCodePoint<1114112){codePoint=tempCodePoint}}}}if(codePoint===null){codePoint=65533;bytesPerSequence=1}else if(codePoint>65535){codePoint-=65536;res.push(codePoint>>>10&1023|55296);codePoint=56320|codePoint&1023}res.push(codePoint);i+=bytesPerSequence}return decodeCodePointsArray(res)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH){return String.fromCharCode.apply(String,codePoints)}var res="";var i=0;while(i<len){res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH))}return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i]&127)}return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i])}return ret}function hexSlice(buf,start,end){var len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out="";for(var i=start;i<end;++i){out+=toHex(buf[i])}return out}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res="";for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256)}return res}Buffer.prototype.slice=function slice(start,end){var len=this.length;start=~~start;end=end===undefined?len:~~end;if(start<0){start+=len;if(start<0)start=0}else if(start>len){start=len}if(end<0){end+=len;if(end<0)end=0}else if(end>len){end=len}if(end<start)end=start;var newBuf=this.subarray(start,end);newBuf.__proto__=Buffer.prototype;return newBuf};function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}return val};Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){checkOffset(offset,byteLength,this.length)}var val=this[offset+--byteLength];var mul=1;while(byteLength>0&&(mul*=256)){val+=this[offset+--byteLength]*mul}return val};Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,1,this.length);return this[offset]};Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8};Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1]};Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*16777216};Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]*16777216+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])};Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var i=byteLength;var mul=1;var val=this[offset+--i];while(i>0&&(mul*=256)){val+=this[offset+--i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readInt8=function readInt8(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,1,this.length);if(!(this[offset]&128))return this[offset];return(255-this[offset]+1)*-1};Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24};Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]};Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,true,23,4)};Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,false,23,4)};Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,true,52,8)};Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,false,52,8)};function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var mul=1;var i=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var i=byteLength-1;var mul=1;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,255,0);this[offset]=value&255;return offset+1};Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,65535,0);this[offset]=value&255;this[offset+1]=value>>>8;return offset+2};Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,65535,0);this[offset]=value>>>8;this[offset+1]=value&255;return offset+2};Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=value&255;return offset+4};Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255;return offset+4};Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0;var mul=1;var sub=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){if(value<0&&sub===0&&this[offset+i-1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1;var mul=1;var sub=0;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){if(value<0&&sub===0&&this[offset+i+1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,127,-128);if(value<0)value=255+value+1;this[offset]=value&255;return offset+1};Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);this[offset]=value&255;this[offset+1]=value>>>8;return offset+2};Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);this[offset]=value>>>8;this[offset+1]=value&255;return offset+2};Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);this[offset]=value&255;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24;return offset+4};Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(value<0)value=4294967295+value+1;this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255;return offset+4};function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){value=+value;offset=offset>>>0;if(!noAssert){checkIEEE754(buf,value,offset,4,34028234663852886e22,-34028234663852886e22)}ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4}Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert)};Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert)};function writeDouble(buf,value,offset,littleEndian,noAssert){value=+value;offset=offset>>>0;if(!noAssert){checkIEEE754(buf,value,offset,8,17976931348623157e292,-17976931348623157e292)}ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8}Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert)};Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert)};Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!Buffer.isBuffer(target))throw new TypeError("argument should be a Buffer");if(!start)start=0;if(!end&&end!==0)end=this.length;if(targetStart>=target.length)targetStart=target.length;if(!targetStart)targetStart=0;if(end>0&&end<start)end=start;if(end===start)return 0;if(target.length===0||this.length===0)return 0;if(targetStart<0){throw new RangeError("targetStart out of bounds")}if(start<0||start>=this.length)throw new RangeError("Index out of range");if(end<0)throw new RangeError("sourceEnd out of bounds");if(end>this.length)end=this.length;if(target.length-targetStart<end-start){end=target.length-targetStart+start}var len=end-start;if(this===target&&typeof Uint8Array.prototype.copyWithin==="function"){this.copyWithin(targetStart,start,end)}else if(this===target&&start<targetStart&&targetStart<end){for(var i=len-1;i>=0;--i){target[i+targetStart]=this[i+start]}}else{Uint8Array.prototype.set.call(target,this.subarray(start,end),targetStart)}return len};Buffer.prototype.fill=function fill(val,start,end,encoding){if(typeof val==="string"){if(typeof start==="string"){encoding=start;start=0;end=this.length}else if(typeof end==="string"){encoding=end;end=this.length}if(encoding!==undefined&&typeof encoding!=="string"){throw new TypeError("encoding must be a string")}if(typeof encoding==="string"&&!Buffer.isEncoding(encoding)){throw new TypeError("Unknown encoding: "+encoding)}if(val.length===1){var code=val.charCodeAt(0);if(encoding==="utf8"&&code<128||encoding==="latin1"){val=code}}}else if(typeof val==="number"){val=val&255}if(start<0||this.length<start||this.length<end){throw new RangeError("Out of range index")}if(end<=start){return this}start=start>>>0;end=end===undefined?this.length:end>>>0;if(!val)val=0;var i;if(typeof val==="number"){for(i=start;i<end;++i){this[i]=val}}else{var bytes=Buffer.isBuffer(val)?val:Buffer.from(val,encoding);var len=bytes.length;if(len===0){throw new TypeError('The value "'+val+'" is invalid for argument "value"')}for(i=0;i<end-start;++i){this[i+start]=bytes[i%len]}}return this};var INVALID_BASE64_RE=/[^+/0-9A-Za-z-_]/g;function base64clean(str){str=str.split("=")[0];str=str.trim().replace(INVALID_BASE64_RE,"");if(str.length<2)return"";while(str.length%4!==0){str=str+"="}return str}function toHex(n){if(n<16)return"0"+n.toString(16);return n.toString(16)}function utf8ToBytes(string,units){units=units||Infinity;var codePoint;var length=string.length;var leadSurrogate=null;var bytes=[];for(var i=0;i<length;++i){codePoint=string.charCodeAt(i);if(codePoint>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){if((units-=3)>-1)bytes.push(239,191,189);continue}else if(i+1===length){if((units-=3)>-1)bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){if((units-=3)>-1)bytes.push(239,191,189);leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else if(leadSurrogate){if((units-=3)>-1)bytes.push(239,191,189)}leadSurrogate=null;if(codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,codePoint&63|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,codePoint&63|128)}else if(codePoint<1114112){if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,codePoint&63|128)}else{throw new Error("Invalid code point")}}return bytes}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;++i){byteArray.push(str.charCodeAt(i)&255)}return byteArray}function utf16leToBytes(str,units){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;++i){if((units-=2)<0)break;c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi)}return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length;++i){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i]}return i}function isInstance(obj,type){return obj instanceof type||obj!=null&&obj.constructor!=null&&obj.constructor.name!=null&&obj.constructor.name===type.name}function numberIsNaN(obj){return obj!==obj}}).call(this)}).call(this,require("buffer").Buffer)},{"base64-js":49,buffer:54,ieee754:61}],55:[function(require,module,exports){!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,function(){"use strict";var t=1e3,e=6e4,n=36e5,r="millisecond",i="second",s="minute",u="hour",a="day",o="week",f="month",h="quarter",c="year",d="date",l="Invalid Date",$=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+m(r,2,"0")+":"+m(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,f),s=n-i<0,u=e.clone().add(r+(s?-1:1),f);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:f,y:c,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:h}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},g="en",D={};D[g]=M;var p=function(t){return t instanceof _},S=function t(e,n,r){var i;if(!e)return g;if("string"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split("-");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(g=i),i||!r&&g},w=function(t,e){if(p(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},O=v;O.l=S,O.i=p,O.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=S(t.locale,null,!0),this.parse(t)}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(O.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match($);if(r){var i=r[2]-1||0,s=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return O},m.isValid=function(){return!(this.$d.toString()===l)},m.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return w(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<w(t)},m.$g=function(t,e,n){return O.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!O.u(e)||e,h=O.p(t),l=function(t,e){var i=O.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},$=function(t,e){return O.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,v="set"+(this.$u?"UTC":"");switch(h){case c:return r?l(1,0):l(31,11);case f:return r?l(1,M):l(0,M+1);case o:var g=this.$locale().weekStart||0,D=(y<g?y+7:y)-g;return l(r?m-D:m+(6-D),M);case a:case d:return $(v+"Hours",0);case u:return $(v+"Minutes",1);case s:return $(v+"Seconds",2);case i:return $(v+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=O.p(t),h="set"+(this.$u?"UTC":""),l=(n={},n[a]=h+"Date",n[d]=h+"Date",n[f]=h+"Month",n[c]=h+"FullYear",n[u]=h+"Hours",n[s]=h+"Minutes",n[i]=h+"Seconds",n[r]=h+"Milliseconds",n)[o],$=o===a?this.$D+(e-this.$W):e;if(o===f||o===c){var y=this.clone().set(d,1);y.$d[l]($),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else l&&this.$d[l]($);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[O.p(t)]()},m.add=function(r,h){var d,l=this;r=Number(r);var $=O.p(h),y=function(t){var e=w(l);return O.w(e.date(e.date()+Math.round(t*r)),l)};if($===f)return this.set(f,this.$M+r);if($===c)return this.set(c,this.$y+r);if($===a)return y(1);if($===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[$]||1,m=this.$d.getTime()+r*M;return O.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||l;var r=t||"YYYY-MM-DDTHH:mm:ssZ",i=O.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,f=n.months,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},c=function(t){return O.s(s%12||12,t,"0")},d=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},$={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:O.s(a+1,2,"0"),MMM:h(n.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:O.s(this.$D,2,"0"),d:String(this.$W),dd:h(n.weekdaysMin,this.$W,o,2),ddd:h(n.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:O.s(s,2,"0"),h:c(1),hh:c(2),a:d(s,u,!0),A:d(s,u,!1),m:String(u),mm:O.s(u,2,"0"),s:String(this.$s),ss:O.s(this.$s,2,"0"),SSS:O.s(this.$ms,3,"0"),Z:i};return r.replace(y,function(t,e){return e||$[t]||i.replace(":","")})},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,l){var $,y=O.p(d),M=w(r),m=(M.utcOffset()-this.utcOffset())*e,v=this-M,g=O.m(this,M);return g=($={},$[c]=g/12,$[f]=g,$[h]=g/3,$[o]=(v-m)/6048e5,$[a]=(v-m)/864e5,$[u]=v/n,$[s]=v/e,$[i]=v/t,$)[y]||v,l?g:O.a(g)},m.daysInMonth=function(){return this.endOf(f).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=S(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return O.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),T=_.prototype;return w.prototype=T,[["$ms",r],["$s",i],["$m",s],["$H",u],["$W",a],["$M",f],["$y",c],["$D",d]].forEach(function(t){T[t[1]]=function(e){return this.$g(e,t[0],t[1])}}),w.extend=function(t,e){return t.$i||(t(e,_,w),t.$i=!0),w},w.locale=S,w.isDayjs=p,w.unix=function(t){return w(1e3*t)},w.en=D[g],w.Ls=D,w.p={},w})},{}],56:[function(require,module,exports){(function(process){(function(){exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage=localstorage();exports.destroy=(()=>{let warned=false;return()=>{if(!warned){warned=true;console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}}})();exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function useColors(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)){return true}if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function formatArgs(args){args[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+args[0]+(this.useColors?"%c ":" ")+"+"+module.exports.humanize(this.diff);if(!this.useColors){return}const c="color: "+this.color;args.splice(1,0,c,"color: inherit");let index=0;let lastC=0;args[0].replace(/%[a-zA-Z%]/g,match=>{if(match==="%%"){return}index++;if(match==="%c"){lastC=index}});args.splice(lastC,0,c)}exports.log=console.debug||console.log||(()=>{});function save(namespaces){try{if(namespaces){exports.storage.setItem("debug",namespaces)}else{exports.storage.removeItem("debug")}}catch(error){}}function load(){let r;try{r=exports.storage.getItem("debug")}catch(error){}if(!r&&typeof process!=="undefined"&&"env"in process){r=process.env.DEBUG}return r}function localstorage(){try{return localStorage}catch(error){}}module.exports=require("./common")(exports);const{formatters}=module.exports;formatters.j=function(v){try{return JSON.stringify(v)}catch(error){return"[UnexpectedJSONParseError]: "+error.message}}}).call(this)}).call(this,require("_process"))},{"./common":57,_process:101}],57:[function(require,module,exports){function setup(env){createDebug.debug=createDebug;createDebug.default=createDebug;createDebug.coerce=coerce;createDebug.disable=disable;createDebug.enable=enable;createDebug.enabled=enabled;createDebug.humanize=require("ms");createDebug.destroy=destroy;Object.keys(env).forEach(key=>{createDebug[key]=env[key]});createDebug.names=[];createDebug.skips=[];createDebug.formatters={};function selectColor(namespace){let hash=0;for(let i=0;i<namespace.length;i++){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0}return createDebug.colors[Math.abs(hash)%createDebug.colors.length]}createDebug.selectColor=selectColor;function createDebug(namespace){let prevTime;let enableOverride=null;let namespacesCache;let enabledCache;function debug(...args){if(!debug.enabled){return}const self=debug;const curr=Number(new Date);const ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;args[0]=createDebug.coerce(args[0]);if(typeof args[0]!=="string"){args.unshift("%O")}let index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,(match,format)=>{if(match==="%%"){return"%"}index++;const formatter=createDebug.formatters[format];if(typeof formatter==="function"){const val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});createDebug.formatArgs.call(self,args);const logFn=self.log||createDebug.log;logFn.apply(self,args)}debug.namespace=namespace;debug.useColors=createDebug.useColors();debug.color=createDebug.selectColor(namespace);debug.extend=extend;debug.destroy=createDebug.destroy;Object.defineProperty(debug,"enabled",{enumerable:true,configurable:false,get:()=>{if(enableOverride!==null){return enableOverride}if(namespacesCache!==createDebug.namespaces){namespacesCache=createDebug.namespaces;enabledCache=createDebug.enabled(namespace)}return enabledCache},set:v=>{enableOverride=v}});if(typeof createDebug.init==="function"){createDebug.init(debug)}return debug}function extend(namespace,delimiter){const newDebug=createDebug(this.namespace+(typeof delimiter==="undefined"?":":delimiter)+namespace);newDebug.log=this.log;return newDebug}function enable(namespaces){createDebug.save(namespaces);createDebug.namespaces=namespaces;createDebug.names=[];createDebug.skips=[];let i;const split=(typeof namespaces==="string"?namespaces:"").split(/[\s,]+/);const len=split.length;for(i=0;i<len;i++){if(!split[i]){continue}namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){createDebug.skips.push(new RegExp("^"+namespaces.slice(1)+"$"))}else{createDebug.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){const namespaces=[...createDebug.names.map(toNamespace),...createDebug.skips.map(toNamespace).map(namespace=>"-"+namespace)].join(",");createDebug.enable("");return namespaces}function enabled(name){if(name[name.length-1]==="*"){return true}let i;let len;for(i=0,len=createDebug.skips.length;i<len;i++){if(createDebug.skips[i].test(name)){return false}}for(i=0,len=createDebug.names.length;i<len;i++){if(createDebug.names[i].test(name)){return true}}return false}function toNamespace(regexp){return regexp.toString().substring(2,regexp.toString().length-2).replace(/\.\*\?$/,"*")}function coerce(val){if(val instanceof Error){return val.stack||val.message}return val}function destroy(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}createDebug.enable(createDebug.load());return createDebug}module.exports=setup},{ms:84}],58:[function(require,module,exports){(function(process,Buffer){(function(){var stream=require("readable-stream");var eos=require("end-of-stream");var inherits=require("inherits");var shift=require("stream-shift");var SIGNAL_FLUSH=Buffer.from&&Buffer.from!==Uint8Array.from?Buffer.from([0]):new Buffer([0]);var onuncork=function(self,fn){if(self._corked)self.once("uncork",fn);else fn()};var autoDestroy=function(self,err){if(self._autoDestroy)self.destroy(err)};var destroyer=function(self,end){return function(err){if(err)autoDestroy(self,err.message==="premature close"?null:err);else if(end&&!self._ended)self.end()}};var end=function(ws,fn){if(!ws)return fn();if(ws._writableState&&ws._writableState.finished)return fn();if(ws._writableState)return ws.end(fn);ws.end();fn()};var noop=function(){};var toStreams2=function(rs){return new stream.Readable({objectMode:true,highWaterMark:16}).wrap(rs)};var Duplexify=function(writable,readable,opts){if(!(this instanceof Duplexify))return new Duplexify(writable,readable,opts);stream.Duplex.call(this,opts);this._writable=null;this._readable=null;this._readable2=null;this._autoDestroy=!opts||opts.autoDestroy!==false;this._forwardDestroy=!opts||opts.destroy!==false;this._forwardEnd=!opts||opts.end!==false;this._corked=1;this._ondrain=null;this._drained=false;this._forwarding=false;this._unwrite=null;this._unread=null;this._ended=false;this.destroyed=false;if(writable)this.setWritable(writable);if(readable)this.setReadable(readable)};inherits(Duplexify,stream.Duplex);Duplexify.obj=function(writable,readable,opts){if(!opts)opts={};opts.objectMode=true;opts.highWaterMark=16;return new Duplexify(writable,readable,opts)};Duplexify.prototype.cork=function(){if(++this._corked===1)this.emit("cork")};Duplexify.prototype.uncork=function(){if(this._corked&&--this._corked===0)this.emit("uncork")};Duplexify.prototype.setWritable=function(writable){if(this._unwrite)this._unwrite();if(this.destroyed){if(writable&&writable.destroy)writable.destroy();return}if(writable===null||writable===false){this.end();return}var self=this;var unend=eos(writable,{writable:true,readable:false},destroyer(this,this._forwardEnd));var ondrain=function(){var ondrain=self._ondrain;self._ondrain=null;if(ondrain)ondrain()};var clear=function(){self._writable.removeListener("drain",ondrain);unend()};if(this._unwrite)process.nextTick(ondrain);this._writable=writable;this._writable.on("drain",ondrain);this._unwrite=clear;this.uncork()};Duplexify.prototype.setReadable=function(readable){if(this._unread)this._unread();if(this.destroyed){if(readable&&readable.destroy)readable.destroy();return}if(readable===null||readable===false){this.push(null);this.resume();return}var self=this;var unend=eos(readable,{writable:false,readable:true},destroyer(this));var onreadable=function(){self._forward()};var onend=function(){self.push(null)};var clear=function(){self._readable2.removeListener("readable",onreadable);self._readable2.removeListener("end",onend);unend()};this._drained=true;this._readable=readable;this._readable2=readable._readableState?readable:toStreams2(readable);this._readable2.on("readable",onreadable);this._readable2.on("end",onend);this._unread=clear;this._forward()};Duplexify.prototype._read=function(){this._drained=true;this._forward()};Duplexify.prototype._forward=function(){if(this._forwarding||!this._readable2||!this._drained)return;this._forwarding=true;var data;while(this._drained&&(data=shift(this._readable2))!==null){if(this.destroyed)continue;this._drained=this.push(data)}this._forwarding=false};Duplexify.prototype.destroy=function(err,cb){if(!cb)cb=noop;if(this.destroyed)return cb(null);this.destroyed=true;var self=this;process.nextTick(function(){self._destroy(err);cb(null)})};Duplexify.prototype._destroy=function(err){if(err){var ondrain=this._ondrain;this._ondrain=null;if(ondrain)ondrain(err);else this.emit("error",err)}if(this._forwardDestroy){if(this._readable&&this._readable.destroy)this._readable.destroy();if(this._writable&&this._writable.destroy)this._writable.destroy()}this.emit("close")};Duplexify.prototype._write=function(data,enc,cb){if(this.destroyed)return;if(this._corked)return onuncork(this,this._write.bind(this,data,enc,cb));if(data===SIGNAL_FLUSH)return this._finish(cb);if(!this._writable)return cb();if(this._writable.write(data)===false)this._ondrain=cb;else if(!this.destroyed)cb()};Duplexify.prototype._finish=function(cb){var self=this;this.emit("preend");onuncork(this,function(){end(self._forwardEnd&&self._writable,function(){if(self._writableState.prefinished===false)self._writableState.prefinished=true;self.emit("prefinish");onuncork(self,cb)})})};Duplexify.prototype.end=function(data,enc,cb){if(typeof data==="function")return this.end(null,null,data);if(typeof enc==="function")return this.end(data,null,enc);this._ended=true;if(data)this.write(data);if(!this._writableState.ending&&!this._writableState.destroyed)this.write(SIGNAL_FLUSH);return stream.Writable.prototype.end.call(this,cb)};module.exports=Duplexify}).call(this)}).call(this,require("_process"),require("buffer").Buffer)},{_process:101,buffer:54,"end-of-stream":59,inherits:62,"readable-stream":119,"stream-shift":124}],59:[function(require,module,exports){(function(process){(function(){var once=require("once");var noop=function(){};var isRequest=function(stream){return stream.setHeader&&typeof stream.abort==="function"};var isChildProcess=function(stream){return stream.stdio&&Array.isArray(stream.stdio)&&stream.stdio.length===3};var eos=function(stream,opts,callback){if(typeof opts==="function")return eos(stream,null,opts);if(!opts)opts={};callback=once(callback||noop);var ws=stream._writableState;var rs=stream._readableState;var readable=opts.readable||opts.readable!==false&&stream.readable;var writable=opts.writable||opts.writable!==false&&stream.writable;var cancelled=false;var onlegacyfinish=function(){if(!stream.writable)onfinish()};var onfinish=function(){writable=false;if(!readable)callback.call(stream)};var onend=function(){readable=false;if(!writable)callback.call(stream)};var onexit=function(exitCode){callback.call(stream,exitCode?new Error("exited with error code: "+exitCode):null)};var onerror=function(err){callback.call(stream,err)};var onclose=function(){process.nextTick(onclosenexttick)};var onclosenexttick=function(){if(cancelled)return;if(readable&&!(rs&&(rs.ended&&!rs.destroyed)))return callback.call(stream,new Error("premature close"));if(writable&&!(ws&&(ws.ended&&!ws.destroyed)))return callback.call(stream,new Error("premature close"))};var onrequest=function(){stream.req.on("finish",onfinish)};if(isRequest(stream)){stream.on("complete",onfinish);stream.on("abort",onclose);if(stream.req)onrequest();else stream.on("request",onrequest)}else if(writable&&!ws){stream.on("end",onlegacyfinish);stream.on("close",onlegacyfinish)}if(isChildProcess(stream))stream.on("exit",onexit);stream.on("end",onend);stream.on("finish",onfinish);if(opts.error!==false)stream.on("error",onerror);stream.on("close",onclose);return function(){cancelled=true;stream.removeListener("complete",onfinish);stream.removeListener("abort",onclose);stream.removeListener("request",onrequest);if(stream.req)stream.req.removeListener("finish",onfinish);stream.removeListener("end",onlegacyfinish);stream.removeListener("close",onlegacyfinish);stream.removeListener("finish",onfinish);stream.removeListener("exit",onexit);stream.removeListener("end",onend);stream.removeListener("error",onerror);stream.removeListener("close",onclose)}};module.exports=eos}).call(this)}).call(this,require("_process"))},{_process:101,once:99}],60:[function(require,module,exports){"use strict";var R=typeof Reflect==="object"?Reflect:null;var ReflectApply=R&&typeof R.apply==="function"?R.apply:function ReflectApply(target,receiver,args){return Function.prototype.apply.call(target,receiver,args)};var ReflectOwnKeys;if(R&&typeof R.ownKeys==="function"){ReflectOwnKeys=R.ownKeys}else if(Object.getOwnPropertySymbols){ReflectOwnKeys=function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))}}else{ReflectOwnKeys=function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target)}}function ProcessEmitWarning(warning){if(console&&console.warn)console.warn(warning)}var NumberIsNaN=Number.isNaN||function NumberIsNaN(value){return value!==value};function EventEmitter(){EventEmitter.init.call(this)}module.exports=EventEmitter;module.exports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=undefined;var defaultMaxListeners=10;function checkListener(listener){if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:true,get:function(){return defaultMaxListeners},set:function(arg){if(typeof arg!=="number"||arg<0||NumberIsNaN(arg)){throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+arg+".")}defaultMaxListeners=arg}});EventEmitter.init=function(){if(this._events===undefined||this._events===Object.getPrototypeOf(this)._events){this._events=Object.create(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined};EventEmitter.prototype.setMaxListeners=function setMaxListeners(n){if(typeof n!=="number"||n<0||NumberIsNaN(n)){throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".")}this._maxListeners=n;return this};function _getMaxListeners(that){if(that._maxListeners===undefined)return EventEmitter.defaultMaxListeners;return that._maxListeners}EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function emit(type){var args=[];for(var i=1;i<arguments.length;i++)args.push(arguments[i]);var doError=type==="error";var events=this._events;if(events!==undefined)doError=doError&&events.error===undefined;else if(!doError)return false;if(doError){var er;if(args.length>0)er=args[0];if(er instanceof Error){throw er}var err=new Error("Unhandled error."+(er?" ("+er.message+")":""));err.context=er;throw err}var handler=events[type];if(handler===undefined)return false;if(typeof handler==="function"){ReflectApply(handler,this,args)}else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)ReflectApply(listeners[i],this,args)}return true};function _addListener(target,type,listener,prepend){var m;var events;var existing;checkListener(listener);events=target._events;if(events===undefined){events=target._events=Object.create(null);target._eventsCount=0}else{if(events.newListener!==undefined){target.emit("newListener",type,listener.listener?listener.listener:listener);events=target._events}existing=events[type]}if(existing===undefined){existing=events[type]=listener;++target._eventsCount}else{if(typeof existing==="function"){existing=events[type]=prepend?[listener,existing]:[existing,listener]}else if(prepend){existing.unshift(listener)}else{existing.push(listener)}m=_getMaxListeners(target);if(m>0&&existing.length>m&&!existing.warned){existing.warned=true;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+" "+String(type)+" listeners "+"added. Use emitter.setMaxListeners() to "+"increase limit");w.name="MaxListenersExceededWarning";w.emitter=target;w.type=type;w.count=existing.length;ProcessEmitWarning(w)}}return target}EventEmitter.prototype.addListener=function addListener(type,listener){return _addListener(this,type,listener,false)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function prependListener(type,listener){return _addListener(this,type,listener,true)};function onceWrapper(){if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;if(arguments.length===0)return this.listener.call(this.target);return this.listener.apply(this.target,arguments)}}function _onceWrap(target,type,listener){var state={fired:false,wrapFn:undefined,target:target,type:type,listener:listener};var wrapped=onceWrapper.bind(state);wrapped.listener=listener;state.wrapFn=wrapped;return wrapped}EventEmitter.prototype.once=function once(type,listener){checkListener(listener);this.on(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.prependOnceListener=function prependOnceListener(type,listener){checkListener(listener);this.prependListener(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.removeListener=function removeListener(type,listener){var list,events,position,i,originalListener;checkListener(listener);events=this._events;if(events===undefined)return this;list=events[type];if(list===undefined)return this;if(list===listener||list.listener===listener){if(--this._eventsCount===0)this._events=Object.create(null);else{delete events[type];if(events.removeListener)this.emit("removeListener",type,list.listener||listener)}}else if(typeof list!=="function"){position=-1;for(i=list.length-1;i>=0;i--){if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener;position=i;break}}if(position<0)return this;if(position===0)list.shift();else{spliceOne(list,position)}if(list.length===1)events[type]=list[0];if(events.removeListener!==undefined)this.emit("removeListener",type,originalListener||listener)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function removeAllListeners(type){var listeners,events,i;events=this._events;if(events===undefined)return this;if(events.removeListener===undefined){if(arguments.length===0){this._events=Object.create(null);this._eventsCount=0}else if(events[type]!==undefined){if(--this._eventsCount===0)this._events=Object.create(null);else delete events[type]}return this}if(arguments.length===0){var keys=Object.keys(events);var key;for(i=0;i<keys.length;++i){key=keys[i];if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}listeners=events[type];if(typeof listeners==="function"){this.removeListener(type,listeners)}else if(listeners!==undefined){for(i=listeners.length-1;i>=0;i--){this.removeListener(type,listeners[i])}}return this};function _listeners(target,type,unwrap){var events=target._events;if(events===undefined)return[];var evlistener=events[type];if(evlistener===undefined)return[];if(typeof evlistener==="function")return unwrap?[evlistener.listener||evlistener]:[evlistener];return unwrap?unwrapListeners(evlistener):arrayClone(evlistener,evlistener.length)}EventEmitter.prototype.listeners=function listeners(type){return _listeners(this,type,true)};EventEmitter.prototype.rawListeners=function rawListeners(type){return _listeners(this,type,false)};EventEmitter.listenerCount=function(emitter,type){if(typeof emitter.listenerCount==="function"){return emitter.listenerCount(type)}else{return listenerCount.call(emitter,type)}};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(type){var events=this._events;if(events!==undefined){var evlistener=events[type];if(typeof evlistener==="function"){return 1}else if(evlistener!==undefined){return evlistener.length}}return 0}EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(arr,n){var copy=new Array(n);for(var i=0;i<n;++i)copy[i]=arr[i];return copy}function spliceOne(list,index){for(;index+1<list.length;index++)list[index]=list[index+1];list.pop()}function unwrapListeners(arr){var ret=new Array(arr.length);for(var i=0;i<ret.length;++i){ret[i]=arr[i].listener||arr[i]}return ret}function once(emitter,name){return new Promise(function(resolve,reject){function errorListener(err){emitter.removeListener(name,resolver);reject(err)}function resolver(){if(typeof emitter.removeListener==="function"){emitter.removeListener("error",errorListener)}resolve([].slice.call(arguments))}eventTargetAgnosticAddListener(emitter,name,resolver,{once:true});if(name!=="error"){addErrorHandlerIfEventEmitter(emitter,errorListener,{once:true})}})}function addErrorHandlerIfEventEmitter(emitter,handler,flags){if(typeof emitter.on==="function"){eventTargetAgnosticAddListener(emitter,"error",handler,flags)}}function eventTargetAgnosticAddListener(emitter,name,listener,flags){if(typeof emitter.on==="function"){if(flags.once){emitter.once(name,listener)}else{emitter.on(name,listener)}}else if(typeof emitter.addEventListener==="function"){emitter.addEventListener(name,function wrapListener(arg){if(flags.once){emitter.removeEventListener(name,wrapListener)}listener(arg)})}else{throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof emitter)}}},{}],61:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8){}buffer[offset+i-d]|=s*128}},{}],62:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}}else{module.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}}},{}],63:[function(require,module,exports){(function(global){(function(){(function(){var undefined;var VERSION="4.17.21";var LARGE_ARRAY_SIZE=200;var CORE_ERROR_TEXT="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",FUNC_ERROR_TEXT="Expected a function",INVALID_TEMPL_VAR_ERROR_TEXT="Invalid `variable` option passed into `_.template`";var HASH_UNDEFINED="__lodash_hash_undefined__";var MAX_MEMOIZE_SIZE=500;var PLACEHOLDER="__lodash_placeholder__";var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4;var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;var WRAP_BIND_FLAG=1,WRAP_BIND_KEY_FLAG=2,WRAP_CURRY_BOUND_FLAG=4,WRAP_CURRY_FLAG=8,WRAP_CURRY_RIGHT_FLAG=16,WRAP_PARTIAL_FLAG=32,WRAP_PARTIAL_RIGHT_FLAG=64,WRAP_ARY_FLAG=128,WRAP_REARG_FLAG=256,WRAP_FLIP_FLAG=512;var DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...";var HOT_COUNT=800,HOT_SPAN=16;var LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2,LAZY_WHILE_FLAG=3;var INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER=17976931348623157e292,NAN=0/0;var MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1;var wrapFlags=[["ary",WRAP_ARY_FLAG],["bind",WRAP_BIND_FLAG],["bindKey",WRAP_BIND_KEY_FLAG],["curry",WRAP_CURRY_FLAG],["curryRight",WRAP_CURRY_RIGHT_FLAG],["flip",WRAP_FLIP_FLAG],["partial",WRAP_PARTIAL_FLAG],["partialRight",WRAP_PARTIAL_RIGHT_FLAG],["rearg",WRAP_REARG_FLAG]];var argsTag="[object Arguments]",arrayTag="[object Array]",asyncTag="[object AsyncFunction]",boolTag="[object Boolean]",dateTag="[object Date]",domExcTag="[object DOMException]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",nullTag="[object Null]",objectTag="[object Object]",promiseTag="[object Promise]",proxyTag="[object Proxy]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",undefinedTag="[object Undefined]",weakMapTag="[object WeakMap]",weakSetTag="[object WeakSet]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reUnescapedHtml=/[&<>"']/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source);var reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g;var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source);var reTrimStart=/^\s+/;var reWhitespace=/\s/;var reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /;var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var reForbiddenIdentifierChars=/[()=,{}\[\]\/\s]/;var reEscapeChar=/\\(\\)?/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsOctal=/^0o[0-7]+$/i;var reIsUint=/^(?:0|[1-9]\d*)$/;var reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;var reNoMatch=/($^)/;var reUnescapedString=/['\n\r\u2028\u2029\\]/g;var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange;var rsApos="['’]",rsAstral="["+rsAstralRange+"]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d";var rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsOrdLower="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsOrdUpper="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")";var reApos=RegExp(rsApos,"g");var reComboMark=RegExp(rsCombo,"g");var reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");var reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g");var reHasUnicode=RegExp("["+rsZWJ+rsAstralRange+rsComboRange+rsVarRange+"]");var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var contextProps=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"];var templateCounter=-1;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=false;var deburredLetters={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"};var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};var freeParseFloat=parseFloat,freeParseInt=parseInt;var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;if(types){return types}return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();var nodeIsArrayBuffer=nodeUtil&&nodeUtil.isArrayBuffer,nodeIsDate=nodeUtil&&nodeUtil.isDate,nodeIsMap=nodeUtil&&nodeUtil.isMap,nodeIsRegExp=nodeUtil&&nodeUtil.isRegExp,nodeIsSet=nodeUtil&&nodeUtil.isSet,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function arrayAggregator(array,setter,iteratee,accumulator){var index=-1,length=array==null?0:array.length;while(++index<length){var value=array[index];setter(accumulator,value,iteratee(value),array)}return accumulator}function arrayEach(array,iteratee){var index=-1,length=array==null?0:array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}function arrayEachRight(array,iteratee){var length=array==null?0:array.length;while(length--){if(iteratee(array[length],length,array)===false){break}}return array}function arrayEvery(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(!predicate(array[index],index,array)){return false}}return true}function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value}}return result}function arrayIncludes(array,value){var length=array==null?0:array.length;return!!length&&baseIndexOf(array,value,0)>-1}function arrayIncludesWith(array,value,comparator){var index=-1,length=array==null?0:array.length;while(++index<length){if(comparator(value,array[index])){return true}}return false}function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array==null?0:array.length;if(initAccum&&length){accumulator=array[++index]}while(++index<length){accumulator=iteratee(accumulator,array[index],index,array)}return accumulator}function arrayReduceRight(array,iteratee,accumulator,initAccum){var length=array==null?0:array.length;if(initAccum&&length){accumulator=array[--length]}while(length--){accumulator=iteratee(accumulator,array[length],length,array)}return accumulator}function arraySome(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}var asciiSize=baseProperty("length");function asciiToArray(string){return string.split("")}function asciiWords(string){return string.match(reAsciiWord)||[]}function baseFindKey(collection,predicate,eachFunc){var result;eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection)){result=key;return false}});return result}function baseFindIndex(array,predicate,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?1:-1);while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index}}return-1}function baseIndexOf(array,value,fromIndex){return value===value?strictIndexOf(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex)}function baseIndexOfWith(array,value,fromIndex,comparator){var index=fromIndex-1,length=array.length;while(++index<length){if(comparator(array[index],value)){return index}}return-1}function baseIsNaN(value){return value!==value}function baseMean(array,iteratee){var length=array==null?0:array.length;return length?baseSum(array,iteratee)/length:NAN}function baseProperty(key){return function(object){return object==null?undefined:object[key]}}function basePropertyOf(object){return function(key){return object==null?undefined:object[key]}}function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){eachFunc(collection,function(value,index,collection){accumulator=initAccum?(initAccum=false,value):iteratee(accumulator,value,index,collection)});return accumulator}function baseSortBy(array,comparer){var length=array.length;array.sort(comparer);while(length--){array[length]=array[length].value}return array}function baseSum(array,iteratee){var result,index=-1,length=array.length;while(++index<length){var current=iteratee(array[index]);if(current!==undefined){result=result===undefined?current:result+current}}return result}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}function baseToPairs(object,props){return arrayMap(props,function(key){return[key,object[key]]})}function baseTrim(string){return string?string.slice(0,trimmedEndIndex(string)+1).replace(reTrimStart,""):string}function baseUnary(func){return function(value){return func(value)}}function baseValues(object,props){return arrayMap(props,function(key){return object[key]})}function cacheHas(cache,key){return cache.has(key)}function charsStartIndex(strSymbols,chrSymbols){var index=-1,length=strSymbols.length;while(++index<length&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1){}return index}function charsEndIndex(strSymbols,chrSymbols){var index=strSymbols.length;while(index--&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1){}return index}function countHolders(array,placeholder){var length=array.length,result=0;while(length--){if(array[length]===placeholder){++result}}return result}var deburrLetter=basePropertyOf(deburredLetters);var escapeHtmlChar=basePropertyOf(htmlEscapes);function escapeStringChar(chr){return"\\"+stringEscapes[chr]}function getValue(object,key){return object==null?undefined:object[key]}function hasUnicode(string){return reHasUnicode.test(string)}function hasUnicodeWord(string){return reHasUnicodeWord.test(string)}function iteratorToArray(iterator){var data,result=[];while(!(data=iterator.next()).done){result.push(data.value)}return result}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value]});return result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function replaceHolders(array,placeholder){var index=-1,length=array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(value===placeholder||value===PLACEHOLDER){array[index]=PLACEHOLDER;result[resIndex++]=index}}return result}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value});return result}function setToPairs(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=[value,value]});return result}function strictIndexOf(array,value,fromIndex){var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index}}return-1}function strictLastIndexOf(array,value,fromIndex){var index=fromIndex+1;while(index--){if(array[index]===value){return index}}return index}function stringSize(string){return hasUnicode(string)?unicodeSize(string):asciiSize(string)}function stringToArray(string){return hasUnicode(string)?unicodeToArray(string):asciiToArray(string)}function trimmedEndIndex(string){var index=string.length;while(index--&&reWhitespace.test(string.charAt(index))){}return index}var unescapeHtmlChar=basePropertyOf(htmlUnescapes);function unicodeSize(string){var result=reUnicode.lastIndex=0;while(reUnicode.test(string)){++result}return result}function unicodeToArray(string){return string.match(reUnicode)||[]}function unicodeWords(string){return string.match(reUnicodeWord)||[]}var runInContext=function runInContext(context){context=context==null?root:_.defaults(root.Object(),context,_.pick(root,contextProps));var Array=context.Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError;var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=context["__core-js_shared__"];var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var idCounter=0;var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();var nativeObjectToString=objectProto.toString;var objectCtorString=funcToString.call(Object);var oldDash=root._;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Buffer=moduleExports?context.Buffer:undefined,Symbol=context.Symbol,Uint8Array=context.Uint8Array,allocUnsafe=Buffer?Buffer.allocUnsafe:undefined,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,spreadableSymbol=Symbol?Symbol.isConcatSpreadable:undefined,symIterator=Symbol?Symbol.iterator:undefined,symToStringTag=Symbol?Symbol.toStringTag:undefined;var defineProperty=function(){try{var func=getNative(Object,"defineProperty");func({},"",{});return func}catch(e){}}();var ctxClearTimeout=context.clearTimeout!==root.clearTimeout&&context.clearTimeout,ctxNow=Date&&Date.now!==root.Date.now&&Date.now,ctxSetTimeout=context.setTimeout!==root.setTimeout&&context.setTimeout;var nativeCeil=Math.ceil,nativeFloor=Math.floor,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,nativeIsFinite=context.isFinite,nativeJoin=arrayProto.join,nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max,nativeMin=Math.min,nativeNow=Date.now,nativeParseInt=context.parseInt,nativeRandom=Math.random,nativeReverse=arrayProto.reverse;var DataView=getNative(context,"DataView"),Map=getNative(context,"Map"),Promise=getNative(context,"Promise"),Set=getNative(context,"Set"),WeakMap=getNative(context,"WeakMap"),nativeCreate=getNative(Object,"create");var metaMap=WeakMap&&new WeakMap;var realNames={};var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper){return value}if(hasOwnProperty.call(value,"__wrapped__")){return wrapperClone(value)}}return new LodashWrapper(value)}var baseCreate=function(){function object(){}return function(proto){if(!isObject(proto)){return{}}if(objectCreate){return objectCreate(proto)}object.prototype=proto;var result=new object;object.prototype=undefined;return result}}();function baseLodash(){}function LodashWrapper(value,chainAll){this.__wrapped__=value;this.__actions__=[];this.__chain__=!!chainAll;this.__index__=0;this.__values__=undefined}lodash.templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}};lodash.prototype=baseLodash.prototype;lodash.prototype.constructor=lodash;LodashWrapper.prototype=baseCreate(baseLodash.prototype);LodashWrapper.prototype.constructor=LodashWrapper;function LazyWrapper(value){this.__wrapped__=value;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=MAX_ARRAY_LENGTH;this.__views__=[]}function lazyClone(){var result=new LazyWrapper(this.__wrapped__);result.__actions__=copyArray(this.__actions__);result.__dir__=this.__dir__;result.__filtered__=this.__filtered__;result.__iteratees__=copyArray(this.__iteratees__);result.__takeCount__=this.__takeCount__;result.__views__=copyArray(this.__views__);return result}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1;result.__filtered__=true}else{result=this.clone();result.__dir__*=-1}return result}function lazyValue(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir<0,arrLength=isArr?array.length:0,view=getView(0,arrLength,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr||!isRight&&arrLength==length&&takeCount==length){return baseWrapperValue(array,this.__actions__)}var result=[];outer:while(length--&&resIndex<takeCount){index+=dir;var iterIndex=-1,value=array[index];while(++iterIndex<iterLength){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);if(type==LAZY_MAP_FLAG){value=computed}else if(!computed){if(type==LAZY_FILTER_FLAG){continue outer}else{break outer}}}result[resIndex++]=value}return result}LazyWrapper.prototype=baseCreate(baseLodash.prototype);LazyWrapper.prototype.constructor=LazyWrapper;function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[];this.size=0}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function SetCache(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache;while(++index<length){this.add(values[index])}}function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED);return this}function setCacheHas(value){return this.__data__.has(value)}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function stackClear(){this.__data__=new ListCache;this.size=0}function stackDelete(key){var data=this.__data__,result=data["delete"](key);this.size=data.size;return result}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this}data=this.__data__=new MapCache(pairs)}data.set(key,value);this.size=data.size;return this}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length)))){result.push(key)}}return result}function arraySample(array){var length=array.length;return length?array[baseRandom(0,length-1)]:undefined}function arraySampleSize(array,n){return shuffleSelf(copyArray(array),baseClamp(n,0,array.length))}function arrayShuffle(array){return shuffleSelf(copyArray(array))}function assignMergeValue(object,key,value){if(value!==undefined&&!eq(object[key],value)||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}function baseAggregator(collection,setter,iteratee,accumulator){baseEach(collection,function(value,key,collection){setter(accumulator,value,iteratee(value),collection)});return accumulator}function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function baseAssignIn(object,source){return object&&copyObject(source,keysIn(source),object)}function baseAssignValue(object,key,value){if(key=="__proto__"&&defineProperty){defineProperty(object,key,{configurable:true,enumerable:true,value:value,writable:true})}else{object[key]=value}}function baseAt(object,paths){var index=-1,length=paths.length,result=Array(length),skip=object==null;while(++index<length){result[index]=skip?undefined:get(object,paths[index])}return result}function baseClamp(number,lower,upper){if(number===number){if(upper!==undefined){number=number<=upper?number:upper}if(lower!==undefined){number=number>=lower?number:lower}}return number}function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG;if(customizer){result=object?customizer(value,key,object,stack):customizer(value)}if(result!==undefined){return result}if(!isObject(value)){return value}var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep){return copyArray(value,result)}}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value)){return cloneBuffer(value,isDeep)}if(tag==objectTag||tag==argsTag||isFunc&&!object){result=isFlat||isFunc?{}:initCloneObject(value);if(!isDeep){return isFlat?copySymbolsIn(value,baseAssignIn(result,value)):copySymbols(value,baseAssign(result,value))}}else{if(!cloneableTags[tag]){return object?value:{}}result=initCloneByTag(value,tag,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked){return stacked}stack.set(value,result);if(isSet(value)){value.forEach(function(subValue){result.add(baseClone(subValue,bitmask,customizer,subValue,value,stack))})}else if(isMap(value)){value.forEach(function(subValue,key){result.set(key,baseClone(subValue,bitmask,customizer,key,value,stack))})}var keysFunc=isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys;var props=isArr?undefined:keysFunc(value);arrayEach(props||value,function(subValue,key){if(props){key=subValue;subValue=value[key]}assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))});return result}function baseConforms(source){var props=keys(source);return function(object){return baseConformsTo(object,source,props)}}function baseConformsTo(object,source,props){var length=props.length;if(object==null){return!length}object=Object(object);while(length--){var key=props[length],predicate=source[key],value=object[key];if(value===undefined&&!(key in object)||!predicate(value)){return false}}return true}function baseDelay(func,wait,args){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return setTimeout(function(){func.apply(undefined,args)},wait)}function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=true,length=array.length,result=[],valuesLength=values.length;if(!length){return result}if(iteratee){values=arrayMap(values,baseUnary(iteratee))}if(comparator){includes=arrayIncludesWith;isCommon=false}else if(values.length>=LARGE_ARRAY_SIZE){includes=cacheHas;isCommon=false;values=new SetCache(values)}outer:while(++index<length){var value=array[index],computed=iteratee==null?value:iteratee(value);value=comparator||value!==0?value:0;if(isCommon&&computed===computed){var valuesIndex=valuesLength;while(valuesIndex--){if(values[valuesIndex]===computed){continue outer}}result.push(value)}else if(!includes(values,computed,comparator)){result.push(value)}}return result}var baseEach=createBaseEach(baseForOwn);var baseEachRight=createBaseEach(baseForOwnRight,true);function baseEvery(collection,predicate){var result=true;baseEach(collection,function(value,index,collection){result=!!predicate(value,index,collection);return result});return result}function baseExtremum(array,iteratee,comparator){var index=-1,length=array.length;while(++index<length){var value=array[index],current=iteratee(value);if(current!=null&&(computed===undefined?current===current&&!isSymbol(current):comparator(current,computed))){var computed=current,result=value}}return result}function baseFill(array,value,start,end){var length=array.length;start=toInteger(start);if(start<0){start=-start>length?0:length+start}end=end===undefined||end>length?length:toInteger(end);if(end<0){end+=length}end=start>end?0:toLength(end);while(start<end){array[start++]=value}return array}function baseFilter(collection,predicate){var result=[];baseEach(collection,function(value,index,collection){if(predicate(value,index,collection)){result.push(value)}});return result}function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;predicate||(predicate=isFlattenable);result||(result=[]);while(++index<length){var value=array[index];if(depth>0&&predicate(value)){if(depth>1){baseFlatten(value,depth-1,predicate,isStrict,result)}else{arrayPush(result,value)}}else if(!isStrict){result[result.length]=value}}return result}var baseFor=createBaseFor();var baseForRight=createBaseFor(true);function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function baseForOwnRight(object,iteratee){return object&&baseForRight(object,iteratee,keys)}function baseFunctions(object,props){return arrayFilter(props,function(key){return isFunction(object[key])})}function baseGet(object,path){path=castPath(path,object);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])]}return index&&index==length?object:undefined}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}function baseGt(value,other){return value>other}function baseHas(object,key){return object!=null&&hasOwnProperty.call(object,key)}function baseHasIn(object,key){return object!=null&&key in Object(object)}function baseInRange(number,start,end){return number>=nativeMin(start,end)&&number<nativeMax(start,end)}function baseIntersection(arrays,iteratee,comparator){var includes=comparator?arrayIncludesWith:arrayIncludes,length=arrays[0].length,othLength=arrays.length,othIndex=othLength,caches=Array(othLength),maxLength=Infinity,result=[];while(othIndex--){var array=arrays[othIndex];if(othIndex&&iteratee){array=arrayMap(array,baseUnary(iteratee))}maxLength=nativeMin(array.length,maxLength);caches[othIndex]=!comparator&&(iteratee||length>=120&&array.length>=120)?new SetCache(othIndex&&array):undefined}array=arrays[0];var index=-1,seen=caches[0];outer:while(++index<length&&result.length<maxLength){var value=array[index],computed=iteratee?iteratee(value):value;value=comparator||value!==0?value:0;if(!(seen?cacheHas(seen,computed):includes(result,computed,comparator))){othIndex=othLength;while(--othIndex){var cache=caches[othIndex];if(!(cache?cacheHas(cache,computed):includes(arrays[othIndex],computed,comparator))){continue outer}}if(seen){seen.push(computed)}result.push(value)}}return result}function baseInverter(object,setter,iteratee,accumulator){baseForOwn(object,function(value,key,object){setter(accumulator,iteratee(value),key,object)});return accumulator}function baseInvoke(object,path,args){path=castPath(path,object);object=parent(object,path);var func=object==null?object:object[toKey(last(path))];return func==null?undefined:apply(func,object,args)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsArrayBuffer(value){return isObjectLike(value)&&baseGetTag(value)==arrayBufferTag}function baseIsDate(value){return isObjectLike(value)&&baseGetTag(value)==dateTag}function baseIsEqual(value,other,bitmask,customizer,stack){if(value===other){return true}if(value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)){return value!==value&&other!==other}return baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack)}function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other);objTag=objTag==argsTag?objectTag:objTag;othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other)){return false}objIsArr=true;objIsObj=false}if(isSameTag&&!objIsObj){stack||(stack=new Stack);return objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack)}if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack);return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag){return false}stack||(stack=new Stack);return equalObjects(object,other,bitmask,customizer,equalFunc,stack)}function baseIsMap(value){return isObjectLike(value)&&getTag(value)==mapTag}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length}object=Object(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false}}else{var stack=new Stack;if(customizer){var result=customizer(objValue,srcValue,key,object,source,stack)}if(!(result===undefined?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG,customizer,stack):result)){return false}}}return true}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function baseIsRegExp(value){return isObjectLike(value)&&baseGetTag(value)==regexpTag}function baseIsSet(value){return isObjectLike(value)&&getTag(value)==setTag}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}function baseIteratee(value){if(typeof value=="function"){return value}if(value==null){return identity}if(typeof value=="object"){return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value)}return property(value)}function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!="constructor"){result.push(key)}}return result}function baseKeysIn(object){if(!isObject(object)){return nativeKeysIn(object)}var isProto=isPrototype(object),result=[];for(var key in object){if(!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}function baseLt(value,other){return value<other}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)});return result}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){return matchesStrictComparable(matchData[0][0],matchData[0][1])}return function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseMatchesProperty(path,srcValue){if(isKey(path)&&isStrictComparable(srcValue)){return matchesStrictComparable(toKey(path),srcValue)}return function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseMerge(object,source,srcIndex,customizer,stack){if(object===source){return}baseFor(source,function(srcValue,key){stack||(stack=new Stack);if(isObject(srcValue)){baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack)}else{var newValue=customizer?customizer(safeGet(object,key),srcValue,key+"",object,source,stack):undefined;if(newValue===undefined){newValue=srcValue}assignMergeValue(object,key,newValue)}},keysIn)}function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=safeGet(object,key),srcValue=safeGet(source,key),stacked=stack.get(srcValue);if(stacked){assignMergeValue(object,key,stacked);return}var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):undefined;var isCommon=newValue===undefined;if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue;if(isArr||isBuff||isTyped){if(isArray(objValue)){newValue=objValue}else if(isArrayLikeObject(objValue)){newValue=copyArray(objValue)}else if(isBuff){isCommon=false;newValue=cloneBuffer(srcValue,true)}else if(isTyped){isCommon=false;newValue=cloneTypedArray(srcValue,true)}else{newValue=[]}}else if(isPlainObject(srcValue)||isArguments(srcValue)){newValue=objValue;if(isArguments(objValue)){newValue=toPlainObject(objValue)}else if(!isObject(objValue)||isFunction(objValue)){newValue=initCloneObject(srcValue)}}else{isCommon=false}}if(isCommon){stack.set(srcValue,newValue);mergeFunc(newValue,srcValue,srcIndex,customizer,stack);stack["delete"](srcValue)}assignMergeValue(object,key,newValue)}function baseNth(array,n){var length=array.length;if(!length){return}n+=n<0?length:0;return isIndex(n,length)?array[n]:undefined}function baseOrderBy(collection,iteratees,orders){if(iteratees.length){iteratees=arrayMap(iteratees,function(iteratee){if(isArray(iteratee)){return function(value){return baseGet(value,iteratee.length===1?iteratee[0]:iteratee)}}return iteratee})}else{iteratees=[identity]}var index=-1;iteratees=arrayMap(iteratees,baseUnary(getIteratee()));var result=baseMap(collection,function(value,key,collection){var criteria=arrayMap(iteratees,function(iteratee){return iteratee(value)});return{criteria:criteria,index:++index,value:value}});return baseSortBy(result,function(object,other){return compareMultiple(object,other,orders)})}function basePick(object,paths){return basePickBy(object,paths,function(value,path){return hasIn(object,path)})}function basePickBy(object,paths,predicate){var index=-1,length=paths.length,result={};while(++index<length){var path=paths[index],value=baseGet(object,path);if(predicate(value,path)){baseSet(result,castPath(path,object),value)}}return result}function basePropertyDeep(path){return function(object){return baseGet(object,path)}}function basePullAll(array,values,iteratee,comparator){var indexOf=comparator?baseIndexOfWith:baseIndexOf,index=-1,length=values.length,seen=array;if(array===values){values=copyArray(values)}if(iteratee){seen=arrayMap(array,baseUnary(iteratee))}while(++index<length){var fromIndex=0,value=values[index],computed=iteratee?iteratee(value):value;while((fromIndex=indexOf(seen,computed,fromIndex,comparator))>-1){if(seen!==array){splice.call(seen,fromIndex,1)}splice.call(array,fromIndex,1)}}return array}function basePullAt(array,indexes){var length=array?indexes.length:0,lastIndex=length-1;while(length--){var index=indexes[length];if(length==lastIndex||index!==previous){var previous=index;if(isIndex(index)){splice.call(array,index,1)}else{baseUnset(array,index)}}}return array}function baseRandom(lower,upper){return lower+nativeFloor(nativeRandom()*(upper-lower+1))}function baseRange(start,end,step,fromRight){var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);while(length--){result[fromRight?length:++index]=start;start+=step}return result}function baseRepeat(string,n){var result="";if(!string||n<1||n>MAX_SAFE_INTEGER){return result}do{if(n%2){result+=string}n=nativeFloor(n/2);if(n){string+=string}}while(n);return result}function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}function baseSample(collection){return arraySample(values(collection))}function baseSampleSize(collection,n){var array=values(collection);return shuffleSelf(array,baseClamp(n,0,array.length))}function baseSet(object,path,value,customizer){if(!isObject(object)){return object}path=castPath(path,object);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(key==="__proto__"||key==="constructor"||key==="prototype"){return object}if(index!=lastIndex){var objValue=nested[key];newValue=customizer?customizer(objValue,key,nested):undefined;if(newValue===undefined){newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{}}}assignValue(nested,key,newValue);nested=nested[key]}return object}var baseSetData=!metaMap?identity:function(func,data){metaMap.set(func,data);return func};var baseSetToString=!defineProperty?identity:function(func,string){return defineProperty(func,"toString",{configurable:true,enumerable:false,value:constant(string),writable:true})};function baseShuffle(collection){return shuffleSelf(values(collection))}function baseSlice(array,start,end){var index=-1,length=array.length;if(start<0){start=-start>length?0:length+start}end=end>length?length:end;if(end<0){end+=length}length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start]}return result}function baseSome(collection,predicate){var result;baseEach(collection,function(value,index,collection){result=predicate(value,index,collection);return!result});return!!result}function baseSortedIndex(array,value,retHighest){var low=0,high=array==null?low:array.length;if(typeof value=="number"&&value===value&&high<=HALF_MAX_ARRAY_LENGTH){while(low<high){var mid=low+high>>>1,computed=array[mid];if(computed!==null&&!isSymbol(computed)&&(retHighest?computed<=value:computed<value)){low=mid+1}else{high=mid}}return high}return baseSortedIndexBy(array,value,identity,retHighest)}function baseSortedIndexBy(array,value,iteratee,retHighest){var low=0,high=array==null?0:array.length;if(high===0){return 0}value=iteratee(value);var valIsNaN=value!==value,valIsNull=value===null,valIsSymbol=isSymbol(value),valIsUndefined=value===undefined;while(low<high){var mid=nativeFloor((low+high)/2),computed=iteratee(array[mid]),othIsDefined=computed!==undefined,othIsNull=computed===null,othIsReflexive=computed===computed,othIsSymbol=isSymbol(computed);if(valIsNaN){var setLow=retHighest||othIsReflexive}else if(valIsUndefined){setLow=othIsReflexive&&(retHighest||othIsDefined)}else if(valIsNull){setLow=othIsReflexive&&othIsDefined&&(retHighest||!othIsNull)}else if(valIsSymbol){setLow=othIsReflexive&&othIsDefined&&!othIsNull&&(retHighest||!othIsSymbol)}else if(othIsNull||othIsSymbol){setLow=false}else{setLow=retHighest?computed<=value:computed<value}if(setLow){low=mid+1}else{high=mid}}return nativeMin(high,MAX_ARRAY_INDEX)}function baseSortedUniq(array,iteratee){var index=-1,length=array.length,resIndex=0,result=[];while(++index<length){var value=array[index],computed=iteratee?iteratee(value):value;if(!index||!eq(computed,seen)){var seen=computed;result[resIndex++]=value===0?0:value}}return result}function baseToNumber(value){if(typeof value=="number"){return value}if(isSymbol(value)){return NAN}return+value}function baseToString(value){if(typeof value=="string"){return value}if(isArray(value)){return arrayMap(value,baseToString)+""}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=true,result=[],seen=result;if(comparator){isCommon=false;includes=arrayIncludesWith}else if(length>=LARGE_ARRAY_SIZE){var set=iteratee?null:createSet(array);if(set){return setToArray(set)}isCommon=false;includes=cacheHas;seen=new SetCache}else{seen=iteratee?[]:result}outer:while(++index<length){var value=array[index],computed=iteratee?iteratee(value):value;value=comparator||value!==0?value:0;if(isCommon&&computed===computed){var seenIndex=seen.length;while(seenIndex--){if(seen[seenIndex]===computed){continue outer}}if(iteratee){seen.push(computed)}result.push(value)}else if(!includes(seen,computed,comparator)){if(seen!==result){seen.push(computed)}result.push(value)}}return result}function baseUnset(object,path){path=castPath(path,object);object=parent(object,path);return object==null||delete object[toKey(last(path))]}function baseUpdate(object,path,updater,customizer){return baseSet(object,path,updater(baseGet(object,path)),customizer)}function baseWhile(array,predicate,isDrop,fromRight){var length=array.length,index=fromRight?length:-1;while((fromRight?index--:++index<length)&&predicate(array[index],index,array)){}return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}function baseWrapperValue(value,actions){var result=value;if(result instanceof LazyWrapper){result=result.value()}return arrayReduce(actions,function(result,action){return action.func.apply(action.thisArg,arrayPush([result],action.args))},result)}function baseXor(arrays,iteratee,comparator){var length=arrays.length;if(length<2){return length?baseUniq(arrays[0]):[]}var index=-1,result=Array(length);while(++index<length){var array=arrays[index],othIndex=-1;while(++othIndex<length){if(othIndex!=index){result[index]=baseDifference(result[index]||array,arrays[othIndex],iteratee,comparator)}}}return baseUniq(baseFlatten(result,1),iteratee,comparator)}function baseZipObject(props,values,assignFunc){var index=-1,length=props.length,valsLength=values.length,result={};while(++index<length){var value=index<valsLength?values[index]:undefined;assignFunc(result,props[index],value)}return result}function castArrayLikeObject(value){return isArrayLikeObject(value)?value:[]}function castFunction(value){return typeof value=="function"?value:identity}function castPath(value,object){if(isArray(value)){return value}return isKey(value,object)?[value]:stringToPath(toString(value))}var castRest=baseRest;function castSlice(array,start,end){var length=array.length;end=end===undefined?length:end;return!start&&end>=length?array:baseSlice(array,start,end)}var clearTimeout=ctxClearTimeout||function(id){return root.clearTimeout(id)};function cloneBuffer(buffer,isDeep){if(isDeep){return buffer.slice()}var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);buffer.copy(result);return result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);new Uint8Array(result).set(new Uint8Array(arrayBuffer));return result}function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));result.lastIndex=regexp.lastIndex;return result}function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}function compareAscending(value,other){if(value!==other){var valIsDefined=value!==undefined,valIsNull=value===null,valIsReflexive=value===value,valIsSymbol=isSymbol(value);var othIsDefined=other!==undefined,othIsNull=other===null,othIsReflexive=other===other,othIsSymbol=isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive){return 1}if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive){return-1}}return 0}function compareMultiple(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;while(++index<length){var result=compareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength){return result}var order=orders[index];return result*(order=="desc"?-1:1)}}return object.index-other.index}function composeArgs(args,partials,holders,isCurried){var argsIndex=-1,argsLength=args.length,holdersLength=holders.length,leftIndex=-1,leftLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(leftLength+rangeLength),isUncurried=!isCurried;while(++leftIndex<leftLength){result[leftIndex]=partials[leftIndex]}while(++argsIndex<holdersLength){if(isUncurried||argsIndex<argsLength){result[holders[argsIndex]]=args[argsIndex]}}while(rangeLength--){result[leftIndex++]=args[argsIndex++]}return result}function composeArgsRight(args,partials,holders,isCurried){var argsIndex=-1,argsLength=args.length,holdersIndex=-1,holdersLength=holders.length,rightIndex=-1,rightLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(rangeLength+rightLength),isUncurried=!isCurried;while(++argsIndex<rangeLength){result[argsIndex]=args[argsIndex]}var offset=argsIndex;while(++rightIndex<rightLength){result[offset+rightIndex]=partials[rightIndex]}while(++holdersIndex<holdersLength){if(isUncurried||argsIndex<argsLength){result[offset+holders[holdersIndex]]=args[argsIndex++]}}return result}function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index]}return array}function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;if(newValue===undefined){newValue=source[key]}if(isNew){baseAssignValue(object,key,newValue)}else{assignValue(object,key,newValue)}}return object}function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}function copySymbolsIn(source,object){return copyObject(source,getSymbolsIn(source),object)}function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,getIteratee(iteratee,2),accumulator)}}function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;customizer=assigner.length>3&&typeof customizer=="function"?(length--,customizer):undefined;if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1}object=Object(object);while(++index<length){var source=sources[index];if(source){assigner(object,source,index,customizer)}}return object})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(collection==null){return collection}if(!isArrayLike(collection)){return eachFunc(collection,iteratee)}var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break}}return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}function createBind(func,bitmask,thisArg){var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);function wrapper(){var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,arguments)}return wrapper}function createCaseFirst(methodName){return function(string){string=toString(string);var strSymbols=hasUnicode(string)?stringToArray(string):undefined;var chr=strSymbols?strSymbols[0]:string.charAt(0);var trailing=strSymbols?castSlice(strSymbols,1).join(""):string.slice(1);return chr[methodName]()+trailing}}function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string).replace(reApos,"")),callback,"")}}function createCtor(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6])}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding}}function createCurry(func,bitmask,arity){var Ctor=createCtor(func);function wrapper(){var length=arguments.length,args=Array(length),index=length,placeholder=getHolder(wrapper);while(index--){args[index]=arguments[index]}var holders=length<3&&args[0]!==placeholder&&args[length-1]!==placeholder?[]:replaceHolders(args,placeholder);length-=holders.length;if(length<arity){return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,undefined,args,holders,undefined,undefined,arity-length)}var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return apply(fn,this,args)}return wrapper}function createFind(findIndexFunc){return function(collection,predicate,fromIndex){var iterable=Object(collection);if(!isArrayLike(collection)){var iteratee=getIteratee(predicate,3);collection=keys(collection);predicate=function(key){return iteratee(iterable[key],key,iterable)}}var index=findIndexFunc(collection,predicate,fromIndex);return index>-1?iterable[iteratee?collection[index]:index]:undefined}}function createFlow(fromRight){return flatRest(function(funcs){var length=funcs.length,index=length,prereq=LodashWrapper.prototype.thru;if(fromRight){funcs.reverse()}while(index--){var func=funcs[index];if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(prereq&&!wrapper&&getFuncName(func)=="wrapper"){var wrapper=new LodashWrapper([],true)}}index=wrapper?index:length;while(++index<length){func=funcs[index];var funcName=getFuncName(func),data=funcName=="wrapper"?getData(func):undefined;if(data&&isLaziable(data[0])&&data[1]==(WRAP_ARY_FLAG|WRAP_CURRY_FLAG|WRAP_PARTIAL_FLAG|WRAP_REARG_FLAG)&&!data[4].length&&data[9]==1){wrapper=wrapper[getFuncName(data[0])].apply(wrapper,data[3])}else{wrapper=func.length==1&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func)}}return function(){var args=arguments,value=args[0];if(wrapper&&args.length==1&&isArray(value)){return wrapper.plant(value).value()}var index=0,result=length?funcs[index].apply(this,args):value;while(++index<length){result=funcs[index].call(this,result)}return result}})}function createHybrid(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=bitmask&WRAP_ARY_FLAG,isBind=bitmask&WRAP_BIND_FLAG,isBindKey=bitmask&WRAP_BIND_KEY_FLAG,isCurried=bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG),isFlip=bitmask&WRAP_FLIP_FLAG,Ctor=isBindKey?undefined:createCtor(func);function wrapper(){var length=arguments.length,args=Array(length),index=length;while(index--){args[index]=arguments[index]}if(isCurried){var placeholder=getHolder(wrapper),holdersCount=countHolders(args,placeholder)}if(partials){args=composeArgs(args,partials,holders,isCurried)}if(partialsRight){args=composeArgsRight(args,partialsRight,holdersRight,isCurried)}length-=holdersCount;if(isCurried&&length<arity){var newHolders=replaceHolders(args,placeholder);return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,thisArg,args,newHolders,argPos,ary,arity-length)}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;length=args.length;if(argPos){args=reorder(args,argPos)}else if(isFlip&&length>1){args.reverse()}if(isAry&&ary<length){args.length=ary}if(this&&this!==root&&this instanceof wrapper){fn=Ctor||createCtor(fn)}return fn.apply(thisBinding,args)}return wrapper}function createInverter(setter,toIteratee){return function(object,iteratee){return baseInverter(object,setter,toIteratee(iteratee),{})}}function createMathOperation(operator,defaultValue){return function(value,other){var result;if(value===undefined&&other===undefined){return defaultValue}if(value!==undefined){result=value}if(other!==undefined){if(result===undefined){return other}if(typeof value=="string"||typeof other=="string"){value=baseToString(value);other=baseToString(other)}else{value=baseToNumber(value);other=baseToNumber(other)}result=operator(value,other)}return result}}function createOver(arrayFunc){return flatRest(function(iteratees){iteratees=arrayMap(iteratees,baseUnary(getIteratee()));return baseRest(function(args){var thisArg=this;return arrayFunc(iteratees,function(iteratee){return apply(iteratee,thisArg,args)})})})}function createPadding(length,chars){chars=chars===undefined?" ":baseToString(chars);var charsLength=chars.length;if(charsLength<2){return charsLength?baseRepeat(chars,length):chars}var result=baseRepeat(chars,nativeCeil(length/stringSize(chars)));return hasUnicode(chars)?castSlice(stringToArray(result),0,length).join(""):result.slice(0,length)}function createPartial(func,bitmask,thisArg,partials){var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);function wrapper(){var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength),fn=this&&this!==root&&this instanceof wrapper?Ctor:func;while(++leftIndex<leftLength){args[leftIndex]=partials[leftIndex]}while(argsLength--){args[leftIndex++]=arguments[++argsIndex]}return apply(fn,isBind?thisArg:this,args)}return wrapper}function createRange(fromRight){return function(start,end,step){if(step&&typeof step!="number"&&isIterateeCall(start,end,step)){end=step=undefined}start=toFinite(start);if(end===undefined){end=start;start=0}else{end=toFinite(end)}step=step===undefined?start<end?1:-1:toFinite(step);return baseRange(start,end,step,fromRight)}}function createRelationalOperation(operator){return function(value,other){if(!(typeof value=="string"&&typeof other=="string")){value=toNumber(value);other=toNumber(other)}return operator(value,other)}}function createRecurry(func,bitmask,wrapFunc,placeholder,thisArg,partials,holders,argPos,ary,arity){var isCurry=bitmask&WRAP_CURRY_FLAG,newHolders=isCurry?holders:undefined,newHoldersRight=isCurry?undefined:holders,newPartials=isCurry?partials:undefined,newPartialsRight=isCurry?undefined:partials;bitmask|=isCurry?WRAP_PARTIAL_FLAG:WRAP_PARTIAL_RIGHT_FLAG;bitmask&=~(isCurry?WRAP_PARTIAL_RIGHT_FLAG:WRAP_PARTIAL_FLAG);if(!(bitmask&WRAP_CURRY_BOUND_FLAG)){bitmask&=~(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG)}var newData=[func,bitmask,thisArg,newPartials,newHolders,newPartialsRight,newHoldersRight,argPos,ary,arity];var result=wrapFunc.apply(undefined,newData);if(isLaziable(func)){setData(result,newData)}result.placeholder=placeholder;return setWrapToString(result,func,bitmask)}function createRound(methodName){var func=Math[methodName];return function(number,precision){number=toNumber(number);precision=precision==null?0:nativeMin(toInteger(precision),292);if(precision&&nativeIsFinite(number)){var pair=(toString(number)+"e").split("e"),value=func(pair[0]+"e"+(+pair[1]+precision));pair=(toString(value)+"e").split("e");return+(pair[0]+"e"+(+pair[1]-precision))}return func(number)}}var createSet=!(Set&&1/setToArray(new Set([,-0]))[1]==INFINITY)?noop:function(values){return new Set(values)};function createToPairs(keysFunc){return function(object){var tag=getTag(object);if(tag==mapTag){return mapToArray(object)}if(tag==setTag){return setToPairs(object)}return baseToPairs(object,keysFunc(object))}}function createWrap(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&WRAP_BIND_KEY_FLAG;if(!isBindKey&&typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var length=partials?partials.length:0;if(!length){bitmask&=~(WRAP_PARTIAL_FLAG|WRAP_PARTIAL_RIGHT_FLAG);partials=holders=undefined}ary=ary===undefined?ary:nativeMax(toInteger(ary),0);arity=arity===undefined?arity:toInteger(arity);length-=holders?holders.length:0;if(bitmask&WRAP_PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=undefined}var data=isBindKey?undefined:getData(func);var newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data){mergeData(newData,data)}func=newData[0];bitmask=newData[1];thisArg=newData[2];partials=newData[3];holders=newData[4];arity=newData[9]=newData[9]===undefined?isBindKey?0:func.length:nativeMax(newData[9]-length,0);if(!arity&&bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG)){bitmask&=~(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG)}if(!bitmask||bitmask==WRAP_BIND_FLAG){var result=createBind(func,bitmask,thisArg)}else if(bitmask==WRAP_CURRY_FLAG||bitmask==WRAP_CURRY_RIGHT_FLAG){result=createCurry(func,bitmask,arity)}else if((bitmask==WRAP_PARTIAL_FLAG||bitmask==(WRAP_BIND_FLAG|WRAP_PARTIAL_FLAG))&&!holders.length){result=createPartial(func,bitmask,thisArg,partials)}else{result=createHybrid.apply(undefined,newData)}var setter=data?baseSetData:setData;return setWrapToString(setter(result,newData),func,bitmask)}function customDefaultsAssignIn(objValue,srcValue,key,object){if(objValue===undefined||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)){return srcValue}return objValue}function customDefaultsMerge(objValue,srcValue,key,object,source,stack){if(isObject(objValue)&&isObject(srcValue)){stack.set(srcValue,objValue);baseMerge(objValue,srcValue,undefined,customDefaultsMerge,stack);stack["delete"](srcValue)}return objValue}function customOmitClone(value){return isPlainObject(value)?undefined:value}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false}var arrStacked=stack.get(array);var othStacked=stack.get(other);if(arrStacked&&othStacked){return arrStacked==other&&othStacked==array}var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack)}if(compared!==undefined){if(compared){continue}result=false;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){return seen.push(othIndex)}})){result=false;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break}}stack["delete"](array);stack["delete"](other);return result}function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false}object=object.buffer;other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false}return true;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false}var stacked=stack.get(object);if(stacked){return stacked==other}bitmask|=COMPARE_UNORDERED_FLAG;stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);stack["delete"](object);return result;case symbolTag:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other)}}return false}function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key))){return false}}var objStacked=stack.get(object);var othStacked=stack.get(other);if(objStacked&&othStacked){return objStacked==other&&othStacked==object}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack)}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break}skipCtor||(skipCtor=key=="constructor")}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&("constructor"in object&&"constructor"in other)&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){result=false}}stack["delete"](object);stack["delete"](other);return result}function flatRest(func){return setToString(overRest(func,undefined,flatten),func+"")}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}var getData=!metaMap?noop:function(func){return metaMap.get(func)};function getFuncName(func){var result=func.name+"",array=realNames[result],length=hasOwnProperty.call(realNames,result)?array.length:0;while(length--){var data=array[length],otherFunc=data.func;if(otherFunc==null||otherFunc==func){return data.name}}return result}function getHolder(func){var object=hasOwnProperty.call(lodash,"placeholder")?lodash:func;return object.placeholder}function getIteratee(){var result=lodash.iteratee||iteratee;result=result===iteratee?baseIteratee:result;return arguments.length?result(arguments[0],arguments[1]):result}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}function getMatchData(object){var result=keys(object),length=result.length;while(length--){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}var getSymbols=!nativeGetSymbols?stubArray:function(object){if(object==null){return[]}object=Object(object);return arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)})};var getSymbolsIn=!nativeGetSymbols?stubArray:function(object){var result=[];while(object){arrayPush(result,getSymbols(object));object=getPrototype(object)}return result};var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag){getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}}return result}}function getView(start,end,transforms){var index=-1,length=transforms.length;while(++index<length){var data=transforms[index],size=data.size;switch(data.type){case"drop":start+=size;break;case"dropRight":end-=size;break;case"take":end=nativeMin(end,start+size);break;case"takeRight":start=nativeMax(start,end-size);break}}return{start:start,end:end}}function getWrapDetails(source){var match=source.match(reWrapDetails);return match?match[1].split(reSplitDetails):[]}function hasPath(object,path,hasFunc){path=castPath(path,object);var index=-1,length=path.length,result=false;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key))){break}object=object[key]}if(result||++index!=length){return result}length=object==null?0:object.length;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}function initCloneArray(array){var length=array.length,result=new array.constructor(length);if(length&&typeof array[0]=="string"&&hasOwnProperty.call(array,"index")){result.index=array.index;result.input=array.input}return result}function initCloneObject(object){return typeof object.constructor=="function"&&!isPrototype(object)?baseCreate(getPrototype(object)):{}}function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return new Ctor;case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return new Ctor;case symbolTag:return cloneSymbol(object)}}function insertWrapDetails(source,details){var length=details.length;if(!length){return source}var lastIndex=length-1;details[lastIndex]=(length>1?"& ":"")+details[lastIndex];details=details.join(length>2?", ":" ");return source.replace(reWrapComment,"{\n/* [wrapped with "+details+"] */\n")}function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}function isIndex(value,length){var type=typeof value;length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(type=="number"||type!="symbol"&&reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index;if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){return eq(object[index],value)}return false}function isKey(value,object){if(isArray(value)){return false}var type=typeof value;if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}function isLaziable(func){var funcName=getFuncName(func),other=lodash[funcName];if(typeof other!="function"||!(funcName in LazyWrapper.prototype)){return false}if(func===other){return true}var data=getData(other);return!!data&&func===data[0]}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}var isMaskable=coreJsData?isFunction:stubFalse;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}function isStrictComparable(value){return value===value&&!isObject(value)}function matchesStrictComparable(key,srcValue){return function(object){if(object==null){return false}return object[key]===srcValue&&(srcValue!==undefined||key in Object(object))}}function memoizeCapped(func){var result=memoize(func,function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear()}return key});var cache=result.cache;return result}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG|WRAP_ARY_FLAG);var isCombo=srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_CURRY_FLAG||srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(WRAP_ARY_FLAG|WRAP_REARG_FLAG)&&source[7].length<=source[8]&&bitmask==WRAP_CURRY_FLAG;if(!(isCommon||isCombo)){return data}if(srcBitmask&WRAP_BIND_FLAG){data[2]=source[2];newBitmask|=bitmask&WRAP_BIND_FLAG?0:WRAP_CURRY_BOUND_FLAG}var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):value;data[4]=partials?replaceHolders(data[3],PLACEHOLDER):source[4]}value=source[5];if(value){partials=data[5];data[5]=partials?composeArgsRight(partials,value,source[6]):value;data[6]=partials?replaceHolders(data[5],PLACEHOLDER):source[6]}value=source[7];if(value){data[7]=value}if(srcBitmask&WRAP_ARY_FLAG){data[8]=data[8]==null?source[8]:nativeMin(data[8],source[8])}if(data[9]==null){data[9]=source[9]}data[0]=source[0];data[1]=newBitmask;return data}function nativeKeysIn(object){var result=[];if(object!=null){for(var key in Object(object)){result.push(key)}}return result}function objectToString(value){return nativeObjectToString.call(value)}function overRest(func,start,transform){start=nativeMax(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index]}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=transform(array);return apply(func,this,otherArgs)}}function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1))}function reorder(array,indexes){var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array);while(length--){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined}return array}function safeGet(object,key){if(key==="constructor"&&typeof object[key]==="function"){return}if(key=="__proto__"){return}return object[key]}var setData=shortOut(baseSetData);var setTimeout=ctxSetTimeout||function(func,wait){return root.setTimeout(func,wait)};var setToString=shortOut(baseSetToString);function setWrapToString(wrapper,reference,bitmask){var source=reference+"";return setToString(wrapper,insertWrapDetails(source,updateWrapDetails(getWrapDetails(source),bitmask)))}function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return arguments[0]}}else{count=0}return func.apply(undefined,arguments)}}function shuffleSelf(array,size){var index=-1,length=array.length,lastIndex=length-1;size=size===undefined?length:size;while(++index<size){var rand=baseRandom(index,lastIndex),value=array[rand];array[rand]=array[index];array[index]=value}array.length=size;return array}var stringToPath=memoizeCapped(function(string){var result=[];if(string.charCodeAt(0)===46){result.push("")}string.replace(rePropName,function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)});return result});function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function updateWrapDetails(details,bitmask){arrayEach(wrapFlags,function(pair){var value="_."+pair[0];if(bitmask&pair[1]&&!arrayIncludes(details,value)){details.push(value)}});return details.sort()}function wrapperClone(wrapper){if(wrapper instanceof LazyWrapper){return wrapper.clone()}var result=new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__);result.__actions__=copyArray(wrapper.__actions__);result.__index__=wrapper.__index__;result.__values__=wrapper.__values__;return result}function chunk(array,size,guard){if(guard?isIterateeCall(array,size,guard):size===undefined){size=1}else{size=nativeMax(toInteger(size),0)}var length=array==null?0:array.length;if(!length||size<1){return[]}var index=0,resIndex=0,result=Array(nativeCeil(length/size));while(index<length){result[resIndex++]=baseSlice(array,index,index+=size)}return result}function compact(array){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(value){result[resIndex++]=value}}return result}function concat(){var length=arguments.length;if(!length){return[]}var args=Array(length-1),array=arguments[0],index=length;while(index--){args[index-1]=arguments[index]}return arrayPush(isArray(array)?copyArray(array):[array],baseFlatten(args,1))}var difference=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,true)):[]});var differenceBy=baseRest(function(array,values){var iteratee=last(values);if(isArrayLikeObject(iteratee)){iteratee=undefined}return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,true),getIteratee(iteratee,2)):[]});var differenceWith=baseRest(function(array,values){var comparator=last(values);if(isArrayLikeObject(comparator)){comparator=undefined}return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,true),undefined,comparator):[]});function drop(array,n,guard){var length=array==null?0:array.length;if(!length){return[]}n=guard||n===undefined?1:toInteger(n);return baseSlice(array,n<0?0:n,length)}function dropRight(array,n,guard){var length=array==null?0:array.length;if(!length){return[]}n=guard||n===undefined?1:toInteger(n);n=length-n;return baseSlice(array,0,n<0?0:n)}function dropRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),true,true):[]}function dropWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),true):[]}function fill(array,value,start,end){var length=array==null?0:array.length;if(!length){return[]}if(start&&typeof start!="number"&&isIterateeCall(array,value,start)){start=0;end=length}return baseFill(array,value,start,end)}function findIndex(array,predicate,fromIndex){var length=array==null?0:array.length;if(!length){return-1}var index=fromIndex==null?0:toInteger(fromIndex);if(index<0){index=nativeMax(length+index,0)}return baseFindIndex(array,getIteratee(predicate,3),index)}function findLastIndex(array,predicate,fromIndex){var length=array==null?0:array.length;if(!length){return-1}var index=length-1;if(fromIndex!==undefined){index=toInteger(fromIndex);index=fromIndex<0?nativeMax(length+index,0):nativeMin(index,length-1)}return baseFindIndex(array,getIteratee(predicate,3),index,true)}function flatten(array){var length=array==null?0:array.length;return length?baseFlatten(array,1):[]}function flattenDeep(array){var length=array==null?0:array.length;return length?baseFlatten(array,INFINITY):[]}function flattenDepth(array,depth){var length=array==null?0:array.length;if(!length){return[]}depth=depth===undefined?1:toInteger(depth);return baseFlatten(array,depth)}function fromPairs(pairs){var index=-1,length=pairs==null?0:pairs.length,result={};while(++index<length){var pair=pairs[index];result[pair[0]]=pair[1]}return result}function head(array){return array&&array.length?array[0]:undefined}function indexOf(array,value,fromIndex){var length=array==null?0:array.length;if(!length){return-1}var index=fromIndex==null?0:toInteger(fromIndex);if(index<0){index=nativeMax(length+index,0)}return baseIndexOf(array,value,index)}function initial(array){var length=array==null?0:array.length;return length?baseSlice(array,0,-1):[]}var intersection=baseRest(function(arrays){var mapped=arrayMap(arrays,castArrayLikeObject);return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped):[]});var intersectionBy=baseRest(function(arrays){var iteratee=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);if(iteratee===last(mapped)){iteratee=undefined}else{mapped.pop()}return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,getIteratee(iteratee,2)):[]});var intersectionWith=baseRest(function(arrays){var comparator=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);comparator=typeof comparator=="function"?comparator:undefined;if(comparator){mapped.pop()}return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,undefined,comparator):[]});function join(array,separator){return array==null?"":nativeJoin.call(array,separator)}function last(array){var length=array==null?0:array.length;return length?array[length-1]:undefined}function lastIndexOf(array,value,fromIndex){var length=array==null?0:array.length;if(!length){return-1}var index=length;if(fromIndex!==undefined){index=toInteger(fromIndex);index=index<0?nativeMax(length+index,0):nativeMin(index,length-1)}return value===value?strictLastIndexOf(array,value,index):baseFindIndex(array,baseIsNaN,index,true)}function nth(array,n){return array&&array.length?baseNth(array,toInteger(n)):undefined}var pull=baseRest(pullAll);function pullAll(array,values){return array&&array.length&&values&&values.length?basePullAll(array,values):array}function pullAllBy(array,values,iteratee){return array&&array.length&&values&&values.length?basePullAll(array,values,getIteratee(iteratee,2)):array}function pullAllWith(array,values,comparator){return array&&array.length&&values&&values.length?basePullAll(array,values,undefined,comparator):array}var pullAt=flatRest(function(array,indexes){var length=array==null?0:array.length,result=baseAt(array,indexes);basePullAt(array,arrayMap(indexes,function(index){return isIndex(index,length)?+index:index}).sort(compareAscending));return result});function remove(array,predicate){var result=[];if(!(array&&array.length)){return result}var index=-1,indexes=[],length=array.length;predicate=getIteratee(predicate,3);while(++index<length){var value=array[index];if(predicate(value,index,array)){result.push(value);indexes.push(index)}}basePullAt(array,indexes);return result}function reverse(array){return array==null?array:nativeReverse.call(array)}function slice(array,start,end){var length=array==null?0:array.length;if(!length){return[]}if(end&&typeof end!="number"&&isIterateeCall(array,start,end)){start=0;end=length}else{start=start==null?0:toInteger(start);end=end===undefined?length:toInteger(end)}return baseSlice(array,start,end)}function sortedIndex(array,value){return baseSortedIndex(array,value)}function sortedIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2))}function sortedIndexOf(array,value){var length=array==null?0:array.length;if(length){var index=baseSortedIndex(array,value);if(index<length&&eq(array[index],value)){return index}}return-1}function sortedLastIndex(array,value){return baseSortedIndex(array,value,true)}function sortedLastIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2),true)}function sortedLastIndexOf(array,value){var length=array==null?0:array.length;if(length){var index=baseSortedIndex(array,value,true)-1;if(eq(array[index],value)){return index}}return-1}function sortedUniq(array){return array&&array.length?baseSortedUniq(array):[]}function sortedUniqBy(array,iteratee){return array&&array.length?baseSortedUniq(array,getIteratee(iteratee,2)):[]}function tail(array){var length=array==null?0:array.length;return length?baseSlice(array,1,length):[]}function take(array,n,guard){if(!(array&&array.length)){return[]}n=guard||n===undefined?1:toInteger(n);return baseSlice(array,0,n<0?0:n)}function takeRight(array,n,guard){var length=array==null?0:array.length;if(!length){return[]}n=guard||n===undefined?1:toInteger(n);n=length-n;return baseSlice(array,n<0?0:n,length)}function takeRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),false,true):[]}function takeWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3)):[]}var union=baseRest(function(arrays){return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,true))});var unionBy=baseRest(function(arrays){var iteratee=last(arrays);if(isArrayLikeObject(iteratee)){iteratee=undefined}return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,true),getIteratee(iteratee,2))});var unionWith=baseRest(function(arrays){var comparator=last(arrays);comparator=typeof comparator=="function"?comparator:undefined;return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,true),undefined,comparator)});function uniq(array){return array&&array.length?baseUniq(array):[]}function uniqBy(array,iteratee){return array&&array.length?baseUniq(array,getIteratee(iteratee,2)):[]}function uniqWith(array,comparator){comparator=typeof comparator=="function"?comparator:undefined;return array&&array.length?baseUniq(array,undefined,comparator):[]}function unzip(array){if(!(array&&array.length)){return[]}var length=0;array=arrayFilter(array,function(group){if(isArrayLikeObject(group)){length=nativeMax(group.length,length);return true}});return baseTimes(length,function(index){return arrayMap(array,baseProperty(index))})}function unzipWith(array,iteratee){if(!(array&&array.length)){return[]}var result=unzip(array);if(iteratee==null){return result}return arrayMap(result,function(group){return apply(iteratee,undefined,group)})}var without=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,values):[]});var xor=baseRest(function(arrays){return baseXor(arrayFilter(arrays,isArrayLikeObject))});var xorBy=baseRest(function(arrays){var iteratee=last(arrays);if(isArrayLikeObject(iteratee)){iteratee=undefined}return baseXor(arrayFilter(arrays,isArrayLikeObject),getIteratee(iteratee,2))});var xorWith=baseRest(function(arrays){var comparator=last(arrays);comparator=typeof comparator=="function"?comparator:undefined;return baseXor(arrayFilter(arrays,isArrayLikeObject),undefined,comparator)});var zip=baseRest(unzip);function zipObject(props,values){return baseZipObject(props||[],values||[],assignValue)}function zipObjectDeep(props,values){return baseZipObject(props||[],values||[],baseSet)}var zipWith=baseRest(function(arrays){var length=arrays.length,iteratee=length>1?arrays[length-1]:undefined;iteratee=typeof iteratee=="function"?(arrays.pop(),iteratee):undefined;return unzipWith(arrays,iteratee)});function chain(value){var result=lodash(value);result.__chain__=true;return result}function tap(value,interceptor){interceptor(value);return value}function thru(value,interceptor){return interceptor(value)}var wrapperAt=flatRest(function(paths){var length=paths.length,start=length?paths[0]:0,value=this.__wrapped__,interceptor=function(object){return baseAt(object,paths)};if(length>1||this.__actions__.length||!(value instanceof LazyWrapper)||!isIndex(start)){return this.thru(interceptor)}value=value.slice(start,+start+(length?1:0));value.__actions__.push({func:thru,args:[interceptor],thisArg:undefined});return new LodashWrapper(value,this.__chain__).thru(function(array){if(length&&!array.length){array.push(undefined)}return array})});function wrapperChain(){return chain(this)}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)}function wrapperNext(){if(this.__values__===undefined){this.__values__=toArray(this.value())}var done=this.__index__>=this.__values__.length,value=done?undefined:this.__values__[this.__index__++];return{done:done,value:value}}function wrapperToIterator(){return this}function wrapperPlant(value){var result,parent=this;while(parent instanceof baseLodash){var clone=wrapperClone(parent);clone.__index__=0;clone.__values__=undefined;if(result){previous.__wrapped__=clone}else{result=clone}var previous=clone;parent=parent.__wrapped__}previous.__wrapped__=value;return result}function wrapperReverse(){var value=this.__wrapped__;if(value instanceof LazyWrapper){var wrapped=value;if(this.__actions__.length){wrapped=new LazyWrapper(this)}wrapped=wrapped.reverse();wrapped.__actions__.push({func:thru,args:[reverse],thisArg:undefined});return new LodashWrapper(wrapped,this.__chain__)}return this.thru(reverse)}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}var countBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){++result[key]}else{baseAssignValue(result,key,1)}});function every(collection,predicate,guard){var func=isArray(collection)?arrayEvery:baseEvery;if(guard&&isIterateeCall(collection,predicate,guard)){predicate=undefined}return func(collection,getIteratee(predicate,3))}function filter(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,getIteratee(predicate,3))}var find=createFind(findIndex);var findLast=createFind(findLastIndex);function flatMap(collection,iteratee){return baseFlatten(map(collection,iteratee),1)}function flatMapDeep(collection,iteratee){return baseFlatten(map(collection,iteratee),INFINITY)}function flatMapDepth(collection,iteratee,depth){depth=depth===undefined?1:toInteger(depth);return baseFlatten(map(collection,iteratee),depth)}function forEach(collection,iteratee){var func=isArray(collection)?arrayEach:baseEach;return func(collection,getIteratee(iteratee,3))}function forEachRight(collection,iteratee){var func=isArray(collection)?arrayEachRight:baseEachRight;return func(collection,getIteratee(iteratee,3))}var groupBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){result[key].push(value)}else{baseAssignValue(result,key,[value])}});function includes(collection,value,fromIndex,guard){collection=isArrayLike(collection)?collection:values(collection);fromIndex=fromIndex&&!guard?toInteger(fromIndex):0;var length=collection.length;if(fromIndex<0){fromIndex=nativeMax(length+fromIndex,0)}return isString(collection)?fromIndex<=length&&collection.indexOf(value,fromIndex)>-1:!!length&&baseIndexOf(collection,value,fromIndex)>-1}var invokeMap=baseRest(function(collection,path,args){var index=-1,isFunc=typeof path=="function",result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value){result[++index]=isFunc?apply(path,value,args):baseInvoke(value,path,args)});return result});var keyBy=createAggregator(function(result,value,key){baseAssignValue(result,key,value)});function map(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;return func(collection,getIteratee(iteratee,3))}function orderBy(collection,iteratees,orders,guard){if(collection==null){return[]}if(!isArray(iteratees)){iteratees=iteratees==null?[]:[iteratees]}orders=guard?undefined:orders;if(!isArray(orders)){orders=orders==null?[]:[orders]}return baseOrderBy(collection,iteratees,orders)}var partition=createAggregator(function(result,value,key){result[key?0:1].push(value)},function(){return[[],[]]});function reduce(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEach)}function reduceRight(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduceRight:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEachRight)}function reject(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,negate(getIteratee(predicate,3)))}function sample(collection){var func=isArray(collection)?arraySample:baseSample;return func(collection)}function sampleSize(collection,n,guard){if(guard?isIterateeCall(collection,n,guard):n===undefined){n=1}else{n=toInteger(n)}var func=isArray(collection)?arraySampleSize:baseSampleSize;return func(collection,n)}function shuffle(collection){var func=isArray(collection)?arrayShuffle:baseShuffle;return func(collection)}function size(collection){if(collection==null){return 0}if(isArrayLike(collection)){return isString(collection)?stringSize(collection):collection.length}var tag=getTag(collection);if(tag==mapTag||tag==setTag){return collection.size}return baseKeys(collection).length}function some(collection,predicate,guard){var func=isArray(collection)?arraySome:baseSome;if(guard&&isIterateeCall(collection,predicate,guard)){predicate=undefined}return func(collection,getIteratee(predicate,3))}var sortBy=baseRest(function(collection,iteratees){if(collection==null){return[]}var length=iteratees.length;if(length>1&&isIterateeCall(collection,iteratees[0],iteratees[1])){iteratees=[]}else if(length>2&&isIterateeCall(iteratees[0],iteratees[1],iteratees[2])){iteratees=[iteratees[0]]}return baseOrderBy(collection,baseFlatten(iteratees,1),[])});var now=ctxNow||function(){return root.Date.now()};function after(n,func){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}n=toInteger(n);return function(){if(--n<1){return func.apply(this,arguments)}}}function ary(func,n,guard){n=guard?undefined:n;n=func&&n==null?func.length:n;return createWrap(func,WRAP_ARY_FLAG,undefined,undefined,undefined,undefined,n)}function before(n,func){var result;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}n=toInteger(n);return function(){if(--n>0){result=func.apply(this,arguments)}if(n<=1){func=undefined}return result}}var bind=baseRest(function(func,thisArg,partials){var bitmask=WRAP_BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bind));bitmask|=WRAP_PARTIAL_FLAG}return createWrap(func,bitmask,thisArg,partials,holders)});var bindKey=baseRest(function(object,key,partials){var bitmask=WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bindKey));bitmask|=WRAP_PARTIAL_FLAG}return createWrap(key,bitmask,object,partials,holders)});function curry(func,arity,guard){arity=guard?undefined:arity;var result=createWrap(func,WRAP_CURRY_FLAG,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder=curry.placeholder;return result}function curryRight(func,arity,guard){arity=guard?undefined:arity;var result=createWrap(func,WRAP_CURRY_RIGHT_FLAG,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder=curryRight.placeholder;return result}function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=false,maxing=false,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}wait=toNumber(wait)||0;if(isObject(options)){leading=!!options.leading;maxing="maxWait"in options;maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait;trailing="trailing"in options?!!options.trailing:trailing}function invokeFunc(time){var args=lastArgs,thisArg=lastThis;lastArgs=lastThis=undefined;lastInvokeTime=time;result=func.apply(thisArg,args);return result}function leadingEdge(time){lastInvokeTime=time;timerId=setTimeout(timerExpired,wait);return leading?invokeFunc(time):result}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,timeWaiting=wait-timeSinceLastCall;return maxing?nativeMin(timeWaiting,maxWait-timeSinceLastInvoke):timeWaiting}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return lastCallTime===undefined||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time)){return trailingEdge(time)}timerId=setTimeout(timerExpired,remainingWait(time))}function trailingEdge(time){timerId=undefined;if(trailing&&lastArgs){return invokeFunc(time)}lastArgs=lastThis=undefined;return result}function cancel(){if(timerId!==undefined){clearTimeout(timerId)}lastInvokeTime=0;lastArgs=lastCallTime=lastThis=timerId=undefined}function flush(){return timerId===undefined?result:trailingEdge(now())}function debounced(){var time=now(),isInvoking=shouldInvoke(time);lastArgs=arguments;lastThis=this;lastCallTime=time;if(isInvoking){if(timerId===undefined){return leadingEdge(lastCallTime)}if(maxing){clearTimeout(timerId);timerId=setTimeout(timerExpired,wait);return invokeFunc(lastCallTime)}}if(timerId===undefined){timerId=setTimeout(timerExpired,wait)}return result}debounced.cancel=cancel;debounced.flush=flush;return debounced}var defer=baseRest(function(func,args){return baseDelay(func,1,args)});var delay=baseRest(function(func,wait,args){return baseDelay(func,toNumber(wait)||0,args)});function flip(func){return createWrap(func,WRAP_FLIP_FLAG)}function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;function negate(predicate){if(typeof predicate!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return function(){var args=arguments;switch(args.length){case 0:return!predicate.call(this);case 1:return!predicate.call(this,args[0]);case 2:return!predicate.call(this,args[0],args[1]);case 3:return!predicate.call(this,args[0],args[1],args[2])}return!predicate.apply(this,args)}}function once(func){return before(2,func)}var overArgs=castRest(function(func,transforms){transforms=transforms.length==1&&isArray(transforms[0])?arrayMap(transforms[0],baseUnary(getIteratee())):arrayMap(baseFlatten(transforms,1),baseUnary(getIteratee()));var funcsLength=transforms.length;return baseRest(function(args){var index=-1,length=nativeMin(args.length,funcsLength);while(++index<length){args[index]=transforms[index].call(this,args[index])}return apply(func,this,args)})});var partial=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partial));return createWrap(func,WRAP_PARTIAL_FLAG,undefined,partials,holders)});var partialRight=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partialRight));return createWrap(func,WRAP_PARTIAL_RIGHT_FLAG,undefined,partials,holders)});var rearg=flatRest(function(func,indexes){return createWrap(func,WRAP_REARG_FLAG,undefined,undefined,undefined,indexes)});function rest(func,start){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}start=start===undefined?start:toInteger(start);return baseRest(func,start)}function spread(func,start){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}start=start==null?0:nativeMax(toInteger(start),0);return baseRest(function(args){var array=args[start],otherArgs=castSlice(args,0,start);if(array){arrayPush(otherArgs,array)}return apply(func,this,otherArgs)})}function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(isObject(options)){leading="leading"in options?!!options.leading:leading;trailing="trailing"in options?!!options.trailing:trailing}return debounce(func,wait,{leading:leading,maxWait:wait,trailing:trailing})}function unary(func){return ary(func,1)}function wrap(value,wrapper){return partial(castFunction(wrapper),value)}function castArray(){if(!arguments.length){return[]}var value=arguments[0];return isArray(value)?value:[value]}function clone(value){return baseClone(value,CLONE_SYMBOLS_FLAG)}function cloneWith(value,customizer){customizer=typeof customizer=="function"?customizer:undefined;return baseClone(value,CLONE_SYMBOLS_FLAG,customizer)}function cloneDeep(value){return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}function cloneDeepWith(value,customizer){customizer=typeof customizer=="function"?customizer:undefined;return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG,customizer)}function conformsTo(object,source){return source==null||baseConformsTo(object,source,keys(source))}function eq(value,other){return value===other||value!==value&&other!==other}var gt=createRelationalOperation(baseGt);var gte=createRelationalOperation(function(value,other){return value>=other});var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};var isArray=Array.isArray;var isArrayBuffer=nodeIsArrayBuffer?baseUnary(nodeIsArrayBuffer):baseIsArrayBuffer;function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isBoolean(value){return value===true||value===false||isObjectLike(value)&&baseGetTag(value)==boolTag}var isBuffer=nativeIsBuffer||stubFalse;var isDate=nodeIsDate?baseUnary(nodeIsDate):baseIsDate;function isElement(value){return isObjectLike(value)&&value.nodeType===1&&!isPlainObject(value)}function isEmpty(value){if(value==null){return true}if(isArrayLike(value)&&(isArray(value)||typeof value=="string"||typeof value.splice=="function"||isBuffer(value)||isTypedArray(value)||isArguments(value))){return!value.length}var tag=getTag(value);if(tag==mapTag||tag==setTag){return!value.size}if(isPrototype(value)){return!baseKeys(value).length}for(var key in value){if(hasOwnProperty.call(value,key)){return false}}return true}function isEqual(value,other){return baseIsEqual(value,other)}function isEqualWith(value,other,customizer){customizer=typeof customizer=="function"?customizer:undefined;var result=customizer?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,undefined,customizer):!!result}function isError(value){if(!isObjectLike(value)){return false}var tag=baseGetTag(value);return tag==errorTag||tag==domExcTag||typeof value.message=="string"&&typeof value.name=="string"&&!isPlainObject(value)}function isFinite(value){return typeof value=="number"&&nativeIsFinite(value)}function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}function isInteger(value){return typeof value=="number"&&value==toInteger(value)}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}function isObjectLike(value){return value!=null&&typeof value=="object"}var isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;function isMatch(object,source){return object===source||baseIsMatch(object,source,getMatchData(source))}function isMatchWith(object,source,customizer){customizer=typeof customizer=="function"?customizer:undefined;return baseIsMatch(object,source,getMatchData(source),customizer)}function isNaN(value){return isNumber(value)&&value!=+value}function isNative(value){if(isMaskable(value)){throw new Error(CORE_ERROR_TEXT)}return baseIsNative(value)}function isNull(value){return value===null}function isNil(value){return value==null}function isNumber(value){return typeof value=="number"||isObjectLike(value)&&baseGetTag(value)==numberTag}function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag){return false}var proto=getPrototype(value);if(proto===null){return true}var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return typeof Ctor=="function"&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}var isRegExp=nodeIsRegExp?baseUnary(nodeIsRegExp):baseIsRegExp;function isSafeInteger(value){return isInteger(value)&&value>=-MAX_SAFE_INTEGER&&value<=MAX_SAFE_INTEGER}var isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;function isString(value){return typeof value=="string"||!isArray(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag}function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function isUndefined(value){return value===undefined}function isWeakMap(value){return isObjectLike(value)&&getTag(value)==weakMapTag}function isWeakSet(value){return isObjectLike(value)&&baseGetTag(value)==weakSetTag}var lt=createRelationalOperation(baseLt);var lte=createRelationalOperation(function(value,other){return value<=other});function toArray(value){if(!value){return[]}if(isArrayLike(value)){return isString(value)?stringToArray(value):copyArray(value)}if(symIterator&&value[symIterator]){return iteratorToArray(value[symIterator]())}var tag=getTag(value),func=tag==mapTag?mapToArray:tag==setTag?setToArray:values;return func(value)}function toFinite(value){if(!value){return value===0?value:0}value=toNumber(value);if(value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER}return value===value?value:0}function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0}function toLength(value){return value?baseClamp(toInteger(value),0,MAX_ARRAY_LENGTH):0}function toNumber(value){if(typeof value=="number"){return value}if(isSymbol(value)){return NAN}if(isObject(value)){var other=typeof value.valueOf=="function"?value.valueOf():value;value=isObject(other)?other+"":other}if(typeof value!="string"){return value===0?value:+value}value=baseTrim(value);var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}function toPlainObject(value){return copyObject(value,keysIn(value))}function toSafeInteger(value){return value?baseClamp(toInteger(value),-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER):value===0?value:0}function toString(value){return value==null?"":baseToString(value)}var assign=createAssigner(function(object,source){if(isPrototype(source)||isArrayLike(source)){copyObject(source,keys(source),object);return}for(var key in source){if(hasOwnProperty.call(source,key)){assignValue(object,key,source[key])}}});var assignIn=createAssigner(function(object,source){copyObject(source,keysIn(source),object)});var assignInWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keysIn(source),object,customizer)});var assignWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keys(source),object,customizer)});var at=flatRest(baseAt);function create(prototype,properties){var result=baseCreate(prototype);return properties==null?result:baseAssign(result,properties)}var defaults=baseRest(function(object,sources){object=Object(object);var index=-1;var length=sources.length;var guard=length>2?sources[2]:undefined;if(guard&&isIterateeCall(sources[0],sources[1],guard)){length=1}while(++index<length){var source=sources[index];var props=keysIn(source);var propsIndex=-1;var propsLength=props.length;while(++propsIndex<propsLength){var key=props[propsIndex];var value=object[key];if(value===undefined||eq(value,objectProto[key])&&!hasOwnProperty.call(object,key)){object[key]=source[key]}}}return object});var defaultsDeep=baseRest(function(args){args.push(undefined,customDefaultsMerge);return apply(mergeWith,undefined,args)});function findKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwn)}function findLastKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwnRight)}function forIn(object,iteratee){return object==null?object:baseFor(object,getIteratee(iteratee,3),keysIn)}function forInRight(object,iteratee){return object==null?object:baseForRight(object,getIteratee(iteratee,3),keysIn)}function forOwn(object,iteratee){return object&&baseForOwn(object,getIteratee(iteratee,3))}function forOwnRight(object,iteratee){return object&&baseForOwnRight(object,getIteratee(iteratee,3))}function functions(object){return object==null?[]:baseFunctions(object,keys(object))}function functionsIn(object){return object==null?[]:baseFunctions(object,keysIn(object))}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result}function has(object,path){return object!=null&&hasPath(object,path,baseHas)}function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn)}var invert=createInverter(function(result,value,key){if(value!=null&&typeof value.toString!="function"){value=nativeObjectToString.call(value)}result[value]=key},constant(identity));var invertBy=createInverter(function(result,value,key){if(value!=null&&typeof value.toString!="function"){value=nativeObjectToString.call(value)}if(hasOwnProperty.call(result,value)){result[value].push(key)}else{result[value]=[key]}},getIteratee);var invoke=baseRest(baseInvoke);function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,true):baseKeysIn(object)}function mapKeys(object,iteratee){var result={};iteratee=getIteratee(iteratee,3);baseForOwn(object,function(value,key,object){baseAssignValue(result,iteratee(value,key,object),value)});return result}function mapValues(object,iteratee){var result={};iteratee=getIteratee(iteratee,3);baseForOwn(object,function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object))});return result}var merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex)});var mergeWith=createAssigner(function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer)});var omit=flatRest(function(object,paths){var result={};if(object==null){return result}var isDeep=false;paths=arrayMap(paths,function(path){path=castPath(path,object);isDeep||(isDeep=path.length>1);return path});copyObject(object,getAllKeysIn(object),result);if(isDeep){result=baseClone(result,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone)}var length=paths.length;while(length--){baseUnset(result,paths[length])}return result});function omitBy(object,predicate){return pickBy(object,negate(getIteratee(predicate)))}var pick=flatRest(function(object,paths){return object==null?{}:basePick(object,paths)});function pickBy(object,predicate){if(object==null){return{}}var props=arrayMap(getAllKeysIn(object),function(prop){return[prop]});predicate=getIteratee(predicate);return basePickBy(object,props,function(value,path){return predicate(value,path[0])})}function result(object,path,defaultValue){path=castPath(path,object);var index=-1,length=path.length;if(!length){length=1;object=undefined}while(++index<length){var value=object==null?undefined:object[toKey(path[index])];if(value===undefined){index=length;value=defaultValue}object=isFunction(value)?value.call(object):value}return object}function set(object,path,value){return object==null?object:baseSet(object,path,value)}function setWith(object,path,value,customizer){customizer=typeof customizer=="function"?customizer:undefined;return object==null?object:baseSet(object,path,value,customizer)}var toPairs=createToPairs(keys);var toPairsIn=createToPairs(keysIn);function transform(object,iteratee,accumulator){var isArr=isArray(object),isArrLike=isArr||isBuffer(object)||isTypedArray(object);iteratee=getIteratee(iteratee,4);if(accumulator==null){var Ctor=object&&object.constructor;if(isArrLike){accumulator=isArr?new Ctor:[]}else if(isObject(object)){accumulator=isFunction(Ctor)?baseCreate(getPrototype(object)):{}}else{accumulator={}}}(isArrLike?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object)});return accumulator}function unset(object,path){return object==null?true:baseUnset(object,path)}function update(object,path,updater){return object==null?object:baseUpdate(object,path,castFunction(updater))}function updateWith(object,path,updater,customizer){customizer=typeof customizer=="function"?customizer:undefined;return object==null?object:baseUpdate(object,path,castFunction(updater),customizer)}function values(object){return object==null?[]:baseValues(object,keys(object))}function valuesIn(object){return object==null?[]:baseValues(object,keysIn(object))}function clamp(number,lower,upper){if(upper===undefined){upper=lower;lower=undefined}if(upper!==undefined){upper=toNumber(upper);upper=upper===upper?upper:0}if(lower!==undefined){lower=toNumber(lower);lower=lower===lower?lower:0}return baseClamp(toNumber(number),lower,upper)}function inRange(number,start,end){start=toFinite(start);if(end===undefined){end=start;start=0}else{end=toFinite(end)}number=toNumber(number);return baseInRange(number,start,end)}function random(lower,upper,floating){if(floating&&typeof floating!="boolean"&&isIterateeCall(lower,upper,floating)){upper=floating=undefined}if(floating===undefined){if(typeof upper=="boolean"){floating=upper;upper=undefined}else if(typeof lower=="boolean"){floating=lower;lower=undefined}}if(lower===undefined&&upper===undefined){lower=0;upper=1}else{lower=toFinite(lower);if(upper===undefined){upper=lower;lower=0}else{upper=toFinite(upper)}}if(lower>upper){var temp=lower;lower=upper;upper=temp}if(floating||lower%1||upper%1){var rand=nativeRandom();return nativeMin(lower+rand*(upper-lower+freeParseFloat("1e-"+((rand+"").length-1))),upper)}return baseRandom(lower,upper)}var camelCase=createCompounder(function(result,word,index){word=word.toLowerCase();return result+(index?capitalize(word):word)});function capitalize(string){return upperFirst(toString(string).toLowerCase())}function deburr(string){string=toString(string);return string&&string.replace(reLatin,deburrLetter).replace(reComboMark,"")}function endsWith(string,target,position){string=toString(string);target=baseToString(target);var length=string.length;position=position===undefined?length:baseClamp(toInteger(position),0,length);var end=position;position-=target.length;return position>=0&&string.slice(position,end)==target}function escape(string){string=toString(string);return string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string}function escapeRegExp(string){string=toString(string);return string&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,"\\$&"):string}var kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase()});var lowerCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toLowerCase()});var lowerFirst=createCaseFirst("toLowerCase");function pad(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;if(!length||strLength>=length){return string}var mid=(length-strLength)/2;return createPadding(nativeFloor(mid),chars)+string+createPadding(nativeCeil(mid),chars)}function padEnd(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?string+createPadding(length-strLength,chars):string}function padStart(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?createPadding(length-strLength,chars)+string:string}function parseInt(string,radix,guard){if(guard||radix==null){radix=0}else if(radix){radix=+radix}return nativeParseInt(toString(string).replace(reTrimStart,""),radix||0)}function repeat(string,n,guard){if(guard?isIterateeCall(string,n,guard):n===undefined){n=1}else{n=toInteger(n)}return baseRepeat(toString(string),n)}function replace(){var args=arguments,string=toString(args[0]);return args.length<3?string:string.replace(args[1],args[2])}var snakeCase=createCompounder(function(result,word,index){return result+(index?"_":"")+word.toLowerCase()});function split(string,separator,limit){if(limit&&typeof limit!="number"&&isIterateeCall(string,separator,limit)){separator=limit=undefined}limit=limit===undefined?MAX_ARRAY_LENGTH:limit>>>0;if(!limit){return[]}string=toString(string);if(string&&(typeof separator=="string"||separator!=null&&!isRegExp(separator))){separator=baseToString(separator);if(!separator&&hasUnicode(string)){return castSlice(stringToArray(string),0,limit)}}return string.split(separator,limit)}var startCase=createCompounder(function(result,word,index){return result+(index?" ":"")+upperFirst(word)});function startsWith(string,target,position){string=toString(string);position=position==null?0:baseClamp(toInteger(position),0,string.length);target=baseToString(target);return string.slice(position,position+target.length)==target}function template(string,options,guard){var settings=lodash.templateSettings;if(guard&&isIterateeCall(string,options,guard)){options=undefined}string=toString(string);options=assignInWith({},options,settings,customDefaultsAssignIn);var imports=assignInWith({},options.imports,settings.imports,customDefaultsAssignIn),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys);var isEscaping,isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");var sourceURL="//# sourceURL="+(hasOwnProperty.call(options,"sourceURL")?(options.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++templateCounter+"]")+"\n";string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){isEscaping=true;source+="' +\n__e("+escapeValue+") +\n'"}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p += '"}if(interpolateValue){source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"}index=offset+match.length;return match});source+="';\n";var variable=hasOwnProperty.call(options,"variable")&&options.variable;if(!variable){source="with (obj) {\n"+source+"\n}\n"}else if(reForbiddenIdentifierChars.test(variable)){throw new Error(INVALID_TEMPL_VAR_ERROR_TEXT)}source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;");source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var result=attempt(function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)});result.source=source;if(isError(result)){throw result}return result}function toLower(value){return toString(value).toLowerCase()}function toUpper(value){return toString(value).toUpperCase()}function trim(string,chars,guard){string=toString(string);if(string&&(guard||chars===undefined)){return baseTrim(string)}if(!string||!(chars=baseToString(chars))){return string}var strSymbols=stringToArray(string),chrSymbols=stringToArray(chars),start=charsStartIndex(strSymbols,chrSymbols),end=charsEndIndex(strSymbols,chrSymbols)+1;return castSlice(strSymbols,start,end).join("")}function trimEnd(string,chars,guard){string=toString(string);if(string&&(guard||chars===undefined)){return string.slice(0,trimmedEndIndex(string)+1)}if(!string||!(chars=baseToString(chars))){return string}var strSymbols=stringToArray(string),end=charsEndIndex(strSymbols,stringToArray(chars))+1;return castSlice(strSymbols,0,end).join("")}function trimStart(string,chars,guard){string=toString(string);if(string&&(guard||chars===undefined)){return string.replace(reTrimStart,"")}if(!string||!(chars=baseToString(chars))){return string}var strSymbols=stringToArray(string),start=charsStartIndex(strSymbols,stringToArray(chars));return castSlice(strSymbols,start).join("")}function truncate(string,options){var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(isObject(options)){var separator="separator"in options?options.separator:separator;length="length"in options?toInteger(options.length):length;omission="omission"in options?baseToString(options.omission):omission}string=toString(string);var strLength=string.length;if(hasUnicode(string)){var strSymbols=stringToArray(string);strLength=strSymbols.length}if(length>=strLength){return string}var end=length-stringSize(omission);if(end<1){return omission}var result=strSymbols?castSlice(strSymbols,0,end).join(""):string.slice(0,end);if(separator===undefined){return result+omission}if(strSymbols){end+=result.length-end}if(isRegExp(separator)){if(string.slice(end).search(separator)){var match,substring=result;if(!separator.global){separator=RegExp(separator.source,toString(reFlags.exec(separator))+"g")}separator.lastIndex=0;while(match=separator.exec(substring)){var newEnd=match.index}result=result.slice(0,newEnd===undefined?end:newEnd)}}else if(string.indexOf(baseToString(separator),end)!=end){var index=result.lastIndexOf(separator);if(index>-1){result=result.slice(0,index)}}return result+omission}function unescape(string){string=toString(string);return string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string}var upperCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toUpperCase()});var upperFirst=createCaseFirst("toUpperCase");function words(string,pattern,guard){string=toString(string);pattern=guard?undefined:pattern;if(pattern===undefined){return hasUnicodeWord(string)?unicodeWords(string):asciiWords(string)}return string.match(pattern)||[]}var attempt=baseRest(function(func,args){try{return apply(func,undefined,args)}catch(e){return isError(e)?e:new Error(e)}});var bindAll=flatRest(function(object,methodNames){arrayEach(methodNames,function(key){key=toKey(key);baseAssignValue(object,key,bind(object[key],object))});return object});function cond(pairs){var length=pairs==null?0:pairs.length,toIteratee=getIteratee();pairs=!length?[]:arrayMap(pairs,function(pair){if(typeof pair[1]!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return[toIteratee(pair[0]),pair[1]]});return baseRest(function(args){var index=-1;while(++index<length){var pair=pairs[index];if(apply(pair[0],this,args)){return apply(pair[1],this,args)}}})}function conforms(source){return baseConforms(baseClone(source,CLONE_DEEP_FLAG))}function constant(value){return function(){return value}}function defaultTo(value,defaultValue){return value==null||value!==value?defaultValue:value}var flow=createFlow();var flowRight=createFlow(true);function identity(value){return value}function iteratee(func){return baseIteratee(typeof func=="function"?func:baseClone(func,CLONE_DEEP_FLAG))}function matches(source){return baseMatches(baseClone(source,CLONE_DEEP_FLAG))}function matchesProperty(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,CLONE_DEEP_FLAG))}var method=baseRest(function(path,args){return function(object){return baseInvoke(object,path,args)}});var methodOf=baseRest(function(object,args){return function(path){return baseInvoke(object,path,args)}});function mixin(object,source,options){var props=keys(source),methodNames=baseFunctions(source,props);if(options==null&&!(isObject(source)&&(methodNames.length||!props.length))){options=source;source=object;object=this;methodNames=baseFunctions(source,keys(source))}var chain=!(isObject(options)&&"chain"in options)||!!options.chain,isFunc=isFunction(object);arrayEach(methodNames,function(methodName){var func=source[methodName];object[methodName]=func;if(isFunc){object.prototype[methodName]=function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__),actions=result.__actions__=copyArray(this.__actions__);actions.push({func:func,args:arguments,thisArg:object});result.__chain__=chainAll;return result}return func.apply(object,arrayPush([this.value()],arguments))}}});return object}function noConflict(){if(root._===this){root._=oldDash}return this}function noop(){}function nthArg(n){n=toInteger(n);return baseRest(function(args){return baseNth(args,n)})}var over=createOver(arrayMap);var overEvery=createOver(arrayEvery);var overSome=createOver(arraySome);function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}function propertyOf(object){return function(path){return object==null?undefined:baseGet(object,path)}}var range=createRange();var rangeRight=createRange(true);function stubArray(){return[]}function stubFalse(){return false}function stubObject(){return{}}function stubString(){return""}function stubTrue(){return true}function times(n,iteratee){n=toInteger(n);if(n<1||n>MAX_SAFE_INTEGER){return[]}var index=MAX_ARRAY_LENGTH,length=nativeMin(n,MAX_ARRAY_LENGTH);iteratee=getIteratee(iteratee);n-=MAX_ARRAY_LENGTH;var result=baseTimes(length,iteratee);while(++index<n){iteratee(index)}return result}function toPath(value){if(isArray(value)){return arrayMap(value,toKey)}return isSymbol(value)?[value]:copyArray(stringToPath(toString(value)))}function uniqueId(prefix){var id=++idCounter;return toString(prefix)+id}var add=createMathOperation(function(augend,addend){return augend+addend},0);var ceil=createRound("ceil");var divide=createMathOperation(function(dividend,divisor){return dividend/divisor},1);var floor=createRound("floor");function max(array){return array&&array.length?baseExtremum(array,identity,baseGt):undefined}function maxBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseGt):undefined}function mean(array){return baseMean(array,identity)}function meanBy(array,iteratee){return baseMean(array,getIteratee(iteratee,2))}function min(array){return array&&array.length?baseExtremum(array,identity,baseLt):undefined}function minBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseLt):undefined}var multiply=createMathOperation(function(multiplier,multiplicand){return multiplier*multiplicand},1);var round=createRound("round");var subtract=createMathOperation(function(minuend,subtrahend){return minuend-subtrahend},0);function sum(array){return array&&array.length?baseSum(array,identity):0}function sumBy(array,iteratee){return array&&array.length?baseSum(array,getIteratee(iteratee,2)):0}lodash.after=after;lodash.ary=ary;lodash.assign=assign;lodash.assignIn=assignIn;lodash.assignInWith=assignInWith;lodash.assignWith=assignWith;lodash.at=at;lodash.before=before;lodash.bind=bind;lodash.bindAll=bindAll;lodash.bindKey=bindKey;lodash.castArray=castArray;lodash.chain=chain;lodash.chunk=chunk;lodash.compact=compact;lodash.concat=concat;lodash.cond=cond;lodash.conforms=conforms;lodash.constant=constant;lodash.countBy=countBy;lodash.create=create;lodash.curry=curry;lodash.curryRight=curryRight;lodash.debounce=debounce;lodash.defaults=defaults;lodash.defaultsDeep=defaultsDeep;lodash.defer=defer;lodash.delay=delay;lodash.difference=difference;lodash.differenceBy=differenceBy;lodash.differenceWith=differenceWith;lodash.drop=drop;lodash.dropRight=dropRight;lodash.dropRightWhile=dropRightWhile;lodash.dropWhile=dropWhile;lodash.fill=fill;lodash.filter=filter;lodash.flatMap=flatMap;lodash.flatMapDeep=flatMapDeep;lodash.flatMapDepth=flatMapDepth;lodash.flatten=flatten;lodash.flattenDeep=flattenDeep;lodash.flattenDepth=flattenDepth;lodash.flip=flip;lodash.flow=flow;lodash.flowRight=flowRight;lodash.fromPairs=fromPairs;lodash.functions=functions;lodash.functionsIn=functionsIn;lodash.groupBy=groupBy;lodash.initial=initial;lodash.intersection=intersection;lodash.intersectionBy=intersectionBy;lodash.intersectionWith=intersectionWith;lodash.invert=invert;lodash.invertBy=invertBy;lodash.invokeMap=invokeMap;lodash.iteratee=iteratee;lodash.keyBy=keyBy;lodash.keys=keys;lodash.keysIn=keysIn;lodash.map=map;lodash.mapKeys=mapKeys;lodash.mapValues=mapValues;lodash.matches=matches;lodash.matchesProperty=matchesProperty;lodash.memoize=memoize;lodash.merge=merge;lodash.mergeWith=mergeWith;lodash.method=method;lodash.methodOf=methodOf;lodash.mixin=mixin;lodash.negate=negate;lodash.nthArg=nthArg;lodash.omit=omit;lodash.omitBy=omitBy;lodash.once=once;lodash.orderBy=orderBy;lodash.over=over;lodash.overArgs=overArgs;lodash.overEvery=overEvery;lodash.overSome=overSome;lodash.partial=partial;lodash.partialRight=partialRight;lodash.partition=partition;lodash.pick=pick;lodash.pickBy=pickBy;lodash.property=property;lodash.propertyOf=propertyOf;lodash.pull=pull;lodash.pullAll=pullAll;lodash.pullAllBy=pullAllBy;lodash.pullAllWith=pullAllWith;lodash.pullAt=pullAt;lodash.range=range;lodash.rangeRight=rangeRight;lodash.rearg=rearg;lodash.reject=reject;lodash.remove=remove;lodash.rest=rest;lodash.reverse=reverse;lodash.sampleSize=sampleSize;lodash.set=set;lodash.setWith=setWith;lodash.shuffle=shuffle;lodash.slice=slice;lodash.sortBy=sortBy;lodash.sortedUniq=sortedUniq;lodash.sortedUniqBy=sortedUniqBy;lodash.split=split;lodash.spread=spread;lodash.tail=tail;lodash.take=take;lodash.takeRight=takeRight;lodash.takeRightWhile=takeRightWhile;lodash.takeWhile=takeWhile;lodash.tap=tap;lodash.throttle=throttle;lodash.thru=thru;lodash.toArray=toArray;lodash.toPairs=toPairs;lodash.toPairsIn=toPairsIn;lodash.toPath=toPath;lodash.toPlainObject=toPlainObject;lodash.transform=transform;lodash.unary=unary;lodash.union=union;lodash.unionBy=unionBy;lodash.unionWith=unionWith;lodash.uniq=uniq;lodash.uniqBy=uniqBy;lodash.uniqWith=uniqWith;lodash.unset=unset;lodash.unzip=unzip;lodash.unzipWith=unzipWith;lodash.update=update;lodash.updateWith=updateWith;lodash.values=values;lodash.valuesIn=valuesIn;lodash.without=without;lodash.words=words;lodash.wrap=wrap;lodash.xor=xor;lodash.xorBy=xorBy;lodash.xorWith=xorWith;lodash.zip=zip;lodash.zipObject=zipObject;lodash.zipObjectDeep=zipObjectDeep;lodash.zipWith=zipWith;lodash.entries=toPairs;lodash.entriesIn=toPairsIn;lodash.extend=assignIn;lodash.extendWith=assignInWith;mixin(lodash,lodash);lodash.add=add;lodash.attempt=attempt;lodash.camelCase=camelCase;lodash.capitalize=capitalize;lodash.ceil=ceil;lodash.clamp=clamp;lodash.clone=clone;lodash.cloneDeep=cloneDeep;lodash.cloneDeepWith=cloneDeepWith;lodash.cloneWith=cloneWith;lodash.conformsTo=conformsTo;lodash.deburr=deburr;lodash.defaultTo=defaultTo;lodash.divide=divide;lodash.endsWith=endsWith;lodash.eq=eq;lodash.escape=escape;lodash.escapeRegExp=escapeRegExp;lodash.every=every;lodash.find=find;lodash.findIndex=findIndex;lodash.findKey=findKey;lodash.findLast=findLast;lodash.findLastIndex=findLastIndex;lodash.findLastKey=findLastKey;lodash.floor=floor;lodash.forEach=forEach;lodash.forEachRight=forEachRight;lodash.forIn=forIn;lodash.forInRight=forInRight;lodash.forOwn=forOwn;lodash.forOwnRight=forOwnRight;lodash.get=get;lodash.gt=gt;lodash.gte=gte;lodash.has=has;lodash.hasIn=hasIn;lodash.head=head;lodash.identity=identity;lodash.includes=includes;lodash.indexOf=indexOf;lodash.inRange=inRange;lodash.invoke=invoke;lodash.isArguments=isArguments;lodash.isArray=isArray;lodash.isArrayBuffer=isArrayBuffer;lodash.isArrayLike=isArrayLike;lodash.isArrayLikeObject=isArrayLikeObject;lodash.isBoolean=isBoolean;lodash.isBuffer=isBuffer;lodash.isDate=isDate;lodash.isElement=isElement;lodash.isEmpty=isEmpty;lodash.isEqual=isEqual;lodash.isEqualWith=isEqualWith;lodash.isError=isError;lodash.isFinite=isFinite;lodash.isFunction=isFunction;lodash.isInteger=isInteger;lodash.isLength=isLength;lodash.isMap=isMap;lodash.isMatch=isMatch;lodash.isMatchWith=isMatchWith;lodash.isNaN=isNaN;lodash.isNative=isNative;lodash.isNil=isNil;lodash.isNull=isNull;lodash.isNumber=isNumber;lodash.isObject=isObject;lodash.isObjectLike=isObjectLike;lodash.isPlainObject=isPlainObject;lodash.isRegExp=isRegExp;lodash.isSafeInteger=isSafeInteger;lodash.isSet=isSet;lodash.isString=isString;lodash.isSymbol=isSymbol;lodash.isTypedArray=isTypedArray;lodash.isUndefined=isUndefined;lodash.isWeakMap=isWeakMap;lodash.isWeakSet=isWeakSet;lodash.join=join;lodash.kebabCase=kebabCase;lodash.last=last;lodash.lastIndexOf=lastIndexOf;lodash.lowerCase=lowerCase;lodash.lowerFirst=lowerFirst;lodash.lt=lt;lodash.lte=lte;lodash.max=max;lodash.maxBy=maxBy;lodash.mean=mean;lodash.meanBy=meanBy;lodash.min=min;lodash.minBy=minBy;lodash.stubArray=stubArray;lodash.stubFalse=stubFalse;lodash.stubObject=stubObject;lodash.stubString=stubString;lodash.stubTrue=stubTrue;lodash.multiply=multiply;lodash.nth=nth;lodash.noConflict=noConflict;lodash.noop=noop;lodash.now=now;lodash.pad=pad;lodash.padEnd=padEnd;lodash.padStart=padStart;lodash.parseInt=parseInt;lodash.random=random;lodash.reduce=reduce;lodash.reduceRight=reduceRight;lodash.repeat=repeat;lodash.replace=replace;lodash.result=result;lodash.round=round;lodash.runInContext=runInContext;lodash.sample=sample;lodash.size=size;lodash.snakeCase=snakeCase;lodash.some=some;lodash.sortedIndex=sortedIndex;lodash.sortedIndexBy=sortedIndexBy;lodash.sortedIndexOf=sortedIndexOf;lodash.sortedLastIndex=sortedLastIndex;lodash.sortedLastIndexBy=sortedLastIndexBy;lodash.sortedLastIndexOf=sortedLastIndexOf;lodash.startCase=startCase;lodash.startsWith=startsWith;lodash.subtract=subtract;lodash.sum=sum;lodash.sumBy=sumBy;lodash.template=template;lodash.times=times;lodash.toFinite=toFinite;lodash.toInteger=toInteger;lodash.toLength=toLength;lodash.toLower=toLower;lodash.toNumber=toNumber;lodash.toSafeInteger=toSafeInteger;lodash.toString=toString;lodash.toUpper=toUpper;lodash.trim=trim;lodash.trimEnd=trimEnd;lodash.trimStart=trimStart;lodash.truncate=truncate;lodash.unescape=unescape;lodash.uniqueId=uniqueId;lodash.upperCase=upperCase;lodash.upperFirst=upperFirst;lodash.each=forEach;lodash.eachRight=forEachRight;lodash.first=head;mixin(lodash,function(){var source={};baseForOwn(lodash,function(func,methodName){if(!hasOwnProperty.call(lodash.prototype,methodName)){source[methodName]=func}});return source}(),{chain:false});lodash.VERSION=VERSION;arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash[methodName].placeholder=lodash});arrayEach(["drop","take"],function(methodName,index){LazyWrapper.prototype[methodName]=function(n){n=n===undefined?1:nativeMax(toInteger(n),0);var result=this.__filtered__&&!index?new LazyWrapper(this):this.clone();if(result.__filtered__){result.__takeCount__=nativeMin(n,result.__takeCount__)}else{result.__views__.push({size:nativeMin(n,MAX_ARRAY_LENGTH),type:methodName+(result.__dir__<0?"Right":"")})}return result};LazyWrapper.prototype[methodName+"Right"]=function(n){return this.reverse()[methodName](n).reverse()}});arrayEach(["filter","map","takeWhile"],function(methodName,index){var type=index+1,isFilter=type==LAZY_FILTER_FLAG||type==LAZY_WHILE_FLAG;LazyWrapper.prototype[methodName]=function(iteratee){var result=this.clone();result.__iteratees__.push({iteratee:getIteratee(iteratee,3),type:type});result.__filtered__=result.__filtered__||isFilter;return result}});arrayEach(["head","last"],function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}});arrayEach(["initial","tail"],function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1)}});LazyWrapper.prototype.compact=function(){return this.filter(identity)};LazyWrapper.prototype.find=function(predicate){return this.filter(predicate).head()};LazyWrapper.prototype.findLast=function(predicate){return this.reverse().find(predicate)};LazyWrapper.prototype.invokeMap=baseRest(function(path,args){if(typeof path=="function"){return new LazyWrapper(this)}return this.map(function(value){return baseInvoke(value,path,args)})});LazyWrapper.prototype.reject=function(predicate){return this.filter(negate(getIteratee(predicate)))};LazyWrapper.prototype.slice=function(start,end){start=toInteger(start);var result=this;if(result.__filtered__&&(start>0||end<0)){return new LazyWrapper(result)}if(start<0){result=result.takeRight(-start)}else if(start){result=result.drop(start)}if(end!==undefined){end=toInteger(end);result=end<0?result.dropRight(-end):result.take(end-start)}return result};LazyWrapper.prototype.takeRightWhile=function(predicate){return this.reverse().takeWhile(predicate).reverse()};LazyWrapper.prototype.toArray=function(){return this.take(MAX_ARRAY_LENGTH)};baseForOwn(LazyWrapper.prototype,function(func,methodName){var checkIteratee=/^(?:filter|find|map|reject)|While$/.test(methodName),isTaker=/^(?:head|last)$/.test(methodName),lodashFunc=lodash[isTaker?"take"+(methodName=="last"?"Right":""):methodName],retUnwrapped=isTaker||/^find/.test(methodName);if(!lodashFunc){return}lodash.prototype[methodName]=function(){var value=this.__wrapped__,args=isTaker?[1]:arguments,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value);var interceptor=function(value){var result=lodashFunc.apply(lodash,arrayPush([value],args));return isTaker&&chainAll?result[0]:result};if(useLazy&&checkIteratee&&typeof iteratee=="function"&&iteratee.length!=1){isLazy=useLazy=false}var chainAll=this.__chain__,isHybrid=!!this.__actions__.length,isUnwrapped=retUnwrapped&&!chainAll,onlyLazy=isLazy&&!isHybrid;if(!retUnwrapped&&useLazy){value=onlyLazy?value:new LazyWrapper(this);var result=func.apply(value,args);result.__actions__.push({func:thru,args:[interceptor],thisArg:undefined});return new LodashWrapper(result,chainAll)}if(isUnwrapped&&onlyLazy){return func.apply(this,args)}result=this.thru(interceptor);return isUnwrapped?isTaker?result.value()[0]:result.value():result}});arrayEach(["pop","push","shift","sort","splice","unshift"],function(methodName){var func=arrayProto[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:pop|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){var value=this.value();return func.apply(isArray(value)?value:[],args)}return this[chainName](function(value){return func.apply(isArray(value)?value:[],args)})}});baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name+"";if(!hasOwnProperty.call(realNames,key)){realNames[key]=[]}realNames[key].push({name:methodName,func:lodashFunc})}});realNames[createHybrid(undefined,WRAP_BIND_KEY_FLAG).name]=[{name:"wrapper",func:undefined}];LazyWrapper.prototype.clone=lazyClone;LazyWrapper.prototype.reverse=lazyReverse;LazyWrapper.prototype.value=lazyValue;lodash.prototype.at=wrapperAt;lodash.prototype.chain=wrapperChain;lodash.prototype.commit=wrapperCommit;lodash.prototype.next=wrapperNext;lodash.prototype.plant=wrapperPlant;lodash.prototype.reverse=wrapperReverse;lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue;lodash.prototype.first=lodash.prototype.head;if(symIterator){lodash.prototype[symIterator]=wrapperToIterator}return lodash};var _=runInContext();if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){root._=_;define(function(){return _})}else if(freeModule){(freeModule.exports=_)._=_;freeExports._=_}else{root._=_}}).call(this)}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],64:[function(require,module,exports){"use strict";const Yallist=require("yallist");const MAX=Symbol("max");const LENGTH=Symbol("length");const LENGTH_CALCULATOR=Symbol("lengthCalculator");const ALLOW_STALE=Symbol("allowStale");const MAX_AGE=Symbol("maxAge");const DISPOSE=Symbol("dispose");const NO_DISPOSE_ON_SET=Symbol("noDisposeOnSet");const LRU_LIST=Symbol("lruList");const CACHE=Symbol("cache");const UPDATE_AGE_ON_GET=Symbol("updateAgeOnGet");const naiveLength=()=>1;class LRUCache{constructor(options){if(typeof options==="number")options={max:options};if(!options)options={};if(options.max&&(typeof options.max!=="number"||options.max<0))throw new TypeError("max must be a non-negative number");const max=this[MAX]=options.max||Infinity;const lc=options.length||naiveLength;this[LENGTH_CALCULATOR]=typeof lc!=="function"?naiveLength:lc;this[ALLOW_STALE]=options.stale||false;if(options.maxAge&&typeof options.maxAge!=="number")throw new TypeError("maxAge must be a number");this[MAX_AGE]=options.maxAge||0;this[DISPOSE]=options.dispose;this[NO_DISPOSE_ON_SET]=options.noDisposeOnSet||false;this[UPDATE_AGE_ON_GET]=options.updateAgeOnGet||false;this.reset()}set max(mL){if(typeof mL!=="number"||mL<0)throw new TypeError("max must be a non-negative number");this[MAX]=mL||Infinity;trim(this)}get max(){return this[MAX]}set allowStale(allowStale){this[ALLOW_STALE]=!!allowStale}get allowStale(){return this[ALLOW_STALE]}set maxAge(mA){if(typeof mA!=="number")throw new TypeError("maxAge must be a non-negative number");this[MAX_AGE]=mA;trim(this)}get maxAge(){return this[MAX_AGE]}set lengthCalculator(lC){if(typeof lC!=="function")lC=naiveLength;if(lC!==this[LENGTH_CALCULATOR]){this[LENGTH_CALCULATOR]=lC;this[LENGTH]=0;this[LRU_LIST].forEach(hit=>{hit.length=this[LENGTH_CALCULATOR](hit.value,hit.key);this[LENGTH]+=hit.length})}trim(this)}get lengthCalculator(){return this[LENGTH_CALCULATOR]}get length(){return this[LENGTH]}get itemCount(){return this[LRU_LIST].length}rforEach(fn,thisp){thisp=thisp||this;for(let walker=this[LRU_LIST].tail;walker!==null;){const prev=walker.prev;forEachStep(this,fn,walker,thisp);walker=prev}}forEach(fn,thisp){thisp=thisp||this;for(let walker=this[LRU_LIST].head;walker!==null;){const next=walker.next;forEachStep(this,fn,walker,thisp);walker=next}}keys(){return this[LRU_LIST].toArray().map(k=>k.key)}values(){return this[LRU_LIST].toArray().map(k=>k.value)}reset(){if(this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length){this[LRU_LIST].forEach(hit=>this[DISPOSE](hit.key,hit.value))}this[CACHE]=new Map;this[LRU_LIST]=new Yallist;this[LENGTH]=0}dump(){return this[LRU_LIST].map(hit=>isStale(this,hit)?false:{k:hit.key,v:hit.value,e:hit.now+(hit.maxAge||0)}).toArray().filter(h=>h)}dumpLru(){return this[LRU_LIST]}set(key,value,maxAge){maxAge=maxAge||this[MAX_AGE];if(maxAge&&typeof maxAge!=="number")throw new TypeError("maxAge must be a number");const now=maxAge?Date.now():0;const len=this[LENGTH_CALCULATOR](value,key);if(this[CACHE].has(key)){if(len>this[MAX]){del(this,this[CACHE].get(key));return false}const node=this[CACHE].get(key);const item=node.value;if(this[DISPOSE]){if(!this[NO_DISPOSE_ON_SET])this[DISPOSE](key,item.value)}item.now=now;item.maxAge=maxAge;item.value=value;this[LENGTH]+=len-item.length;item.length=len;this.get(key);trim(this);return true}const hit=new Entry(key,value,len,now,maxAge);if(hit.length>this[MAX]){if(this[DISPOSE])this[DISPOSE](key,value);return false}this[LENGTH]+=hit.length;this[LRU_LIST].unshift(hit);this[CACHE].set(key,this[LRU_LIST].head);trim(this);return true}has(key){if(!this[CACHE].has(key))return false;const hit=this[CACHE].get(key).value;return!isStale(this,hit)}get(key){return get(this,key,true)}peek(key){return get(this,key,false)}pop(){const node=this[LRU_LIST].tail;if(!node)return null;del(this,node);return node.value}del(key){del(this,this[CACHE].get(key))}load(arr){this.reset();const now=Date.now();for(let l=arr.length-1;l>=0;l--){const hit=arr[l];const expiresAt=hit.e||0;if(expiresAt===0)this.set(hit.k,hit.v);else{const maxAge=expiresAt-now;if(maxAge>0){this.set(hit.k,hit.v,maxAge)}}}}prune(){this[CACHE].forEach((value,key)=>get(this,key,false))}}const get=(self,key,doUse)=>{const node=self[CACHE].get(key);if(node){const hit=node.value;if(isStale(self,hit)){del(self,node);if(!self[ALLOW_STALE])return undefined}else{if(doUse){if(self[UPDATE_AGE_ON_GET])node.value.now=Date.now();self[LRU_LIST].unshiftNode(node)}}return hit.value}};const isStale=(self,hit)=>{if(!hit||!hit.maxAge&&!self[MAX_AGE])return false;const diff=Date.now()-hit.now;return hit.maxAge?diff>hit.maxAge:self[MAX_AGE]&&diff>self[MAX_AGE]};const trim=self=>{if(self[LENGTH]>self[MAX]){for(let walker=self[LRU_LIST].tail;self[LENGTH]>self[MAX]&&walker!==null;){const prev=walker.prev;del(self,walker);walker=prev}}};const del=(self,node)=>{if(node){const hit=node.value;if(self[DISPOSE])self[DISPOSE](hit.key,hit.value);self[LENGTH]-=hit.length;self[CACHE].delete(hit.key);self[LRU_LIST].removeNode(node)}};class Entry{constructor(key,value,length,now,maxAge){this.key=key;this.value=value;this.length=length;this.now=now;this.maxAge=maxAge||0}}const forEachStep=(self,fn,node,thisp)=>{let hit=node.value;if(isStale(self,hit)){del(self,node);if(!self[ALLOW_STALE])hit=undefined}if(hit)fn.call(thisp,hit.value,hit.key,self)};module.exports=LRUCache},{yallist:134}],65:[function(require,module,exports){(function(Buffer){(function(){const protocol=module.exports;protocol.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"};protocol.codes={};for(const k in protocol.types){const v=protocol.types[k];protocol.codes[v]=k}protocol.CMD_SHIFT=4;protocol.CMD_MASK=240;protocol.DUP_MASK=8;protocol.QOS_MASK=3;protocol.QOS_SHIFT=1;protocol.RETAIN_MASK=1;protocol.VARBYTEINT_MASK=127;protocol.VARBYTEINT_FIN_MASK=128;protocol.VARBYTEINT_MAX=268435455;protocol.SESSIONPRESENT_MASK=1;protocol.SESSIONPRESENT_HEADER=Buffer.from([protocol.SESSIONPRESENT_MASK]);protocol.CONNACK_HEADER=Buffer.from([protocol.codes.connack<<protocol.CMD_SHIFT]);protocol.USERNAME_MASK=128;protocol.PASSWORD_MASK=64;protocol.WILL_RETAIN_MASK=32;protocol.WILL_QOS_MASK=24;protocol.WILL_QOS_SHIFT=3;protocol.WILL_FLAG_MASK=4;protocol.CLEAN_SESSION_MASK=2;protocol.CONNECT_HEADER=Buffer.from([protocol.codes.connect<<protocol.CMD_SHIFT]);protocol.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11};protocol.propertiesCodes={};for(const prop in protocol.properties){const id=protocol.properties[prop];protocol.propertiesCodes[id]=prop}protocol.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function genHeader(type){return[0,1,2].map(qos=>{return[0,1].map(dup=>{return[0,1].map(retain=>{const buf=Buffer.alloc(1);buf.writeUInt8(protocol.codes[type]<<protocol.CMD_SHIFT|(dup?protocol.DUP_MASK:0)|qos<<protocol.QOS_SHIFT|retain,0,true);return buf})})})}protocol.PUBLISH_HEADER=genHeader("publish");protocol.SUBSCRIBE_HEADER=genHeader("subscribe");protocol.SUBSCRIBE_OPTIONS_QOS_MASK=3;protocol.SUBSCRIBE_OPTIONS_NL_MASK=1;protocol.SUBSCRIBE_OPTIONS_NL_SHIFT=2;protocol.SUBSCRIBE_OPTIONS_RAP_MASK=1;protocol.SUBSCRIBE_OPTIONS_RAP_SHIFT=3;protocol.SUBSCRIBE_OPTIONS_RH_MASK=3;protocol.SUBSCRIBE_OPTIONS_RH_SHIFT=4;protocol.SUBSCRIBE_OPTIONS_RH=[0,16,32];protocol.SUBSCRIBE_OPTIONS_NL=4;protocol.SUBSCRIBE_OPTIONS_RAP=8;protocol.SUBSCRIBE_OPTIONS_QOS=[0,1,2];protocol.UNSUBSCRIBE_HEADER=genHeader("unsubscribe");protocol.ACKS={unsuback:genHeader("unsuback"),puback:genHeader("puback"),pubcomp:genHeader("pubcomp"),pubrel:genHeader("pubrel"),pubrec:genHeader("pubrec")};protocol.SUBACK_HEADER=Buffer.from([protocol.codes.suback<<protocol.CMD_SHIFT]);protocol.VERSION3=Buffer.from([3]);protocol.VERSION4=Buffer.from([4]);protocol.VERSION5=Buffer.from([5]);protocol.VERSION131=Buffer.from([131]);protocol.VERSION132=Buffer.from([132]);protocol.QOS=[0,1,2].map(qos=>{return Buffer.from([qos])});protocol.EMPTY={pingreq:Buffer.from([protocol.codes.pingreq<<4,0]),pingresp:Buffer.from([protocol.codes.pingresp<<4,0]),disconnect:Buffer.from([protocol.codes.disconnect<<4,0])}}).call(this)}).call(this,require("buffer").Buffer)},{buffer:54}],66:[function(require,module,exports){(function(Buffer){(function(){const writeToStream=require("./writeToStream");const EventEmitter=require("events");function generate(packet,opts){const stream=new Accumulator;writeToStream(packet,stream,opts);return stream.concat()}class Accumulator extends EventEmitter{constructor(){super();this._array=new Array(20);this._i=0}write(chunk){this._array[this._i++]=chunk;return true}concat(){let length=0;const lengths=new Array(this._array.length);const list=this._array;let pos=0;let i;for(i=0;i<list.length&&list[i]!==undefined;i++){if(typeof list[i]!=="string")lengths[i]=list[i].length;else lengths[i]=Buffer.byteLength(list[i]);length+=lengths[i]}const result=Buffer.allocUnsafe(length);for(i=0;i<list.length&&list[i]!==undefined;i++){if(typeof list[i]!=="string"){list[i].copy(result,pos);pos+=lengths[i]}else{result.write(list[i],pos);pos+=lengths[i]}}return result}}module.exports=generate}).call(this)}).call(this,require("buffer").Buffer)},{"./writeToStream":71,buffer:54,events:60}],67:[function(require,module,exports){exports.parser=require("./parser").parser;exports.generate=require("./generate");exports.writeToStream=require("./writeToStream")},{"./generate":66,"./parser":70,"./writeToStream":71}],68:[function(require,module,exports){(function(Buffer){(function(){const max=65536;const cache={};const SubOk=Buffer.isBuffer(Buffer.from([1,2]).subarray(0,1));function generateBuffer(i){const buffer=Buffer.allocUnsafe(2);buffer.writeUInt8(i>>8,0);buffer.writeUInt8(i&255,0+1);return buffer}function generateCache(){for(let i=0;i<max;i++){cache[i]=generateBuffer(i)}}function genBufVariableByteInt(num){const maxLength=4;let digit=0;let pos=0;const buffer=Buffer.allocUnsafe(maxLength);do{digit=num%128|0;num=num/128|0;if(num>0)digit=digit|128;buffer.writeUInt8(digit,pos++)}while(num>0&&pos<maxLength);if(num>0){pos=0}return SubOk?buffer.subarray(0,pos):buffer.slice(0,pos)}function generate4ByteBuffer(num){const buffer=Buffer.allocUnsafe(4);buffer.writeUInt32BE(num,0);return buffer}module.exports={cache:cache,generateCache:generateCache,generateNumber:generateBuffer,genBufVariableByteInt:genBufVariableByteInt,generate4ByteBuffer:generate4ByteBuffer}}).call(this)}).call(this,require("buffer").Buffer)},{buffer:54}],69:[function(require,module,exports){class Packet{constructor(){this.cmd=null;this.retain=false;this.qos=0;this.dup=false;this.length=-1;this.topic=null;this.payload=null}}module.exports=Packet},{}],70:[function(require,module,exports){const bl=require("bl");const EventEmitter=require("events");const Packet=require("./packet");const constants=require("./constants");const debug=require("debug")("mqtt-packet:parser");class Parser extends EventEmitter{constructor(){super();this.parser=this.constructor.parser}static parser(opt){if(!(this instanceof Parser))return(new Parser).parser(opt);this.settings=opt||{};this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"];this._resetState();return this}_resetState(){debug("_resetState: resetting packet, error, _list, and _stateCounter");this.packet=new Packet;this.error=null;this._list=bl();this._stateCounter=0}parse(buf){if(this.error)this._resetState();this._list.append(buf);debug("parse: current state: %s",this._states[this._stateCounter]);while((this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error){this._stateCounter++;debug("parse: state complete. _stateCounter is now: %d",this._stateCounter);debug("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length);if(this._stateCounter>=this._states.length)this._stateCounter=0}debug("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length);return this._list.length}_parseHeader(){const zero=this._list.readUInt8(0);this.packet.cmd=constants.types[zero>>constants.CMD_SHIFT];this.packet.retain=(zero&constants.RETAIN_MASK)!==0;this.packet.qos=zero>>constants.QOS_SHIFT&constants.QOS_MASK;this.packet.dup=(zero&constants.DUP_MASK)!==0;debug("_parseHeader: packet: %o",this.packet);this._list.consume(1);return true}_parseLength(){const result=this._parseVarByteNum(true);if(result){this.packet.length=result.value;this._list.consume(result.bytes)}debug("_parseLength %d",result.value);return!!result}_parsePayload(){debug("_parsePayload: payload %O",this._list);let result=false;if(this.packet.length===0||this._list.length>=this.packet.length){this._pos=0;switch(this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}result=true}debug("_parsePayload complete result: %s",result);return result}_parseConnect(){debug("_parseConnect");let topic;let payload;let password;let username;const flags={};const packet=this.packet;const protocolId=this._parseString();if(protocolId===null)return this._emitError(new Error("Cannot parse protocolId"));if(protocolId!=="MQTT"&&protocolId!=="MQIsdp"){return this._emitError(new Error("Invalid protocolId"))}packet.protocolId=protocolId;if(this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));packet.protocolVersion=this._list.readUInt8(this._pos);if(packet.protocolVersion>=128){packet.bridgeMode=true;packet.protocolVersion=packet.protocolVersion-128}if(packet.protocolVersion!==3&&packet.protocolVersion!==4&&packet.protocolVersion!==5){return this._emitError(new Error("Invalid protocol version"))}this._pos++;if(this._pos>=this._list.length){return this._emitError(new Error("Packet too short"))}flags.username=this._list.readUInt8(this._pos)&constants.USERNAME_MASK;flags.password=this._list.readUInt8(this._pos)&constants.PASSWORD_MASK;flags.will=this._list.readUInt8(this._pos)&constants.WILL_FLAG_MASK;if(flags.will){packet.will={};packet.will.retain=(this._list.readUInt8(this._pos)&constants.WILL_RETAIN_MASK)!==0;packet.will.qos=(this._list.readUInt8(this._pos)&constants.WILL_QOS_MASK)>>constants.WILL_QOS_SHIFT}packet.clean=(this._list.readUInt8(this._pos)&constants.CLEAN_SESSION_MASK)!==0;this._pos++;packet.keepalive=this._parseNum();if(packet.keepalive===-1)return this._emitError(new Error("Packet too short"));if(packet.protocolVersion===5){const properties=this._parseProperties();if(Object.getOwnPropertyNames(properties).length){packet.properties=properties}}const clientId=this._parseString();if(clientId===null)return this._emitError(new Error("Packet too short"));packet.clientId=clientId;debug("_parseConnect: packet.clientId: %s",packet.clientId);if(flags.will){if(packet.protocolVersion===5){const willProperties=this._parseProperties();if(Object.getOwnPropertyNames(willProperties).length){packet.will.properties=willProperties}}topic=this._parseString();if(topic===null)return this._emitError(new Error("Cannot parse will topic"));packet.will.topic=topic;debug("_parseConnect: packet.will.topic: %s",packet.will.topic);payload=this._parseBuffer();if(payload===null)return this._emitError(new Error("Cannot parse will payload"));packet.will.payload=payload;debug("_parseConnect: packet.will.paylaod: %s",packet.will.payload)}if(flags.username){username=this._parseString();if(username===null)return this._emitError(new Error("Cannot parse username"));packet.username=username;debug("_parseConnect: packet.username: %s",packet.username)}if(flags.password){password=this._parseBuffer();if(password===null)return this._emitError(new Error("Cannot parse password"));packet.password=password}this.settings=packet;debug("_parseConnect: complete");return packet}_parseConnack(){debug("_parseConnack");const packet=this.packet;if(this._list.length<1)return null;packet.sessionPresent=!!(this._list.readUInt8(this._pos++)&constants.SESSIONPRESENT_MASK);if(this.settings.protocolVersion===5){if(this._list.length>=2){packet.reasonCode=this._list.readUInt8(this._pos++)}else{packet.reasonCode=0}}else{if(this._list.length<2)return null;packet.returnCode=this._list.readUInt8(this._pos++)}if(packet.returnCode===-1||packet.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){const properties=this._parseProperties();if(Object.getOwnPropertyNames(properties).length){packet.properties=properties}}debug("_parseConnack: complete")}_parsePublish(){debug("_parsePublish");const packet=this.packet;packet.topic=this._parseString();if(packet.topic===null)return this._emitError(new Error("Cannot parse topic"));if(packet.qos>0)if(!this._parseMessageId()){return}if(this.settings.protocolVersion===5){const properties=this._parseProperties();if(Object.getOwnPropertyNames(properties).length){packet.properties=properties}}packet.payload=this._list.slice(this._pos,packet.length);debug("_parsePublish: payload from buffer list: %o",packet.payload)}_parseSubscribe(){debug("_parseSubscribe");const packet=this.packet;let topic;let options;let qos;let rh;let rap;let nl;let subscription;if(packet.qos!==1){return this._emitError(new Error("Wrong subscribe header"))}packet.subscriptions=[];if(!this._parseMessageId()){return}if(this.settings.protocolVersion===5){const properties=this._parseProperties();if(Object.getOwnPropertyNames(properties).length){packet.properties=properties}}while(this._pos<packet.length){topic=this._parseString();if(topic===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=packet.length)return this._emitError(new Error("Malformed Subscribe Payload"));options=this._parseByte();qos=options&constants.SUBSCRIBE_OPTIONS_QOS_MASK;nl=(options>>constants.SUBSCRIBE_OPTIONS_NL_SHIFT&constants.SUBSCRIBE_OPTIONS_NL_MASK)!==0;rap=(options>>constants.SUBSCRIBE_OPTIONS_RAP_SHIFT&constants.SUBSCRIBE_OPTIONS_RAP_MASK)!==0;rh=options>>constants.SUBSCRIBE_OPTIONS_RH_SHIFT&constants.SUBSCRIBE_OPTIONS_RH_MASK;subscription={topic:topic,qos:qos};if(this.settings.protocolVersion===5){subscription.nl=nl;subscription.rap=rap;subscription.rh=rh}else if(this.settings.bridgeMode){subscription.rh=0;subscription.rap=true;subscription.nl=true}debug("_parseSubscribe: push subscription `%s` to subscription",subscription);packet.subscriptions.push(subscription)}}_parseSuback(){debug("_parseSuback");const packet=this.packet;this.packet.granted=[];if(!this._parseMessageId()){return}if(this.settings.protocolVersion===5){const properties=this._parseProperties();if(Object.getOwnPropertyNames(properties).length){packet.properties=properties}}while(this._pos<this.packet.length){this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){debug("_parseUnsubscribe");const packet=this.packet;packet.unsubscriptions=[];if(!this._parseMessageId()){return}if(this.settings.protocolVersion===5){const properties=this._parseProperties();if(Object.getOwnPropertyNames(properties).length){packet.properties=properties}}while(this._pos<packet.length){const topic=this._parseString();if(topic===null)return this._emitError(new Error("Cannot parse topic"));debug("_parseUnsubscribe: push topic `%s` to unsubscriptions",topic);packet.unsubscriptions.push(topic)}}_parseUnsuback(){debug("_parseUnsuback");const packet=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(this.settings.protocolVersion===5){const properties=this._parseProperties();if(Object.getOwnPropertyNames(properties).length){packet.properties=properties}packet.granted=[];while(this._pos<this.packet.length){this.packet.granted.push(this._list.readUInt8(this._pos++))}}}_parseConfirmation(){debug("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const packet=this.packet;this._parseMessageId();if(this.settings.protocolVersion===5){if(packet.length>2){packet.reasonCode=this._parseByte();debug("_parseConfirmation: packet.reasonCode `%d`",packet.reasonCode)}else{packet.reasonCode=0}if(packet.length>3){const properties=this._parseProperties();if(Object.getOwnPropertyNames(properties).length){packet.properties=properties}}}return true}_parseDisconnect(){const packet=this.packet;debug("_parseDisconnect");if(this.settings.protocolVersion===5){if(this._list.length>0){packet.reasonCode=this._parseByte()}else{packet.reasonCode=0}const properties=this._parseProperties();if(Object.getOwnPropertyNames(properties).length){packet.properties=properties}}debug("_parseDisconnect result: true");return true}_parseAuth(){debug("_parseAuth");const packet=this.packet;if(this.settings.protocolVersion!==5){return this._emitError(new Error("Not supported auth packet for this version MQTT"))}packet.reasonCode=this._parseByte();const properties=this._parseProperties();if(Object.getOwnPropertyNames(properties).length){packet.properties=properties}debug("_parseAuth: result: true");return true}_parseMessageId(){const packet=this.packet;packet.messageId=this._parseNum();if(packet.messageId===null){this._emitError(new Error("Cannot parse messageId"));return false}debug("_parseMessageId: packet.messageId %d",packet.messageId);return true}_parseString(maybeBuffer){const length=this._parseNum();const end=length+this._pos;if(length===-1||end>this._list.length||end>this.packet.length)return null;const result=this._list.toString("utf8",this._pos,end);this._pos+=length;debug("_parseString: result: %s",result);return result}_parseStringPair(){debug("_parseStringPair");return{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const length=this._parseNum();const end=length+this._pos;if(length===-1||end>this._list.length||end>this.packet.length)return null;const result=this._list.slice(this._pos,end);this._pos+=length;debug("_parseBuffer: result: %o",result);return result}_parseNum(){if(this._list.length-this._pos<2)return-1;const result=this._list.readUInt16BE(this._pos);this._pos+=2;debug("_parseNum: result: %s",result);return result}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const result=this._list.readUInt32BE(this._pos);this._pos+=4;debug("_parse4ByteNum: result: %s",result);return result}_parseVarByteNum(fullInfoFlag){debug("_parseVarByteNum");const maxBytes=4;let bytes=0;let mul=1;let value=0;let result=false;let current;const padding=this._pos?this._pos:0;while(bytes<maxBytes&&padding+bytes<this._list.length){current=this._list.readUInt8(padding+bytes++);value+=mul*(current&constants.VARBYTEINT_MASK);mul*=128;if((current&constants.VARBYTEINT_FIN_MASK)===0){result=true;break}if(this._list.length<=bytes){break}}if(!result&&bytes===maxBytes&&this._list.length>=bytes){this._emitError(new Error("Invalid variable byte integer"))}if(padding){this._pos+=bytes}result=result?fullInfoFlag?{bytes:bytes,value:value}:value:false;debug("_parseVarByteNum: result: %o",result);return result}_parseByte(){let result;if(this._pos<this._list.length){result=this._list.readUInt8(this._pos);this._pos++}debug("_parseByte: result: %o",result);return result}_parseByType(type){debug("_parseByType: type: %s",type);switch(type){case"byte":{return this._parseByte()!==0}case"int8":{return this._parseByte()}case"int16":{return this._parseNum()}case"int32":{return this._parse4ByteNum()}case"var":{return this._parseVarByteNum()}case"string":{return this._parseString()}case"pair":{return this._parseStringPair()}case"binary":{return this._parseBuffer()}}}_parseProperties(){debug("_parseProperties");const length=this._parseVarByteNum();const start=this._pos;const end=start+length;const result={};while(this._pos<end){const type=this._parseByte();if(!type){this._emitError(new Error("Cannot parse property code type"));return false}const name=constants.propertiesCodes[type];if(!name){this._emitError(new Error("Unknown property"));return false}if(name==="userProperties"){if(!result[name]){result[name]=Object.create(null)}const currentUserProperty=this._parseByType(constants.propertiesTypes[name]);if(result[name][currentUserProperty.name]){if(Array.isArray(result[name][currentUserProperty.name])){result[name][currentUserProperty.name].push(currentUserProperty.value)}else{const currentValue=result[name][currentUserProperty.name];result[name][currentUserProperty.name]=[currentValue];result[name][currentUserProperty.name].push(currentUserProperty.value)}}else{result[name][currentUserProperty.name]=currentUserProperty.value}continue}if(result[name]){if(Array.isArray(result[name])){result[name].push(this._parseByType(constants.propertiesTypes[name]))}else{result[name]=[result[name]];result[name].push(this._parseByType(constants.propertiesTypes[name]))}}else{result[name]=this._parseByType(constants.propertiesTypes[name])}}return result}_newPacket(){debug("_newPacket");if(this.packet){this._list.consume(this.packet.length);debug("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length);this.emit("packet",this.packet)}debug("_newPacket: new packet");this.packet=new Packet;this._pos=0;return true}_emitError(err){debug("_emitError");this.error=err;this.emit("error",err)}}module.exports=Parser},{"./constants":65,"./packet":69,bl:51,debug:56,events:60}],71:[function(require,module,exports){(function(Buffer){(function(){const protocol=require("./constants");const empty=Buffer.allocUnsafe(0);const zeroBuf=Buffer.from([0]);const numbers=require("./numbers");const nextTick=require("process-nextick-args").nextTick;const debug=require("debug")("mqtt-packet:writeToStream");const numCache=numbers.cache;const generateNumber=numbers.generateNumber;const generateCache=numbers.generateCache;const genBufVariableByteInt=numbers.genBufVariableByteInt;const generate4ByteBuffer=numbers.generate4ByteBuffer;let writeNumber=writeNumberCached;let toGenerate=true;function generate(packet,stream,opts){debug("generate called");if(stream.cork){stream.cork();nextTick(uncork,stream)}if(toGenerate){toGenerate=false;generateCache()}debug("generate: packet.cmd: %s",packet.cmd);switch(packet.cmd){case"connect":return connect(packet,stream,opts);case"connack":return connack(packet,stream,opts);case"publish":return publish(packet,stream,opts);case"puback":case"pubrec":case"pubrel":case"pubcomp":return confirmation(packet,stream,opts);case"subscribe":return subscribe(packet,stream,opts);case"suback":return suback(packet,stream,opts);case"unsubscribe":return unsubscribe(packet,stream,opts);case"unsuback":return unsuback(packet,stream,opts);case"pingreq":case"pingresp":return emptyPacket(packet,stream,opts);case"disconnect":return disconnect(packet,stream,opts);case"auth":return auth(packet,stream,opts);default:stream.emit("error",new Error("Unknown command"));return false}}Object.defineProperty(generate,"cacheNumbers",{get(){return writeNumber===writeNumberCached},set(value){if(value){if(!numCache||Object.keys(numCache).length===0)toGenerate=true;writeNumber=writeNumberCached}else{toGenerate=false;writeNumber=writeNumberGenerated}}});function uncork(stream){stream.uncork()}function connect(packet,stream,opts){const settings=packet||{};const protocolId=settings.protocolId||"MQTT";let protocolVersion=settings.protocolVersion||4;const will=settings.will;let clean=settings.clean;const keepalive=settings.keepalive||0;const clientId=settings.clientId||"";const username=settings.username;const password=settings.password;const properties=settings.properties;if(clean===undefined)clean=true;let length=0;if(!protocolId||typeof protocolId!=="string"&&!Buffer.isBuffer(protocolId)){stream.emit("error",new Error("Invalid protocolId"));return false}else length+=protocolId.length+2;if(protocolVersion!==3&&protocolVersion!==4&&protocolVersion!==5){stream.emit("error",new Error("Invalid protocol version"));return false}else length+=1;if((typeof clientId==="string"||Buffer.isBuffer(clientId))&&(clientId||protocolVersion>=4)&&(clientId||clean)){length+=Buffer.byteLength(clientId)+2}else{if(protocolVersion<4){stream.emit("error",new Error("clientId must be supplied before 3.1.1"));return false}if(clean*1===0){stream.emit("error",new Error("clientId must be given if cleanSession set to 0"));return false}}if(typeof keepalive!=="number"||keepalive<0||keepalive>65535||keepalive%1!==0){stream.emit("error",new Error("Invalid keepalive"));return false}else length+=2;length+=1;if(protocolVersion===5){var propertiesData=getProperties(stream,properties);if(!propertiesData){return false}length+=propertiesData.length}if(will){if(typeof will!=="object"){stream.emit("error",new Error("Invalid will"));return false}if(!will.topic||typeof will.topic!=="string"){stream.emit("error",new Error("Invalid will topic"));return false}else{length+=Buffer.byteLength(will.topic)+2}length+=2;if(will.payload){if(will.payload.length>=0){if(typeof will.payload==="string"){length+=Buffer.byteLength(will.payload)}else{length+=will.payload.length}}else{stream.emit("error",new Error("Invalid will payload"));return false}}var willProperties={};if(protocolVersion===5){willProperties=getProperties(stream,will.properties);if(!willProperties){return false}length+=willProperties.length}}let providedUsername=false;if(username!=null){if(isStringOrBuffer(username)){providedUsername=true;length+=Buffer.byteLength(username)+2}else{stream.emit("error",new Error("Invalid username"));return false}}if(password!=null){if(!providedUsername){stream.emit("error",new Error("Username is required to use password"));return false}if(isStringOrBuffer(password)){length+=byteLength(password)+2}else{stream.emit("error",new Error("Invalid password"));return false}}stream.write(protocol.CONNECT_HEADER);writeVarByteInt(stream,length);writeStringOrBuffer(stream,protocolId);if(settings.bridgeMode){protocolVersion+=128}stream.write(protocolVersion===131?protocol.VERSION131:protocolVersion===132?protocol.VERSION132:protocolVersion===4?protocol.VERSION4:protocolVersion===5?protocol.VERSION5:protocol.VERSION3);let flags=0;flags|=username!=null?protocol.USERNAME_MASK:0;flags|=password!=null?protocol.PASSWORD_MASK:0;flags|=will&&will.retain?protocol.WILL_RETAIN_MASK:0;flags|=will&&will.qos?will.qos<<protocol.WILL_QOS_SHIFT:0;flags|=will?protocol.WILL_FLAG_MASK:0;flags|=clean?protocol.CLEAN_SESSION_MASK:0;stream.write(Buffer.from([flags]));writeNumber(stream,keepalive);if(protocolVersion===5){propertiesData.write()}writeStringOrBuffer(stream,clientId);if(will){if(protocolVersion===5){willProperties.write()}writeString(stream,will.topic);writeStringOrBuffer(stream,will.payload)}if(username!=null){writeStringOrBuffer(stream,username)}if(password!=null){writeStringOrBuffer(stream,password)}return true}function connack(packet,stream,opts){const version=opts?opts.protocolVersion:4;const settings=packet||{};const rc=version===5?settings.reasonCode:settings.returnCode;const properties=settings.properties;let length=2;if(typeof rc!=="number"){stream.emit("error",new Error("Invalid return code"));return false}let propertiesData=null;if(version===5){propertiesData=getProperties(stream,properties);if(!propertiesData){return false}length+=propertiesData.length}stream.write(protocol.CONNACK_HEADER);writeVarByteInt(stream,length);stream.write(settings.sessionPresent?protocol.SESSIONPRESENT_HEADER:zeroBuf);stream.write(Buffer.from([rc]));if(propertiesData!=null){propertiesData.write()}return true}function publish(packet,stream,opts){debug("publish: packet: %o",packet);const version=opts?opts.protocolVersion:4;const settings=packet||{};const qos=settings.qos||0;const retain=settings.retain?protocol.RETAIN_MASK:0;const topic=settings.topic;const payload=settings.payload||empty;const id=settings.messageId;const properties=settings.properties;let length=0;if(typeof topic==="string")length+=Buffer.byteLength(topic)+2;else if(Buffer.isBuffer(topic))length+=topic.length+2;else{stream.emit("error",new Error("Invalid topic"));return false}if(!Buffer.isBuffer(payload))length+=Buffer.byteLength(payload);else length+=payload.length;if(qos&&typeof id!=="number"){stream.emit("error",new Error("Invalid messageId"));return false}else if(qos)length+=2;let propertiesData=null;if(version===5){propertiesData=getProperties(stream,properties);if(!propertiesData){return false}length+=propertiesData.length}stream.write(protocol.PUBLISH_HEADER[qos][settings.dup?1:0][retain?1:0]);writeVarByteInt(stream,length);writeNumber(stream,byteLength(topic));stream.write(topic);if(qos>0)writeNumber(stream,id);if(propertiesData!=null){propertiesData.write()}debug("publish: payload: %o",payload);return stream.write(payload)}function confirmation(packet,stream,opts){const version=opts?opts.protocolVersion:4;const settings=packet||{};const type=settings.cmd||"puback";const id=settings.messageId;const dup=settings.dup&&type==="pubrel"?protocol.DUP_MASK:0;let qos=0;const reasonCode=settings.reasonCode;const properties=settings.properties;let length=version===5?3:2;if(type==="pubrel")qos=1;if(typeof id!=="number"){stream.emit("error",new Error("Invalid messageId"));return false}let propertiesData=null;if(version===5){if(typeof properties==="object"){propertiesData=getPropertiesByMaximumPacketSize(stream,properties,opts,length);if(!propertiesData){return false}length+=propertiesData.length}}stream.write(protocol.ACKS[type][qos][dup][0]);writeVarByteInt(stream,length);writeNumber(stream,id);if(version===5){stream.write(Buffer.from([reasonCode]))}if(propertiesData!==null){propertiesData.write()}return true}function subscribe(packet,stream,opts){debug("subscribe: packet: ");const version=opts?opts.protocolVersion:4;const settings=packet||{};const dup=settings.dup?protocol.DUP_MASK:0;const id=settings.messageId;const subs=settings.subscriptions;const properties=settings.properties;let length=0;if(typeof id!=="number"){stream.emit("error",new Error("Invalid messageId"));return false}else length+=2;let propertiesData=null;if(version===5){propertiesData=getProperties(stream,properties);if(!propertiesData){return false}length+=propertiesData.length}if(typeof subs==="object"&&subs.length){for(let i=0;i<subs.length;i+=1){const itopic=subs[i].topic;const iqos=subs[i].qos;if(typeof itopic!=="string"){stream.emit("error",new Error("Invalid subscriptions - invalid topic"));return false}if(typeof iqos!=="number"){stream.emit("error",new Error("Invalid subscriptions - invalid qos"));return false}if(version===5){const nl=subs[i].nl||false;if(typeof nl!=="boolean"){stream.emit("error",new Error("Invalid subscriptions - invalid No Local"));return false}const rap=subs[i].rap||false;if(typeof rap!=="boolean"){stream.emit("error",new Error("Invalid subscriptions - invalid Retain as Published"));return false}const rh=subs[i].rh||0;if(typeof rh!=="number"||rh>2){stream.emit("error",new Error("Invalid subscriptions - invalid Retain Handling"));return false}}length+=Buffer.byteLength(itopic)+2+1}}else{stream.emit("error",new Error("Invalid subscriptions"));return false}debug("subscribe: writing to stream: %o",protocol.SUBSCRIBE_HEADER);stream.write(protocol.SUBSCRIBE_HEADER[1][dup?1:0][0]);writeVarByteInt(stream,length);writeNumber(stream,id);if(propertiesData!==null){propertiesData.write()}let result=true;for(const sub of subs){const jtopic=sub.topic;const jqos=sub.qos;const jnl=+sub.nl;const jrap=+sub.rap;const jrh=sub.rh;let joptions;writeString(stream,jtopic);joptions=protocol.SUBSCRIBE_OPTIONS_QOS[jqos];if(version===5){joptions|=jnl?protocol.SUBSCRIBE_OPTIONS_NL:0;joptions|=jrap?protocol.SUBSCRIBE_OPTIONS_RAP:0;joptions|=jrh?protocol.SUBSCRIBE_OPTIONS_RH[jrh]:0}result=stream.write(Buffer.from([joptions]))}return result}function suback(packet,stream,opts){const version=opts?opts.protocolVersion:4;const settings=packet||{};const id=settings.messageId;const granted=settings.granted;const properties=settings.properties;let length=0;if(typeof id!=="number"){stream.emit("error",new Error("Invalid messageId"));return false}else length+=2;if(typeof granted==="object"&&granted.length){for(let i=0;i<granted.length;i+=1){if(typeof granted[i]!=="number"){stream.emit("error",new Error("Invalid qos vector"));return false}length+=1}}else{stream.emit("error",new Error("Invalid qos vector"));return false}let propertiesData=null;if(version===5){propertiesData=getPropertiesByMaximumPacketSize(stream,properties,opts,length);if(!propertiesData){return false}length+=propertiesData.length}stream.write(protocol.SUBACK_HEADER);writeVarByteInt(stream,length);writeNumber(stream,id);if(propertiesData!==null){propertiesData.write()}return stream.write(Buffer.from(granted))}function unsubscribe(packet,stream,opts){const version=opts?opts.protocolVersion:4;const settings=packet||{};const id=settings.messageId;const dup=settings.dup?protocol.DUP_MASK:0;const unsubs=settings.unsubscriptions;const properties=settings.properties;let length=0;if(typeof id!=="number"){stream.emit("error",new Error("Invalid messageId"));return false}else{length+=2}if(typeof unsubs==="object"&&unsubs.length){for(let i=0;i<unsubs.length;i+=1){if(typeof unsubs[i]!=="string"){stream.emit("error",new Error("Invalid unsubscriptions"));return false}length+=Buffer.byteLength(unsubs[i])+2}}else{stream.emit("error",new Error("Invalid unsubscriptions"));return false}let propertiesData=null;if(version===5){propertiesData=getProperties(stream,properties);if(!propertiesData){return false}length+=propertiesData.length}stream.write(protocol.UNSUBSCRIBE_HEADER[1][dup?1:0][0]);writeVarByteInt(stream,length);writeNumber(stream,id);if(propertiesData!==null){propertiesData.write()}let result=true;for(let j=0;j<unsubs.length;j++){result=writeString(stream,unsubs[j])}return result}function unsuback(packet,stream,opts){const version=opts?opts.protocolVersion:4;const settings=packet||{};const id=settings.messageId;const dup=settings.dup?protocol.DUP_MASK:0;const granted=settings.granted;const properties=settings.properties;const type=settings.cmd;const qos=0;let length=2;if(typeof id!=="number"){stream.emit("error",new Error("Invalid messageId"));return false}if(version===5){if(typeof granted==="object"&&granted.length){for(let i=0;i<granted.length;i+=1){if(typeof granted[i]!=="number"){stream.emit("error",new Error("Invalid qos vector"));return false}length+=1}}else{stream.emit("error",new Error("Invalid qos vector"));return false}}let propertiesData=null;if(version===5){propertiesData=getPropertiesByMaximumPacketSize(stream,properties,opts,length);if(!propertiesData){return false}length+=propertiesData.length}stream.write(protocol.ACKS[type][qos][dup][0]);writeVarByteInt(stream,length);writeNumber(stream,id);if(propertiesData!==null){propertiesData.write()}if(version===5){stream.write(Buffer.from(granted))}return true}function emptyPacket(packet,stream,opts){return stream.write(protocol.EMPTY[packet.cmd])}function disconnect(packet,stream,opts){const version=opts?opts.protocolVersion:4;const settings=packet||{};const reasonCode=settings.reasonCode;const properties=settings.properties;let length=version===5?1:0;let propertiesData=null;if(version===5){propertiesData=getPropertiesByMaximumPacketSize(stream,properties,opts,length);if(!propertiesData){return false}length+=propertiesData.length}stream.write(Buffer.from([protocol.codes.disconnect<<4]));writeVarByteInt(stream,length);if(version===5){stream.write(Buffer.from([reasonCode]))}if(propertiesData!==null){propertiesData.write()}return true}function auth(packet,stream,opts){const version=opts?opts.protocolVersion:4;const settings=packet||{};const reasonCode=settings.reasonCode;const properties=settings.properties;let length=version===5?1:0;if(version!==5)stream.emit("error",new Error("Invalid mqtt version for auth packet"));const propertiesData=getPropertiesByMaximumPacketSize(stream,properties,opts,length);if(!propertiesData){return false}length+=propertiesData.length;stream.write(Buffer.from([protocol.codes.auth<<4]));writeVarByteInt(stream,length);stream.write(Buffer.from([reasonCode]));if(propertiesData!==null){propertiesData.write()}return true}const varByteIntCache={};function writeVarByteInt(stream,num){if(num>protocol.VARBYTEINT_MAX){stream.emit("error",new Error(`Invalid variable byte integer: ${num}`));return false}let buffer=varByteIntCache[num];if(!buffer){buffer=genBufVariableByteInt(num);if(num<16384)varByteIntCache[num]=buffer}debug("writeVarByteInt: writing to stream: %o",buffer);return stream.write(buffer)}function writeString(stream,string){const strlen=Buffer.byteLength(string);writeNumber(stream,strlen);debug("writeString: %s",string);return stream.write(string,"utf8")}function writeStringPair(stream,name,value){writeString(stream,name);writeString(stream,value)}function writeNumberCached(stream,number){debug("writeNumberCached: number: %d",number);debug("writeNumberCached: %o",numCache[number]);return stream.write(numCache[number])}function writeNumberGenerated(stream,number){const generatedNumber=generateNumber(number);debug("writeNumberGenerated: %o",generatedNumber);return stream.write(generatedNumber)}function write4ByteNumber(stream,number){const generated4ByteBuffer=generate4ByteBuffer(number);debug("write4ByteNumber: %o",generated4ByteBuffer);return stream.write(generated4ByteBuffer)}function writeStringOrBuffer(stream,toWrite){if(typeof toWrite==="string"){writeString(stream,toWrite)}else if(toWrite){writeNumber(stream,toWrite.length);stream.write(toWrite)}else writeNumber(stream,0)}function getProperties(stream,properties){if(typeof properties!=="object"||properties.length!=null){return{length:1,write(){writeProperties(stream,{},0)}}}let propertiesLength=0;function getLengthProperty(name,value){const type=protocol.propertiesTypes[name];let length=0;switch(type){case"byte":{if(typeof value!=="boolean"){stream.emit("error",new Error(`Invalid ${name}: ${value}`));return false}length+=1+1;break}case"int8":{if(typeof value!=="number"||value<0||value>255){stream.emit("error",new Error(`Invalid ${name}: ${value}`));return false}length+=1+1;break}case"binary":{if(value&&value===null){stream.emit("error",new Error(`Invalid ${name}: ${value}`));return false}length+=1+Buffer.byteLength(value)+2;break}case"int16":{if(typeof value!=="number"||value<0||value>65535){stream.emit("error",new Error(`Invalid ${name}: ${value}`));return false}length+=1+2;break}case"int32":{if(typeof value!=="number"||value<0||value>4294967295){stream.emit("error",new Error(`Invalid ${name}: ${value}`));return false}length+=1+4;break}case"var":{if(typeof value!=="number"||value<0||value>268435455){stream.emit("error",new Error(`Invalid ${name}: ${value}`));return false}length+=1+Buffer.byteLength(genBufVariableByteInt(value));break}case"string":{if(typeof value!=="string"){stream.emit("error",new Error(`Invalid ${name}: ${value}`));return false}length+=1+2+Buffer.byteLength(value.toString());break}case"pair":{if(typeof value!=="object"){stream.emit("error",new Error(`Invalid ${name}: ${value}`));return false}length+=Object.getOwnPropertyNames(value).reduce((result,name)=>{const currentValue=value[name];if(Array.isArray(currentValue)){result+=currentValue.reduce((currentLength,value)=>{currentLength+=1+2+Buffer.byteLength(name.toString())+2+Buffer.byteLength(value.toString());return currentLength},0)}else{result+=1+2+Buffer.byteLength(name.toString())+2+Buffer.byteLength(value[name].toString())}return result},0);break}default:{stream.emit("error",new Error(`Invalid property ${name}: ${value}`));return false}}return length}if(properties){for(const propName in properties){let propLength=0;let propValueLength=0;const propValue=properties[propName];if(Array.isArray(propValue)){for(let valueIndex=0;valueIndex<propValue.length;valueIndex++){propValueLength=getLengthProperty(propName,propValue[valueIndex]);if(!propValueLength){return false}propLength+=propValueLength}}else{propValueLength=getLengthProperty(propName,propValue);if(!propValueLength){return false}propLength=propValueLength}if(!propLength)return false;propertiesLength+=propLength}}const propertiesLengthLength=Buffer.byteLength(genBufVariableByteInt(propertiesLength));return{length:propertiesLengthLength+propertiesLength,write(){writeProperties(stream,properties,propertiesLength)}}}function getPropertiesByMaximumPacketSize(stream,properties,opts,length){const mayEmptyProps=["reasonString","userProperties"];const maximumPacketSize=opts&&opts.properties&&opts.properties.maximumPacketSize?opts.properties.maximumPacketSize:0;let propertiesData=getProperties(stream,properties);if(maximumPacketSize){while(length+propertiesData.length>maximumPacketSize){const currentMayEmptyProp=mayEmptyProps.shift();if(currentMayEmptyProp&&properties[currentMayEmptyProp]){delete properties[currentMayEmptyProp];propertiesData=getProperties(stream,properties)}else{return false}}}return propertiesData}function writeProperty(stream,propName,value){const type=protocol.propertiesTypes[propName];switch(type){case"byte":{stream.write(Buffer.from([protocol.properties[propName]]));stream.write(Buffer.from([+value]));break}case"int8":{stream.write(Buffer.from([protocol.properties[propName]]));stream.write(Buffer.from([value]));break}case"binary":{stream.write(Buffer.from([protocol.properties[propName]]));writeStringOrBuffer(stream,value);break}case"int16":{stream.write(Buffer.from([protocol.properties[propName]]));writeNumber(stream,value);break}case"int32":{stream.write(Buffer.from([protocol.properties[propName]]));write4ByteNumber(stream,value);break}case"var":{stream.write(Buffer.from([protocol.properties[propName]]));writeVarByteInt(stream,value);break}case"string":{stream.write(Buffer.from([protocol.properties[propName]]));writeString(stream,value);break}case"pair":{Object.getOwnPropertyNames(value).forEach(name=>{const currentValue=value[name];if(Array.isArray(currentValue)){currentValue.forEach(value=>{stream.write(Buffer.from([protocol.properties[propName]]));writeStringPair(stream,name.toString(),value.toString())})}else{stream.write(Buffer.from([protocol.properties[propName]]));writeStringPair(stream,name.toString(),currentValue.toString())}});break}default:{stream.emit("error",new Error(`Invalid property ${propName} value: ${value}`));return false}}}function writeProperties(stream,properties,propertiesLength){writeVarByteInt(stream,propertiesLength);for(const propName in properties){if(Object.prototype.hasOwnProperty.call(properties,propName)&&properties[propName]!==null){const value=properties[propName];if(Array.isArray(value)){for(let valueIndex=0;valueIndex<value.length;valueIndex++){writeProperty(stream,propName,value[valueIndex])}}else{writeProperty(stream,propName,value)}}}}function byteLength(bufOrString){if(!bufOrString)return 0;else if(bufOrString instanceof Buffer)return bufOrString.length;else return Buffer.byteLength(bufOrString)}function isStringOrBuffer(field){return typeof field==="string"||field instanceof Buffer}module.exports=generate}).call(this)}).call(this,require("buffer").Buffer)},{"./constants":65,"./numbers":68,buffer:54,debug:56,"process-nextick-args":100}],72:[function(require,module,exports){(function(process,global){(function(){"use strict";const EventEmitter=require("events").EventEmitter;const Store=require("./store");const TopicAliasRecv=require("./topic-alias-recv");const TopicAliasSend=require("./topic-alias-send");const mqttPacket=require("mqtt-packet");const DefaultMessageIdProvider=require("./default-message-id-provider");const Writable=require("readable-stream").Writable;const inherits=require("inherits");const reInterval=require("reinterval");const clone=require("rfdc/default");const validations=require("./validations");const xtend=require("xtend");const debug=require("debug")("mqttjs:client");const nextTick=process?process.nextTick:function(callback){setTimeout(callback,0)};const setImmediate=global.setImmediate||function(callback){nextTick(callback)};const defaultConnectOptions={keepalive:60,reschedulePings:true,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:true,resubscribe:true};const socketErrors=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"];const errors={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function defaultId(){return"mqttjs_"+Math.random().toString(16).substr(2,8)}function applyTopicAlias(client,packet){if(client.options.protocolVersion===5){if(packet.cmd==="publish"){let alias;if(packet.properties){alias=packet.properties.topicAlias}const topic=packet.topic.toString();if(client.topicAliasSend){if(alias){if(topic.length!==0){debug("applyTopicAlias :: register topic: %s - alias: %d",topic,alias);if(!client.topicAliasSend.put(topic,alias)){debug("applyTopicAlias :: error out of range. topic: %s - alias: %d",topic,alias);return new Error("Sending Topic Alias out of range")}}}else{if(topic.length!==0){if(client.options.autoAssignTopicAlias){alias=client.topicAliasSend.getAliasByTopic(topic);if(alias){packet.topic="";packet.properties={...packet.properties,topicAlias:alias};debug("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",topic,alias)}else{alias=client.topicAliasSend.getLruAlias();client.topicAliasSend.put(topic,alias);packet.properties={...packet.properties,topicAlias:alias};debug("applyTopicAlias :: auto assign topic: %s - alias: %d",topic,alias)}}else if(client.options.autoUseTopicAlias){alias=client.topicAliasSend.getAliasByTopic(topic);if(alias){packet.topic="";packet.properties={...packet.properties,topicAlias:alias};debug("applyTopicAlias :: auto use topic: %s - alias: %d",topic,alias)}}}}}else if(alias){debug("applyTopicAlias :: error out of range. topic: %s - alias: %d",topic,alias);return new Error("Sending Topic Alias out of range")}}}}function removeTopicAliasAndRecoverTopicName(client,packet){let alias;if(packet.properties){alias=packet.properties.topicAlias}let topic=packet.topic.toString();if(topic.length===0){if(typeof alias==="undefined"){return new Error("Unregistered Topic Alias")}else{topic=client.topicAliasSend.getTopicByAlias(alias);if(typeof topic==="undefined"){return new Error("Unregistered Topic Alias")}else{packet.topic=topic}}}if(alias){delete packet.properties.topicAlias}}function sendPacket(client,packet,cb){debug("sendPacket :: packet: %O",packet);debug("sendPacket :: emitting `packetsend`");client.emit("packetsend",packet);debug("sendPacket :: writing to stream");const result=mqttPacket.writeToStream(packet,client.stream,client.options);debug("sendPacket :: writeToStream result %s",result);if(!result&&cb&&cb!==nop){debug("sendPacket :: handle events on `drain` once through callback.");client.stream.once("drain",cb)}else if(cb){debug("sendPacket :: invoking cb");cb()}}function flush(queue){if(queue){debug("flush: queue exists? %b",!!queue);Object.keys(queue).forEach(function(messageId){if(typeof queue[messageId].cb==="function"){queue[messageId].cb(new Error("Connection closed"));delete queue[messageId]}})}}function flushVolatile(queue){if(queue){debug("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function");Object.keys(queue).forEach(function(messageId){if(queue[messageId].volatile&&typeof queue[messageId].cb==="function"){queue[messageId].cb(new Error("Connection closed"));delete queue[messageId]}})}}function storeAndSend(client,packet,cb,cbStorePut){debug("storeAndSend :: store packet with cmd %s to outgoingStore",packet.cmd);let storePacket=packet;let err;if(storePacket.cmd==="publish"){storePacket=clone(packet);err=removeTopicAliasAndRecoverTopicName(client,storePacket);if(err){return cb&&cb(err)}}client.outgoingStore.put(storePacket,function storedPacket(err){if(err){return cb&&cb(err)}cbStorePut();sendPacket(client,packet,cb)})}function nop(error){debug("nop ::",error)}function MqttClient(streamBuilder,options){let k;const that=this;if(!(this instanceof MqttClient)){return new MqttClient(streamBuilder,options)}this.options=options||{};for(k in defaultConnectOptions){if(typeof this.options[k]==="undefined"){this.options[k]=defaultConnectOptions[k]}else{this.options[k]=options[k]}}debug("MqttClient :: options.protocol",options.protocol);debug("MqttClient :: options.protocolVersion",options.protocolVersion);debug("MqttClient :: options.username",options.username);debug("MqttClient :: options.keepalive",options.keepalive);debug("MqttClient :: options.reconnectPeriod",options.reconnectPeriod);debug("MqttClient :: options.rejectUnauthorized",options.rejectUnauthorized);debug("MqttClient :: options.topicAliasMaximum",options.topicAliasMaximum);this.options.clientId=typeof options.clientId==="string"?options.clientId:defaultId();debug("MqttClient :: clientId",this.options.clientId);this.options.customHandleAcks=options.protocolVersion===5&&options.customHandleAcks?options.customHandleAcks:function(){arguments[3](0)};this.streamBuilder=streamBuilder;this.messageIdProvider=typeof this.options.messageIdProvider==="undefined"?new DefaultMessageIdProvider:this.options.messageIdProvider;this.outgoingStore=options.outgoingStore||new Store;this.incomingStore=options.incomingStore||new Store;this.queueQoSZero=options.queueQoSZero===undefined?true:options.queueQoSZero;this._resubscribeTopics={};this.messageIdToTopic={};this.pingTimer=null;this.connected=false;this.disconnecting=false;this.queue=[];this.connackTimer=null;this.reconnectTimer=null;this._storeProcessing=false;this._packetIdsDuringStoreProcessing={};this._storeProcessingQueue=[];this.outgoing={};this._firstConnection=true;if(options.topicAliasMaximum>0){if(options.topicAliasMaximum>65535){debug("MqttClient :: options.topicAliasMaximum is out of range")}else{this.topicAliasRecv=new TopicAliasRecv(options.topicAliasMaximum)}}this.on("connect",function(){const queue=this.queue;function deliver(){const entry=queue.shift();debug("deliver :: entry %o",entry);let packet=null;if(!entry){that._resubscribe();return}packet=entry.packet;debug("deliver :: call _sendPacket for %o",packet);let send=true;if(packet.messageId&&packet.messageId!==0){if(!that.messageIdProvider.register(packet.messageId)){send=false}}if(send){that._sendPacket(packet,function(err){if(entry.cb){entry.cb(err)}deliver()})}else{debug("messageId: %d has already used. The message is skipped and removed.",packet.messageId);deliver()}}debug("connect :: sending queued packets");deliver()});this.on("close",function(){debug("close :: connected set to `false`");this.connected=false;debug("close :: clearing connackTimer");clearTimeout(this.connackTimer);debug("close :: clearing ping timer");if(that.pingTimer!==null){that.pingTimer.clear();that.pingTimer=null}if(this.topicAliasRecv){this.topicAliasRecv.clear()}debug("close :: calling _setupReconnect");this._setupReconnect()});EventEmitter.call(this);debug("MqttClient :: setting up stream");this._setupStream()}inherits(MqttClient,EventEmitter);MqttClient.prototype._setupStream=function(){const that=this;const writable=new Writable;const parser=mqttPacket.parser(this.options);let completeParse=null;const packets=[];debug("_setupStream :: calling method to clear reconnect");this._clearReconnect();debug("_setupStream :: using streamBuilder provided to client to create stream");this.stream=this.streamBuilder(this);parser.on("packet",function(packet){debug("parser :: on packet push to packets array.");packets.push(packet)});function nextTickWork(){if(packets.length){nextTick(work)}else{const done=completeParse;completeParse=null;done()}}function work(){debug("work :: getting next packet in queue");const packet=packets.shift();if(packet){debug("work :: packet pulled from queue");that._handlePacket(packet,nextTickWork)}else{debug("work :: no packets in queue");const done=completeParse;completeParse=null;debug("work :: done flag is %s",!!done);if(done)done()}}writable._write=function(buf,enc,done){completeParse=done;debug("writable stream :: parsing buffer");parser.parse(buf);work()};function streamErrorHandler(error){debug("streamErrorHandler :: error",error.message);if(socketErrors.includes(error.code)){debug("streamErrorHandler :: emitting error");that.emit("error",error)}else{nop(error)}}debug("_setupStream :: pipe stream to writable stream");this.stream.pipe(writable);this.stream.on("error",streamErrorHandler);this.stream.on("close",function(){debug("(%s)stream :: on close",that.options.clientId);flushVolatile(that.outgoing);debug("stream: emit close to MqttClient");that.emit("close")});debug("_setupStream: sending packet `connect`");const connectPacket=Object.create(this.options);connectPacket.cmd="connect";if(this.topicAliasRecv){if(!connectPacket.properties){connectPacket.properties={}}if(this.topicAliasRecv){connectPacket.properties.topicAliasMaximum=this.topicAliasRecv.max}}sendPacket(this,connectPacket);parser.on("error",this.emit.bind(this,"error"));if(this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData){that.end(()=>this.emit("error",new Error("Packet has no Authentication Method")));return this}if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket==="object"){const authPacket=xtend({cmd:"auth",reasonCode:0},this.options.authPacket);sendPacket(this,authPacket)}}this.stream.setMaxListeners(1e3);clearTimeout(this.connackTimer);this.connackTimer=setTimeout(function(){debug("!!connectTimeout hit!! Calling _cleanUp with force `true`");that._cleanUp(true)},this.options.connectTimeout)};MqttClient.prototype._handlePacket=function(packet,done){const options=this.options;if(options.protocolVersion===5&&options.properties&&options.properties.maximumPacketSize&&options.properties.maximumPacketSize<packet.length){this.emit("error",new Error("exceeding packets size "+packet.cmd));this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}});return this}debug("_handlePacket :: emitting packetreceive");this.emit("packetreceive",packet);switch(packet.cmd){case"publish":this._handlePublish(packet,done);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(packet);done();break;case"pubrel":this._handlePubrel(packet,done);break;case"connack":this._handleConnack(packet);done();break;case"auth":this._handleAuth(packet);done();break;case"pingresp":this._handlePingresp(packet);done();break;case"disconnect":this._handleDisconnect(packet);done();break;default:break}};MqttClient.prototype._checkDisconnecting=function(callback){if(this.disconnecting){if(callback&&callback!==nop){callback(new Error("client disconnecting"))}else{this.emit("error",new Error("client disconnecting"))}}return this.disconnecting};MqttClient.prototype.publish=function(topic,message,opts,callback){debug("publish :: message `%s` to topic `%s`",message,topic);const options=this.options;if(typeof opts==="function"){callback=opts;opts=null}const defaultOpts={qos:0,retain:false,dup:false};opts=xtend(defaultOpts,opts);if(this._checkDisconnecting(callback)){return this}const that=this;const publishProc=function(){let messageId=0;if(opts.qos===1||opts.qos===2){messageId=that._nextId();if(messageId===null){debug("No messageId left");return false}}const packet={cmd:"publish",topic:topic,payload:message,qos:opts.qos,retain:opts.retain,messageId:messageId,dup:opts.dup};if(options.protocolVersion===5){packet.properties=opts.properties}debug("publish :: qos",opts.qos);switch(opts.qos){case 1:case 2:that.outgoing[packet.messageId]={volatile:false,cb:callback||nop};debug("MqttClient:publish: packet cmd: %s",packet.cmd);that._sendPacket(packet,undefined,opts.cbStorePut);break;default:debug("MqttClient:publish: packet cmd: %s",packet.cmd);that._sendPacket(packet,callback,opts.cbStorePut);break}return true};if(this._storeProcessing||this._storeProcessingQueue.length>0||!publishProc()){this._storeProcessingQueue.push({invoke:publishProc,cbStorePut:opts.cbStorePut,callback:callback})}return this};MqttClient.prototype.subscribe=function(){const that=this;const args=new Array(arguments.length);for(let i=0;i<arguments.length;i++){args[i]=arguments[i]}const subs=[];let obj=args.shift();const resubscribe=obj.resubscribe;let callback=args.pop()||nop;let opts=args.pop();const version=this.options.protocolVersion;delete obj.resubscribe;if(typeof obj==="string"){obj=[obj]}if(typeof callback!=="function"){opts=callback;callback=nop}const invalidTopic=validations.validateTopics(obj);if(invalidTopic!==null){setImmediate(callback,new Error("Invalid topic "+invalidTopic));return this}if(this._checkDisconnecting(callback)){debug("subscribe: discconecting true");return this}const defaultOpts={qos:0};if(version===5){defaultOpts.nl=false;defaultOpts.rap=false;defaultOpts.rh=0}opts=xtend(defaultOpts,opts);if(Array.isArray(obj)){obj.forEach(function(topic){debug("subscribe: array topic %s",topic);if(!Object.prototype.hasOwnProperty.call(that._resubscribeTopics,topic)||that._resubscribeTopics[topic].qos<opts.qos||resubscribe){const currentOpts={topic:topic,qos:opts.qos};if(version===5){currentOpts.nl=opts.nl;currentOpts.rap=opts.rap;currentOpts.rh=opts.rh;currentOpts.properties=opts.properties}debug("subscribe: pushing topic `%s` and qos `%s` to subs list",currentOpts.topic,currentOpts.qos);subs.push(currentOpts)}})}else{Object.keys(obj).forEach(function(k){debug("subscribe: object topic %s",k);if(!Object.prototype.hasOwnProperty.call(that._resubscribeTopics,k)||that._resubscribeTopics[k].qos<obj[k].qos||resubscribe){const currentOpts={topic:k,qos:obj[k].qos};if(version===5){currentOpts.nl=obj[k].nl;currentOpts.rap=obj[k].rap;currentOpts.rh=obj[k].rh;currentOpts.properties=opts.properties}debug("subscribe: pushing `%s` to subs list",currentOpts);subs.push(currentOpts)}})}if(!subs.length){callback(null,[]);return this}const subscribeProc=function(){const messageId=that._nextId();if(messageId===null){debug("No messageId left");return false}const packet={cmd:"subscribe",subscriptions:subs,qos:1,retain:false,dup:false,messageId:messageId};if(opts.properties){packet.properties=opts.properties}if(that.options.resubscribe){debug("subscribe :: resubscribe true");const topics=[];subs.forEach(function(sub){if(that.options.reconnectPeriod>0){const topic={qos:sub.qos};if(version===5){topic.nl=sub.nl||false;topic.rap=sub.rap||false;topic.rh=sub.rh||0;topic.properties=sub.properties}that._resubscribeTopics[sub.topic]=topic;topics.push(sub.topic)}});that.messageIdToTopic[packet.messageId]=topics}that.outgoing[packet.messageId]={volatile:true,cb:function(err,packet){if(!err){const granted=packet.granted;for(let i=0;i<granted.length;i+=1){subs[i].qos=granted[i]}}callback(err,subs)}};debug("subscribe :: call _sendPacket");that._sendPacket(packet);return true};if(this._storeProcessing||this._storeProcessingQueue.length>0||!subscribeProc()){this._storeProcessingQueue.push({invoke:subscribeProc,callback:callback})}return this};MqttClient.prototype.unsubscribe=function(){const that=this;const args=new Array(arguments.length);for(let i=0;i<arguments.length;i++){args[i]=arguments[i]}let topic=args.shift();let callback=args.pop()||nop;let opts=args.pop();if(typeof topic==="string"){topic=[topic]}if(typeof callback!=="function"){opts=callback;callback=nop}const invalidTopic=validations.validateTopics(topic);if(invalidTopic!==null){setImmediate(callback,new Error("Invalid topic "+invalidTopic));return this}if(that._checkDisconnecting(callback)){return this}const unsubscribeProc=function(){const messageId=that._nextId();if(messageId===null){debug("No messageId left");return false}const packet={cmd:"unsubscribe",qos:1,messageId:messageId};if(typeof topic==="string"){packet.unsubscriptions=[topic]}else if(Array.isArray(topic)){packet.unsubscriptions=topic}if(that.options.resubscribe){packet.unsubscriptions.forEach(function(topic){delete that._resubscribeTopics[topic]})}if(typeof opts==="object"&&opts.properties){packet.properties=opts.properties}that.outgoing[packet.messageId]={volatile:true,cb:callback};debug("unsubscribe: call _sendPacket");that._sendPacket(packet);return true};if(this._storeProcessing||this._storeProcessingQueue.length>0||!unsubscribeProc()){this._storeProcessingQueue.push({invoke:unsubscribeProc,callback:callback})}return this};MqttClient.prototype.end=function(force,opts,cb){const that=this;debug("end :: (%s)",this.options.clientId);if(force==null||typeof force!=="boolean"){cb=opts||nop;opts=force;force=false;if(typeof opts!=="object"){cb=opts;opts=null;if(typeof cb!=="function"){cb=nop}}}if(typeof opts!=="object"){cb=opts;opts=null}debug("end :: cb? %s",!!cb);cb=cb||nop;function closeStores(){debug("end :: closeStores: closing incoming and outgoing stores");that.disconnected=true;that.incomingStore.close(function(e1){that.outgoingStore.close(function(e2){debug("end :: closeStores: emitting end");that.emit("end");if(cb){const err=e1||e2;debug("end :: closeStores: invoking callback with args");cb(err)}})});if(that._deferredReconnect){that._deferredReconnect()}}function finish(){debug("end :: (%s) :: finish :: calling _cleanUp with force %s",that.options.clientId,force);that._cleanUp(force,()=>{debug("end :: finish :: calling process.nextTick on closeStores");nextTick(closeStores.bind(that))},opts)}if(this.disconnecting){cb();return this}this._clearReconnect();this.disconnecting=true;if(!force&&Object.keys(this.outgoing).length>0){debug("end :: (%s) :: calling finish in 10ms once outgoing is empty",that.options.clientId);this.once("outgoingEmpty",setTimeout.bind(null,finish,10))}else{debug("end :: (%s) :: immediately calling finish",that.options.clientId);finish()}return this};MqttClient.prototype.removeOutgoingMessage=function(messageId){const cb=this.outgoing[messageId]?this.outgoing[messageId].cb:null;delete this.outgoing[messageId];this.outgoingStore.del({messageId:messageId},function(){cb(new Error("Message removed"))});return this};MqttClient.prototype.reconnect=function(opts){debug("client reconnect");const that=this;const f=function(){if(opts){that.options.incomingStore=opts.incomingStore;that.options.outgoingStore=opts.outgoingStore}else{that.options.incomingStore=null;that.options.outgoingStore=null}that.incomingStore=that.options.incomingStore||new Store;that.outgoingStore=that.options.outgoingStore||new Store;that.disconnecting=false;that.disconnected=false;that._deferredReconnect=null;that._reconnect()};if(this.disconnecting&&!this.disconnected){this._deferredReconnect=f}else{f()}return this};MqttClient.prototype._reconnect=function(){debug("_reconnect: emitting reconnect to client");this.emit("reconnect");if(this.connected){this.end(()=>{this._setupStream()});debug("client already connected. disconnecting first.")}else{debug("_reconnect: calling _setupStream");this._setupStream()}};MqttClient.prototype._setupReconnect=function(){const that=this;if(!that.disconnecting&&!that.reconnectTimer&&that.options.reconnectPeriod>0){if(!this.reconnecting){debug("_setupReconnect :: emit `offline` state");this.emit("offline");debug("_setupReconnect :: set `reconnecting` to `true`");this.reconnecting=true}debug("_setupReconnect :: setting reconnectTimer for %d ms",that.options.reconnectPeriod);that.reconnectTimer=setInterval(function(){debug("reconnectTimer :: reconnect triggered!");that._reconnect()},that.options.reconnectPeriod)}else{debug("_setupReconnect :: doing nothing...")}};MqttClient.prototype._clearReconnect=function(){debug("_clearReconnect : clearing reconnect timer");if(this.reconnectTimer){clearInterval(this.reconnectTimer);this.reconnectTimer=null}};MqttClient.prototype._cleanUp=function(forced,done){const opts=arguments[2];if(done){debug("_cleanUp :: done callback provided for on stream close");this.stream.on("close",done)}debug("_cleanUp :: forced? %s",forced);if(forced){if(this.options.reconnectPeriod===0&&this.options.clean){flush(this.outgoing)}debug("_cleanUp :: (%s) :: destroying stream",this.options.clientId);this.stream.destroy()}else{const packet=xtend({cmd:"disconnect"},opts);debug("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId);this._sendPacket(packet,setImmediate.bind(null,this.stream.end.bind(this.stream)))}if(!this.disconnecting){debug("_cleanUp :: client not disconnecting. Clearing and resetting reconnect.");this._clearReconnect();this._setupReconnect()}if(this.pingTimer!==null){debug("_cleanUp :: clearing pingTimer");this.pingTimer.clear();this.pingTimer=null}if(done&&!this.connected){debug("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId);this.stream.removeListener("close",done);done()}};MqttClient.prototype._sendPacket=function(packet,cb,cbStorePut){debug("_sendPacket :: (%s) ::  start",this.options.clientId);cbStorePut=cbStorePut||nop;cb=cb||nop;const err=applyTopicAlias(this,packet);if(err){cb(err);return}if(!this.connected){if(packet.cmd==="auth"){this._shiftPingInterval();sendPacket(this,packet,cb);return}debug("_sendPacket :: client not connected. Storing packet offline.");this._storePacket(packet,cb,cbStorePut);return}this._shiftPingInterval();switch(packet.cmd){case"publish":break;case"pubrel":storeAndSend(this,packet,cb,cbStorePut);return;default:sendPacket(this,packet,cb);return}switch(packet.qos){case 2:case 1:storeAndSend(this,packet,cb,cbStorePut);break;case 0:default:sendPacket(this,packet,cb);break}debug("_sendPacket :: (%s) ::  end",this.options.clientId)};MqttClient.prototype._storePacket=function(packet,cb,cbStorePut){debug("_storePacket :: packet: %o",packet);debug("_storePacket :: cb? %s",!!cb);cbStorePut=cbStorePut||nop;let storePacket=packet;if(storePacket.cmd==="publish"){storePacket=clone(packet);const err=removeTopicAliasAndRecoverTopicName(this,storePacket);if(err){return cb&&cb(err)}}if((storePacket.qos||0)===0&&this.queueQoSZero||storePacket.cmd!=="publish"){this.queue.push({packet:storePacket,cb:cb})}else if(storePacket.qos>0){cb=this.outgoing[storePacket.messageId]?this.outgoing[storePacket.messageId].cb:null;this.outgoingStore.put(storePacket,function(err){if(err){return cb&&cb(err)}cbStorePut()})}else if(cb){cb(new Error("No connection to broker"))}};MqttClient.prototype._setupPingTimer=function(){debug("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const that=this;if(!this.pingTimer&&this.options.keepalive){this.pingResp=true;this.pingTimer=reInterval(function(){that._checkPing()},this.options.keepalive*1e3)}};MqttClient.prototype._shiftPingInterval=function(){if(this.pingTimer&&this.options.keepalive&&this.options.reschedulePings){this.pingTimer.reschedule(this.options.keepalive*1e3)}};MqttClient.prototype._checkPing=function(){debug("_checkPing :: checking ping...");if(this.pingResp){debug("_checkPing :: ping response received. Clearing flag and sending `pingreq`");this.pingResp=false;this._sendPacket({cmd:"pingreq"})}else{debug("_checkPing :: calling _cleanUp with force true");this._cleanUp(true)}};MqttClient.prototype._handlePingresp=function(){this.pingResp=true};MqttClient.prototype._handleConnack=function(packet){debug("_handleConnack");const options=this.options;const version=options.protocolVersion;const rc=version===5?packet.reasonCode:packet.returnCode;clearTimeout(this.connackTimer);delete this.topicAliasSend;if(packet.properties){if(packet.properties.topicAliasMaximum){if(packet.properties.topicAliasMaximum>65535){this.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}if(packet.properties.topicAliasMaximum>0){this.topicAliasSend=new TopicAliasSend(packet.properties.topicAliasMaximum)}}if(packet.properties.serverKeepAlive&&options.keepalive){options.keepalive=packet.properties.serverKeepAlive;this._shiftPingInterval()}if(packet.properties.maximumPacketSize){if(!options.properties){options.properties={}}options.properties.maximumPacketSize=packet.properties.maximumPacketSize}}if(rc===0){this.reconnecting=false;this._onConnect(packet)}else if(rc>0){const err=new Error("Connection refused: "+errors[rc]);err.code=rc;this.emit("error",err)}};MqttClient.prototype._handleAuth=function(packet){const options=this.options;const version=options.protocolVersion;const rc=version===5?packet.reasonCode:packet.returnCode;if(version!==5){const err=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+version);err.code=rc;this.emit("error",err);return}const that=this;this.handleAuth(packet,function(err,packet){if(err){that.emit("error",err);return}if(rc===24){that.reconnecting=false;that._sendPacket(packet)}else{const error=new Error("Connection refused: "+errors[rc]);err.code=rc;that.emit("error",error)}})};MqttClient.prototype.handleAuth=function(packet,callback){callback()};MqttClient.prototype._handlePublish=function(packet,done){debug("_handlePublish: packet %o",packet);done=typeof done!=="undefined"?done:nop;let topic=packet.topic.toString();const message=packet.payload;const qos=packet.qos;const messageId=packet.messageId;const that=this;const options=this.options;const validReasonCodes=[0,16,128,131,135,144,145,151,153];if(this.options.protocolVersion===5){let alias;if(packet.properties){alias=packet.properties.topicAlias}if(typeof alias!=="undefined"){if(topic.length===0){if(alias>0&&alias<=65535){const gotTopic=this.topicAliasRecv.getTopicByAlias(alias);if(gotTopic){topic=gotTopic;debug("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",topic,alias)}else{debug("_handlePublish :: unregistered topic alias. alias: %d",alias);this.emit("error",new Error("Received unregistered Topic Alias"));return}}else{debug("_handlePublish :: topic alias out of range. alias: %d",alias);this.emit("error",new Error("Received Topic Alias is out of range"));return}}else{if(this.topicAliasRecv.put(topic,alias)){debug("_handlePublish :: registered topic: %s - alias: %d",topic,alias)}else{debug("_handlePublish :: topic alias out of range. alias: %d",alias);this.emit("error",new Error("Received Topic Alias is out of range"));return}}}}debug("_handlePublish: qos %d",qos);switch(qos){case 2:{options.customHandleAcks(topic,message,packet,function(error,code){if(!(error instanceof Error)){code=error;error=null}if(error){return that.emit("error",error)}if(validReasonCodes.indexOf(code)===-1){return that.emit("error",new Error("Wrong reason code for pubrec"))}if(code){that._sendPacket({cmd:"pubrec",messageId:messageId,reasonCode:code},done)}else{that.incomingStore.put(packet,function(){that._sendPacket({cmd:"pubrec",messageId:messageId},done)})}});break}case 1:{options.customHandleAcks(topic,message,packet,function(error,code){if(!(error instanceof Error)){code=error;error=null}if(error){return that.emit("error",error)}if(validReasonCodes.indexOf(code)===-1){return that.emit("error",new Error("Wrong reason code for puback"))}if(!code){that.emit("message",topic,message,packet)}that.handleMessage(packet,function(err){if(err){return done&&done(err)}that._sendPacket({cmd:"puback",messageId:messageId,reasonCode:code},done)})});break}case 0:this.emit("message",topic,message,packet);this.handleMessage(packet,done);break;default:debug("_handlePublish: unknown QoS. Doing nothing.");break}};MqttClient.prototype.handleMessage=function(packet,callback){callback()};MqttClient.prototype._handleAck=function(packet){const messageId=packet.messageId;const type=packet.cmd;let response=null;const cb=this.outgoing[messageId]?this.outgoing[messageId].cb:null;const that=this;let err;if(!cb){debug("_handleAck :: Server sent an ack in error. Ignoring.");return}debug("_handleAck :: packet type",type);switch(type){case"pubcomp":case"puback":{const pubackRC=packet.reasonCode;if(pubackRC&&pubackRC>0&&pubackRC!==16){err=new Error("Publish error: "+errors[pubackRC]);err.code=pubackRC;cb(err,packet)}delete this.outgoing[messageId];this.outgoingStore.del(packet,cb);this.messageIdProvider.deallocate(messageId);this._invokeStoreProcessingQueue();break}case"pubrec":{response={cmd:"pubrel",qos:2,messageId:messageId};const pubrecRC=packet.reasonCode;if(pubrecRC&&pubrecRC>0&&pubrecRC!==16){err=new Error("Publish error: "+errors[pubrecRC]);err.code=pubrecRC;cb(err,packet)}else{this._sendPacket(response)}break}case"suback":{delete this.outgoing[messageId];this.messageIdProvider.deallocate(messageId);for(let grantedI=0;grantedI<packet.granted.length;grantedI++){if((packet.granted[grantedI]&128)!==0){const topics=this.messageIdToTopic[messageId];if(topics){topics.forEach(function(topic){delete that._resubscribeTopics[topic]})}}}this._invokeStoreProcessingQueue();cb(null,packet);break}case"unsuback":{delete this.outgoing[messageId];this.messageIdProvider.deallocate(messageId);this._invokeStoreProcessingQueue();cb(null);break}default:that.emit("error",new Error("unrecognized packet type"))}if(this.disconnecting&&Object.keys(this.outgoing).length===0){this.emit("outgoingEmpty")}};MqttClient.prototype._handlePubrel=function(packet,callback){debug("handling pubrel packet");callback=typeof callback!=="undefined"?callback:nop;const messageId=packet.messageId;const that=this;const comp={cmd:"pubcomp",messageId:messageId};that.incomingStore.get(packet,function(err,pub){if(!err){that.emit("message",pub.topic,pub.payload,pub);that.handleMessage(pub,function(err){if(err){return callback(err)}that.incomingStore.del(pub,nop);that._sendPacket(comp,callback)})}else{that._sendPacket(comp,callback)}})};MqttClient.prototype._handleDisconnect=function(packet){this.emit("disconnect",packet)};MqttClient.prototype._nextId=function(){return this.messageIdProvider.allocate()};MqttClient.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()};MqttClient.prototype._resubscribe=function(){debug("_resubscribe");const _resubscribeTopicsKeys=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion===5&&!this.connackPacket.sessionPresent)&&_resubscribeTopicsKeys.length>0){if(this.options.resubscribe){if(this.options.protocolVersion===5){debug("_resubscribe: protocolVersion 5");for(let topicI=0;topicI<_resubscribeTopicsKeys.length;topicI++){const resubscribeTopic={};resubscribeTopic[_resubscribeTopicsKeys[topicI]]=this._resubscribeTopics[_resubscribeTopicsKeys[topicI]];resubscribeTopic.resubscribe=true;this.subscribe(resubscribeTopic,{properties:resubscribeTopic[_resubscribeTopicsKeys[topicI]].properties})}}else{this._resubscribeTopics.resubscribe=true;this.subscribe(this._resubscribeTopics)}}else{this._resubscribeTopics={}}}this._firstConnection=false};MqttClient.prototype._onConnect=function(packet){if(this.disconnected){this.emit("connect",packet);return}const that=this;this.connackPacket=packet;this.messageIdProvider.clear();this._setupPingTimer();this.connected=true;function startStreamProcess(){let outStore=that.outgoingStore.createStream();function clearStoreProcessing(){that._storeProcessing=false;that._packetIdsDuringStoreProcessing={}}that.once("close",remove);outStore.on("error",function(err){clearStoreProcessing();that._flushStoreProcessingQueue();that.removeListener("close",remove);that.emit("error",err)});function remove(){outStore.destroy();outStore=null;that._flushStoreProcessingQueue();clearStoreProcessing()}function storeDeliver(){if(!outStore){return}that._storeProcessing=true;const packet=outStore.read(1);let cb;if(!packet){outStore.once("readable",storeDeliver);return}if(that._packetIdsDuringStoreProcessing[packet.messageId]){storeDeliver();return}if(!that.disconnecting&&!that.reconnectTimer){cb=that.outgoing[packet.messageId]?that.outgoing[packet.messageId].cb:null;that.outgoing[packet.messageId]={volatile:false,cb:function(err,status){if(cb){cb(err,status)}storeDeliver()}};that._packetIdsDuringStoreProcessing[packet.messageId]=true;if(that.messageIdProvider.register(packet.messageId)){that._sendPacket(packet)}else{debug("messageId: %d has already used.",packet.messageId)}}else if(outStore.destroy){outStore.destroy()}}outStore.on("end",function(){let allProcessed=true;for(const id in that._packetIdsDuringStoreProcessing){if(!that._packetIdsDuringStoreProcessing[id]){allProcessed=false;break}}if(allProcessed){clearStoreProcessing();that.removeListener("close",remove);that._invokeAllStoreProcessingQueue();that.emit("connect",packet)}else{startStreamProcess()}});storeDeliver()}startStreamProcess()};MqttClient.prototype._invokeStoreProcessingQueue=function(){if(this._storeProcessingQueue.length>0){const f=this._storeProcessingQueue[0];if(f&&f.invoke()){this._storeProcessingQueue.shift();return true}}return false};MqttClient.prototype._invokeAllStoreProcessingQueue=function(){while(this._invokeStoreProcessingQueue()){}};MqttClient.prototype._flushStoreProcessingQueue=function(){for(const f of this._storeProcessingQueue){if(f.cbStorePut)f.cbStorePut(new Error("Connection closed"));if(f.callback)f.callback(new Error("Connection closed"))}this._storeProcessingQueue.splice(0)};module.exports=MqttClient}).call(this)}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./default-message-id-provider":79,"./store":80,"./topic-alias-recv":81,"./topic-alias-send":82,"./validations":83,_process:101,debug:56,events:60,inherits:62,"mqtt-packet":67,"readable-stream":119,reinterval:120,"rfdc/default":121,xtend:132}],73:[function(require,module,exports){"use strict";const{Buffer}=require("buffer");const Transform=require("readable-stream").Transform;const duplexify=require("duplexify");let my;let proxy;let stream;let isInitialized=false;function buildProxy(){const proxy=new Transform;proxy._write=function(chunk,encoding,next){my.sendSocketMessage({data:chunk.buffer,success:function(){next()},fail:function(){next(new Error)}})};proxy._flush=function socketEnd(done){my.closeSocket({success:function(){done()}})};return proxy}function setDefaultOpts(opts){if(!opts.hostname){opts.hostname="localhost"}if(!opts.path){opts.path="/"}if(!opts.wsOptions){opts.wsOptions={}}}function buildUrl(opts,client){const protocol=opts.protocol==="alis"?"wss":"ws";let url=protocol+"://"+opts.hostname+opts.path;if(opts.port&&opts.port!==80&&opts.port!==443){url=protocol+"://"+opts.hostname+":"+opts.port+opts.path}if(typeof opts.transformWsUrl==="function"){url=opts.transformWsUrl(url,opts,client)}return url}function bindEventHandler(){if(isInitialized)return;isInitialized=true;my.onSocketOpen(function(){stream.setReadable(proxy);stream.setWritable(proxy);stream.emit("connect")});my.onSocketMessage(function(res){if(typeof res.data==="string"){const buffer=Buffer.from(res.data,"base64");proxy.push(buffer)}else{const reader=new FileReader;reader.addEventListener("load",function(){let data=reader.result;if(data instanceof ArrayBuffer)data=Buffer.from(data);else data=Buffer.from(data,"utf8");proxy.push(data)});reader.readAsArrayBuffer(res.data)}});my.onSocketClose(function(){stream.end();stream.destroy()});my.onSocketError(function(res){stream.destroy(res)})}function buildStream(client,opts){opts.hostname=opts.hostname||opts.host;if(!opts.hostname){throw new Error("Could not determine host. Specify host manually.")}const websocketSubProtocol=opts.protocolId==="MQIsdp"&&opts.protocolVersion===3?"mqttv3.1":"mqtt";setDefaultOpts(opts);const url=buildUrl(opts,client);my=opts.my;my.connectSocket({url:url,protocols:websocketSubProtocol});proxy=buildProxy();stream=duplexify.obj();bindEventHandler();return stream}module.exports=buildStream},{buffer:54,duplexify:58,"readable-stream":119}],74:[function(require,module,exports){(function(process){(function(){"use strict";const MqttClient=require("../client");const Store=require("../store");const url=require("url");const xtend=require("xtend");const debug=require("debug")("mqttjs");const protocols={};if(typeof process!=="undefined"&&process.title!=="browser"||typeof __webpack_require__!=="function"){protocols.mqtt=require("./tcp");protocols.tcp=require("./tcp");protocols.ssl=require("./tls");protocols.tls=require("./tls");protocols.mqtts=require("./tls")}else{protocols.wx=require("./wx");protocols.wxs=require("./wx");protocols.ali=require("./ali");protocols.alis=require("./ali")}protocols.ws=require("./ws");protocols.wss=require("./ws");function parseAuthOptions(opts){let matches;if(opts.auth){matches=opts.auth.match(/^(.+):(.+)$/);if(matches){opts.username=matches[1];opts.password=matches[2]}else{opts.username=opts.auth}}}function connect(brokerUrl,opts){debug("connecting to an MQTT broker...");if(typeof brokerUrl==="object"&&!opts){opts=brokerUrl;brokerUrl=null}opts=opts||{};if(brokerUrl){const parsed=url.parse(brokerUrl,true);if(parsed.port!=null){parsed.port=Number(parsed.port)}opts=xtend(parsed,opts);if(opts.protocol===null){throw new Error("Missing protocol")}opts.protocol=opts.protocol.replace(/:$/,"")}parseAuthOptions(opts);if(opts.query&&typeof opts.query.clientId==="string"){opts.clientId=opts.query.clientId}if(opts.cert&&opts.key){if(opts.protocol){if(["mqtts","wss","wxs","alis"].indexOf(opts.protocol)===-1){switch(opts.protocol){case"mqtt":opts.protocol="mqtts";break;case"ws":opts.protocol="wss";break;case"wx":opts.protocol="wxs";break;case"ali":opts.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+opts.protocol+'"!')}}}else{throw new Error("Missing secure protocol key")}}if(!protocols[opts.protocol]){const isSecure=["mqtts","wss"].indexOf(opts.protocol)!==-1;opts.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(key,index){if(isSecure&&index%2===0){return false}return typeof protocols[key]==="function"})[0]}if(opts.clean===false&&!opts.clientId){throw new Error("Missing clientId for unclean clients")}if(opts.protocol){opts.defaultProtocol=opts.protocol}function wrapper(client){if(opts.servers){if(!client._reconnectCount||client._reconnectCount===opts.servers.length){client._reconnectCount=0}opts.host=opts.servers[client._reconnectCount].host;opts.port=opts.servers[client._reconnectCount].port;opts.protocol=!opts.servers[client._reconnectCount].protocol?opts.defaultProtocol:opts.servers[client._reconnectCount].protocol;opts.hostname=opts.host;client._reconnectCount++}debug("calling streambuilder for",opts.protocol);return protocols[opts.protocol](client,opts)}const client=new MqttClient(wrapper,opts);client.on("error",function(){});return client}module.exports=connect;module.exports.connect=connect;module.exports.MqttClient=MqttClient;module.exports.Store=Store}).call(this)}).call(this,require("_process"))},{"../client":72,"../store":80,"./ali":73,"./tcp":75,"./tls":76,"./ws":77,"./wx":78,_process:101,debug:56,url:127,xtend:132}],75:[function(require,module,exports){"use strict";const net=require("net");const debug=require("debug")("mqttjs:tcp");function streamBuilder(client,opts){opts.port=opts.port||1883;opts.hostname=opts.hostname||opts.host||"localhost";const port=opts.port;const host=opts.hostname;debug("port %d and host %s",port,host);return net.createConnection(port,host)}module.exports=streamBuilder},{debug:56,net:52}],76:[function(require,module,exports){"use strict";const tls=require("tls");const net=require("net");const debug=require("debug")("mqttjs:tls");function buildBuilder(mqttClient,opts){opts.port=opts.port||8883;opts.host=opts.hostname||opts.host||"localhost";if(net.isIP(opts.host)===0){opts.servername=opts.host}opts.rejectUnauthorized=opts.rejectUnauthorized!==false;delete opts.path;debug("port %d host %s rejectUnauthorized %b",opts.port,opts.host,opts.rejectUnauthorized);const connection=tls.connect(opts);connection.on("secureConnect",function(){if(opts.rejectUnauthorized&&!connection.authorized){connection.emit("error",new Error("TLS not authorized"))}else{connection.removeListener("error",handleTLSerrors)}});function handleTLSerrors(err){if(opts.rejectUnauthorized){mqttClient.emit("error",err)}connection.end()}connection.on("error",handleTLSerrors);return connection}module.exports=buildBuilder},{debug:56,net:52,tls:52}],77:[function(require,module,exports){(function(process){(function(){"use strict";const{Buffer}=require("buffer");const WS=require("ws");const debug=require("debug")("mqttjs:ws");const duplexify=require("duplexify");const Transform=require("readable-stream").Transform;const WSS_OPTIONS=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];const IS_BROWSER=typeof process!=="undefined"&&process.title==="browser"||typeof __webpack_require__==="function";function buildUrl(opts,client){let url=opts.protocol+"://"+opts.hostname+":"+opts.port+opts.path;if(typeof opts.transformWsUrl==="function"){url=opts.transformWsUrl(url,opts,client)}return url}function setDefaultOpts(opts){const options=opts;if(!opts.hostname){options.hostname="localhost"}if(!opts.port){if(opts.protocol==="wss"){options.port=443}else{options.port=80}}if(!opts.path){options.path="/"}if(!opts.wsOptions){options.wsOptions={}}if(!IS_BROWSER&&opts.protocol==="wss"){WSS_OPTIONS.forEach(function(prop){if(Object.prototype.hasOwnProperty.call(opts,prop)&&!Object.prototype.hasOwnProperty.call(opts.wsOptions,prop)){options.wsOptions[prop]=opts[prop]}})}return options}function setDefaultBrowserOpts(opts){const options=setDefaultOpts(opts);if(!options.hostname){options.hostname=options.host}if(!options.hostname){if(typeof document==="undefined"){throw new Error("Could not determine host. Specify host manually.")}const parsed=new URL(document.URL);options.hostname=parsed.hostname;if(!options.port){options.port=parsed.port}}if(options.objectMode===undefined){options.objectMode=!(options.binary===true||options.binary===undefined)}return options}function createWebSocket(client,url,opts){debug("createWebSocket");debug("protocol: "+opts.protocolId+" "+opts.protocolVersion);const websocketSubProtocol=opts.protocolId==="MQIsdp"&&opts.protocolVersion===3?"mqttv3.1":"mqtt";debug("creating new Websocket for url: "+url+" and protocol: "+websocketSubProtocol);const socket=new WS(url,[websocketSubProtocol],opts.wsOptions);return socket}function createBrowserWebSocket(client,opts){const websocketSubProtocol=opts.protocolId==="MQIsdp"&&opts.protocolVersion===3?"mqttv3.1":"mqtt";const url=buildUrl(opts,client);const socket=new WebSocket(url,[websocketSubProtocol]);socket.binaryType="arraybuffer";return socket}function streamBuilder(client,opts){debug("streamBuilder");const options=setDefaultOpts(opts);const url=buildUrl(options,client);const socket=createWebSocket(client,url,options);const webSocketStream=WS.createWebSocketStream(socket,options.wsOptions);webSocketStream.url=url;socket.on("close",()=>{webSocketStream.destroy()});return webSocketStream}function browserStreamBuilder(client,opts){debug("browserStreamBuilder");let stream;const options=setDefaultBrowserOpts(opts);const bufferSize=options.browserBufferSize||1024*512;const bufferTimeout=opts.browserBufferTimeout||1e3;const coerceToBuffer=!opts.objectMode;const socket=createBrowserWebSocket(client,opts);const proxy=buildProxy(opts,socketWriteBrowser,socketEndBrowser);if(!opts.objectMode){proxy._writev=writev}proxy.on("close",()=>{socket.close()});const eventListenerSupport=typeof socket.addEventListener!=="undefined";if(socket.readyState===socket.OPEN){stream=proxy}else{stream=stream=duplexify(undefined,undefined,opts);if(!opts.objectMode){stream._writev=writev}if(eventListenerSupport){socket.addEventListener("open",onopen)}else{socket.onopen=onopen}}stream.socket=socket;if(eventListenerSupport){socket.addEventListener("close",onclose);socket.addEventListener("error",onerror);socket.addEventListener("message",onmessage)}else{socket.onclose=onclose;socket.onerror=onerror;socket.onmessage=onmessage}function buildProxy(options,socketWrite,socketEnd){const proxy=new Transform({objectModeMode:options.objectMode});proxy._write=socketWrite;proxy._flush=socketEnd;return proxy}function onopen(){stream.setReadable(proxy);stream.setWritable(proxy);stream.emit("connect")}function onclose(){stream.end();stream.destroy()}function onerror(err){stream.destroy(err)}function onmessage(event){let data=event.data;if(data instanceof ArrayBuffer)data=Buffer.from(data);else data=Buffer.from(data,"utf8");proxy.push(data)}function writev(chunks,cb){const buffers=new Array(chunks.length);for(let i=0;i<chunks.length;i++){if(typeof chunks[i].chunk==="string"){buffers[i]=Buffer.from(chunks[i],"utf8")}else{buffers[i]=chunks[i].chunk}}this._write(Buffer.concat(buffers),"binary",cb)}function socketWriteBrowser(chunk,enc,next){if(socket.bufferedAmount>bufferSize){setTimeout(socketWriteBrowser,bufferTimeout,chunk,enc,next)}if(coerceToBuffer&&typeof chunk==="string"){chunk=Buffer.from(chunk,"utf8")}try{socket.send(chunk)}catch(err){return next(err)}next()}function socketEndBrowser(done){socket.close();done()}return stream}if(IS_BROWSER){module.exports=browserStreamBuilder}else{module.exports=streamBuilder}}).call(this)}).call(this,require("_process"))},{_process:101,buffer:54,debug:56,duplexify:58,"readable-stream":119,ws:131}],78:[function(require,module,exports){"use strict";const{Buffer}=require("buffer");const Transform=require("readable-stream").Transform;const duplexify=require("duplexify");let socketTask,proxy,stream;function buildProxy(){const proxy=new Transform;proxy._write=function(chunk,encoding,next){socketTask.send({data:chunk.buffer,success:function(){next()},fail:function(errMsg){next(new Error(errMsg))}})};proxy._flush=function socketEnd(done){socketTask.close({success:function(){done()}})};return proxy}function setDefaultOpts(opts){if(!opts.hostname){opts.hostname="localhost"}if(!opts.path){opts.path="/"}if(!opts.wsOptions){opts.wsOptions={}}}function buildUrl(opts,client){const protocol=opts.protocol==="wxs"?"wss":"ws";let url=protocol+"://"+opts.hostname+opts.path;if(opts.port&&opts.port!==80&&opts.port!==443){url=protocol+"://"+opts.hostname+":"+opts.port+opts.path}if(typeof opts.transformWsUrl==="function"){url=opts.transformWsUrl(url,opts,client)}return url}function bindEventHandler(){socketTask.onOpen(function(){stream.setReadable(proxy);stream.setWritable(proxy);stream.emit("connect")});socketTask.onMessage(function(res){let data=res.data;if(data instanceof ArrayBuffer)data=Buffer.from(data);else data=Buffer.from(data,"utf8");proxy.push(data)});socketTask.onClose(function(){stream.end();stream.destroy()});socketTask.onError(function(res){stream.destroy(new Error(res.errMsg))})}function buildStream(client,opts){opts.hostname=opts.hostname||opts.host;if(!opts.hostname){throw new Error("Could not determine host. Specify host manually.")}const websocketSubProtocol=opts.protocolId==="MQIsdp"&&opts.protocolVersion===3?"mqttv3.1":"mqtt";setDefaultOpts(opts);const url=buildUrl(opts,client);socketTask=wx.connectSocket({url:url,protocols:[websocketSubProtocol]});proxy=buildProxy();stream=duplexify.obj();stream._destroy=function(err,cb){socketTask.close({success:function(){cb&&cb(err)}})};const destroyRef=stream.destroy;stream.destroy=function(){stream.destroy=destroyRef;const self=this;setTimeout(function(){socketTask.close({fail:function(){self._destroy(new Error)}})},0)}.bind(stream);bindEventHandler();return stream}module.exports=buildStream},{buffer:54,duplexify:58,"readable-stream":119}],79:[function(require,module,exports){"use strict";function DefaultMessageIdProvider(){if(!(this instanceof DefaultMessageIdProvider)){return new DefaultMessageIdProvider}this.nextId=Math.max(1,Math.floor(Math.random()*65535))}DefaultMessageIdProvider.prototype.allocate=function(){const id=this.nextId++;if(this.nextId===65536){this.nextId=1}return id};DefaultMessageIdProvider.prototype.getLastAllocated=function(){return this.nextId===1?65535:this.nextId-1};DefaultMessageIdProvider.prototype.register=function(messageId){return true};DefaultMessageIdProvider.prototype.deallocate=function(messageId){};DefaultMessageIdProvider.prototype.clear=function(){};module.exports=DefaultMessageIdProvider},{}],80:[function(require,module,exports){"use strict";const xtend=require("xtend");const Readable=require("readable-stream").Readable;const streamsOpts={objectMode:true};const defaultStoreOptions={clean:true};function Store(options){if(!(this instanceof Store)){return new Store(options)}this.options=options||{};this.options=xtend(defaultStoreOptions,options);this._inflights=new Map}Store.prototype.put=function(packet,cb){this._inflights.set(packet.messageId,packet);if(cb){cb()}return this};Store.prototype.createStream=function(){const stream=new Readable(streamsOpts);const values=[];let destroyed=false;let i=0;this._inflights.forEach(function(value,key){values.push(value)});stream._read=function(){if(!destroyed&&i<values.length){this.push(values[i++])}else{this.push(null)}};stream.destroy=function(){if(destroyed){return}const self=this;destroyed=true;setTimeout(function(){self.emit("close")},0)};return stream};Store.prototype.del=function(packet,cb){packet=this._inflights.get(packet.messageId);if(packet){this._inflights.delete(packet.messageId);cb(null,packet)}else if(cb){cb(new Error("missing packet"))}return this};Store.prototype.get=function(packet,cb){packet=this._inflights.get(packet.messageId);if(packet){cb(null,packet)}else if(cb){cb(new Error("missing packet"))}return this};Store.prototype.close=function(cb){if(this.options.clean){this._inflights=null}if(cb){cb()}};module.exports=Store},{"readable-stream":119,xtend:132}],81:[function(require,module,exports){"use strict";function TopicAliasRecv(max){if(!(this instanceof TopicAliasRecv)){return new TopicAliasRecv(max)}this.aliasToTopic={};this.max=max}TopicAliasRecv.prototype.put=function(topic,alias){if(alias===0||alias>this.max){return false}this.aliasToTopic[alias]=topic;this.length=Object.keys(this.aliasToTopic).length;return true};TopicAliasRecv.prototype.getTopicByAlias=function(alias){return this.aliasToTopic[alias]};TopicAliasRecv.prototype.clear=function(){this.aliasToTopic={}};module.exports=TopicAliasRecv},{}],82:[function(require,module,exports){"use strict";const LruMap=require("lru-cache");const NumberAllocator=require("number-allocator").NumberAllocator;function TopicAliasSend(max){if(!(this instanceof TopicAliasSend)){return new TopicAliasSend(max)}if(max>0){this.aliasToTopic=new LruMap({max:max});this.topicToAlias={};this.numberAllocator=new NumberAllocator(1,max);this.max=max;this.length=0}}TopicAliasSend.prototype.put=function(topic,alias){if(alias===0||alias>this.max){return false}const entry=this.aliasToTopic.get(alias);if(entry){delete this.topicToAlias[entry]}this.aliasToTopic.set(alias,topic);this.topicToAlias[topic]=alias;this.numberAllocator.use(alias);this.length=this.aliasToTopic.length;return true};TopicAliasSend.prototype.getTopicByAlias=function(alias){return this.aliasToTopic.get(alias)};TopicAliasSend.prototype.getAliasByTopic=function(topic){const alias=this.topicToAlias[topic];if(typeof alias!=="undefined"){this.aliasToTopic.get(alias)}return alias};TopicAliasSend.prototype.clear=function(){this.aliasToTopic.reset();this.topicToAlias={};this.numberAllocator.clear();this.length=0};TopicAliasSend.prototype.getLruAlias=function(){const alias=this.numberAllocator.firstVacant();if(alias)return alias;return this.aliasToTopic.keys()[this.aliasToTopic.length-1]};module.exports=TopicAliasSend},{"lru-cache":64,"number-allocator":85}],83:[function(require,module,exports){"use strict";function validateTopic(topic){const parts=topic.split("/");for(let i=0;i<parts.length;i++){if(parts[i]==="+"){continue}if(parts[i]==="#"){return i===parts.length-1}if(parts[i].indexOf("+")!==-1||parts[i].indexOf("#")!==-1){return false}}return true}function validateTopics(topics){if(topics.length===0){return"empty_topic_list"}for(let i=0;i<topics.length;i++){if(!validateTopic(topics[i])){return topics[i]}}return null}module.exports={validateTopics:validateTopics}},{}],84:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var w=d*7;var y=d*365.25;module.exports=function(val,options){options=options||{};var type=typeof val;if(type==="string"&&val.length>0){return parse(val)}else if(type==="number"&&isFinite(val)){return options.long?fmtLong(val):fmtShort(val)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))};function parse(str){str=String(str);if(str.length>100){return}var match=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);if(!match){return}var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"weeks":case"week":case"w":return n*w;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return undefined}}function fmtShort(ms){var msAbs=Math.abs(ms);if(msAbs>=d){return Math.round(ms/d)+"d"}if(msAbs>=h){return Math.round(ms/h)+"h"}if(msAbs>=m){return Math.round(ms/m)+"m"}if(msAbs>=s){return Math.round(ms/s)+"s"}return ms+"ms"}function fmtLong(ms){var msAbs=Math.abs(ms);if(msAbs>=d){return plural(ms,msAbs,d,"day")}if(msAbs>=h){return plural(ms,msAbs,h,"hour")}if(msAbs>=m){return plural(ms,msAbs,m,"minute")}if(msAbs>=s){return plural(ms,msAbs,s,"second")}return ms+" ms"}function plural(ms,msAbs,n,name){var isPlural=msAbs>=n*1.5;return Math.round(ms/n)+" "+name+(isPlural?"s":"")}},{}],85:[function(require,module,exports){const NumberAllocator=require("./lib/number-allocator.js");module.exports.NumberAllocator=NumberAllocator},{"./lib/number-allocator.js":86}],86:[function(require,module,exports){"use strict";const SortedSet=require("js-sdsl").Set;const debugTrace=require("debug")("number-allocator:trace");const debugError=require("debug")("number-allocator:error");function Interval(low,high){this.low=low;this.high=high}Interval.prototype.equals=function(other){return this.low===other.low&&this.high===other.high};Interval.prototype.compare=function(other){if(this.low<other.low&&this.high<other.low)return-1;if(other.low<this.low&&other.high<this.low)return 1;return 0};function NumberAllocator(min,max){if(!(this instanceof NumberAllocator)){return new NumberAllocator(min,max)}this.min=min;this.max=max;this.ss=new SortedSet([],(lhs,rhs)=>{return lhs.compare(rhs)});debugTrace("Create");this.clear()}NumberAllocator.prototype.firstVacant=function(){if(this.ss.size()===0)return null;return this.ss.front().low};NumberAllocator.prototype.alloc=function(){if(this.ss.size()===0){debugTrace("alloc():empty");return null}const it=this.ss.front();const num=it.low;if(num+1<=it.high){++it.low}else{this.ss.eraseElementByPos(0)}debugTrace("alloc():"+num);return num};NumberAllocator.prototype.use=function(num){const key=new Interval(num,num);const it=this.ss.lowerBound(key);if(it){if(it.equals(key)){this.ss.eraseElementByValue(it);debugTrace("use():"+num);return true}if(it.low>num)return false;if(it.low===num){++it.low;debugTrace("use():"+num);return true}if(it.high===num){--it.high;debugTrace("use():"+num);return true}const low=it.low;it.low=num+1;this.ss.insert(new Interval(low,num-1));debugTrace("use():"+num);return true}debugTrace("use():failed");return false};NumberAllocator.prototype.free=function(num){if(num<this.min||num>this.max){debugError("free():"+num+" is out of range");return}const key=new Interval(num,num);const it=this.ss.lowerBound(key);if(it){if(it.low<=num&&num<=it.high){debugError("free():"+num+" has already been vacant");return}if(it===this.ss.front()){if(num+1===it.low){--it.low}else{this.ss.insert(key)}}else{const itl=this.ss.reverseLowerBound(key);if(itl.high+1===num){if(num+1===it.low){this.ss.eraseElementByValue(itl);it.low=itl.low}else{itl.high=num}}else{if(num+1===it.low){it.low=num}else{this.ss.insert(key)}}}}else{if(it===this.ss.front()){this.ss.insert(key);return}const itl=this.ss.reverseLowerBound(key);if(itl.high+1===num){itl.high=num}else{this.ss.insert(key)}}debugTrace("free():"+num)};NumberAllocator.prototype.clear=function(){debugTrace("clear()");this.ss.clear();this.ss.insert(new Interval(this.min,this.max))};NumberAllocator.prototype.intervalCount=function(){return this.ss.size()};NumberAllocator.prototype.dump=function(){console.log("length:"+this.ss.size());for(const element of this.ss){console.log(element)}};module.exports=NumberAllocator},{debug:56,"js-sdsl":98}],87:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var TreeNode=function(){function TreeNode(key,value){this.color=true;this.key=undefined;this.value=undefined;this.parent=undefined;this.brother=undefined;this.leftChild=undefined;this.rightChild=undefined;this.key=key;this.value=value}TreeNode.prototype.rotateLeft=function(){var PP=this.parent;var PB=this.brother;var F=this.leftChild;var V=this.rightChild;if(!V)throw new Error("unknown error");var R=V.leftChild;var X=V.rightChild;if(PP){if(PP.leftChild===this)PP.leftChild=V;else if(PP.rightChild===this)PP.rightChild=V}V.parent=PP;V.brother=PB;V.leftChild=this;V.rightChild=X;if(PB)PB.brother=V;this.parent=V;this.brother=X;this.leftChild=F;this.rightChild=R;if(X){X.parent=V;X.brother=this}if(F){F.parent=this;F.brother=R}if(R){R.parent=this;R.brother=F}return V};TreeNode.prototype.rotateRight=function(){var PP=this.parent;var PB=this.brother;var F=this.leftChild;if(!F)throw new Error("unknown error");var V=this.rightChild;var D=F.leftChild;var K=F.rightChild;if(PP){if(PP.leftChild===this)PP.leftChild=F;else if(PP.rightChild===this)PP.rightChild=F}F.parent=PP;F.brother=PB;F.leftChild=D;F.rightChild=this;if(PB)PB.brother=F;if(D){D.parent=F;D.brother=this}this.parent=F;this.brother=D;this.leftChild=K;this.rightChild=V;if(K){K.parent=this;K.brother=V}if(V){V.parent=this;V.brother=K}return F};TreeNode.prototype.remove=function(){if(this.leftChild||this.rightChild)throw new Error("can only remove leaf node");if(this.parent){if(this===this.parent.leftChild)this.parent.leftChild=undefined;else if(this===this.parent.rightChild)this.parent.rightChild=undefined}if(this.brother)this.brother.brother=undefined;this.key=undefined;this.value=undefined;this.parent=undefined;this.brother=undefined};TreeNode.TreeNodeColorType={red:true,black:false};return TreeNode}();Object.freeze(TreeNode);exports.default=TreeNode},{}],88:[function(require,module,exports){"use strict";var __generator=this&&this.__generator||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}};Object.defineProperty(exports,"__esModule",{value:true});Deque.sigma=3;Deque.bucketSize=5e3;function Deque(container){var _this=this;if(container===void 0){container=[]}var map=[];var first=0;var curFirst=0;var last=0;var curLast=0;var bucketNum=0;var len=0;this.size=function(){return len};this.empty=function(){return len===0};this.clear=function(){first=last=curFirst=curLast=bucketNum=len=0;reAllocate.call(this,Deque.bucketSize);len=0};this.front=function(){return map[first][curFirst]};this.back=function(){return map[last][curLast]};this.forEach=function(callback){if(this.empty())return;var index=0;if(first===last){for(var i=curFirst;i<=curLast;++i){callback(map[first][i],index++)}return}for(var i=curFirst;i<Deque.bucketSize;++i){callback(map[first][i],index++)}for(var i=first+1;i<last;++i){for(var j=0;j<Deque.bucketSize;++j){callback(map[i][j],index++)}}for(var i=0;i<=curLast;++i){callback(map[last][i],index++)}};var getElementIndex=function(pos){var curFirstIndex=first*Deque.bucketSize+curFirst;var curNodeIndex=curFirstIndex+pos;var curLastIndex=last*Deque.bucketSize+curLast;if(curNodeIndex<curFirstIndex||curNodeIndex>curLastIndex)throw new Error("pos should more than 0 and less than queue's size");var curNodeBucketIndex=Math.floor(curNodeIndex/Deque.bucketSize);var curNodePointerIndex=curNodeIndex%Deque.bucketSize;return{curNodeBucketIndex:curNodeBucketIndex,curNodePointerIndex:curNodePointerIndex}};this.getElementByPos=function(pos){var _a=getElementIndex(pos),curNodeBucketIndex=_a.curNodeBucketIndex,curNodePointerIndex=_a.curNodePointerIndex;return map[curNodeBucketIndex][curNodePointerIndex]};this.eraseElementByPos=function(pos){var _this=this;if(pos<0||pos>len)throw new Error("pos should more than 0 and less than queue's size");if(pos===0)this.popFront();else if(pos===this.size())this.popBack();else{var arr=[];for(var i=pos+1;i<len;++i){arr.push(this.getElementByPos(i))}this.cut(pos);this.popBack();arr.forEach(function(element){return _this.pushBack(element)})}};this.eraseElementByValue=function(value){if(this.empty())return;var arr=[];this.forEach(function(element){if(element!==value){arr.push(element)}});var _len=arr.length;for(var i=0;i<_len;++i)this.setElementByPos(i,arr[i]);this.cut(_len-1)};var reAllocate=function(originalSize){var newMap=[];var needSize=originalSize*Deque.sigma;var newBucketNum=Math.max(Math.ceil(needSize/Deque.bucketSize),2);for(var i=0;i<newBucketNum;++i){newMap.push(new Array(Deque.bucketSize))}var needBucketNum=Math.ceil(originalSize/Deque.bucketSize);var newFirst=Math.floor(newBucketNum/2)-Math.floor(needBucketNum/2);var newLast=newFirst,newCurLast=0;if(this.size()){for(var i=0;i<needBucketNum;++i){for(var j=0;j<Deque.bucketSize;++j){newMap[newFirst+i][j]=this.front();this.popFront();if(this.empty()){newLast=newFirst+i;newCurLast=j;break}}if(this.empty())break}}map=newMap;first=newFirst;curFirst=0;last=newLast;curLast=newCurLast;bucketNum=newBucketNum;len=originalSize};this.pushBack=function(element){if(!this.empty()){if(last===bucketNum-1&&curLast===Deque.bucketSize-1){reAllocate.call(this,this.size())}if(curLast<Deque.bucketSize-1){++curLast}else if(last<bucketNum-1){++last;curLast=0}}++len;map[last][curLast]=element};this.popBack=function(){if(this.empty())return;if(this.size()!==1){if(curLast>0){--curLast}else if(first<last){--last;curLast=Deque.bucketSize-1}}if(len>0)--len};this.setElementByPos=function(pos,element){var _a=getElementIndex(pos),curNodeBucketIndex=_a.curNodeBucketIndex,curNodePointerIndex=_a.curNodePointerIndex;map[curNodeBucketIndex][curNodePointerIndex]=element};this.insert=function(pos,element,num){var _this=this;if(num===void 0){num=1}if(pos===0){while(num--)this.pushFront(element)}else if(pos===this.size()){while(num--)this.pushBack(element)}else{var arr=[];for(var i=pos;i<len;++i){arr.push(this.getElementByPos(i))}this.cut(pos-1);for(var i=0;i<num;++i)this.pushBack(element);arr.forEach(function(element){return _this.pushBack(element)})}};this.find=function(element){if(first===last){for(var i=curFirst;i<=curLast;++i){if(map[first][i]===element)return true}return false}for(var i=curFirst;i<Deque.bucketSize;++i){if(map[first][i]===element)return true}for(var i=first+1;i<last;++i){for(var j=0;j<Deque.bucketSize;++j){if(map[i][j]===element)return true}}for(var i=0;i<=curLast;++i){if(map[last][i]===element)return true}return false};this.reverse=function(){var l=0,r=len-1;while(l<r){var tmp=this.getElementByPos(l);this.setElementByPos(l,this.getElementByPos(r));this.setElementByPos(r,tmp);++l;--r}};this.unique=function(){if(this.empty())return;var arr=[];var pre=this.front();this.forEach(function(element,index){if(index===0||element!==pre){arr.push(element);pre=element}});for(var i=0;i<len;++i){this.setElementByPos(i,arr[i])}this.cut(arr.length-1)};this.sort=function(cmp){var arr=[];this.forEach(function(element){arr.push(element)});arr.sort(cmp);for(var i=0;i<len;++i)this.setElementByPos(i,arr[i])};this.pushFront=function(element){if(!this.empty()){if(first===0&&curFirst===0){reAllocate.call(this,this.size())}if(curFirst>0){--curFirst}else if(first>0){--first;curFirst=Deque.bucketSize-1}}++len;map[first][curFirst]=element};this.popFront=function(){if(this.empty())return;if(this.size()!==1){if(curFirst<Deque.bucketSize-1){++curFirst}else if(first<last){++first;curFirst=0}}if(len>0)--len};this.shrinkToFit=function(){var _this=this;var arr=[];this.forEach(function(element){arr.push(element)});var _len=arr.length;map=[];var bucketNum=Math.ceil(_len/Deque.bucketSize);for(var i=0;i<bucketNum;++i){map.push(new Array(Deque.bucketSize))}this.clear();arr.forEach(function(element){return _this.pushBack(element)})};this.cut=function(pos){if(pos<0){this.clear();return}var _a=getElementIndex(pos),curNodeBucketIndex=_a.curNodeBucketIndex,curNodePointerIndex=_a.curNodePointerIndex;last=curNodeBucketIndex;curLast=curNodePointerIndex;len=pos+1};this[Symbol.iterator]=function(){return function(){var i,i,i,j,i;return __generator(this,function(_a){switch(_a.label){case 0:if(len===0)return[2];if(!(first===last))return[3,5];i=curFirst;_a.label=1;case 1:if(!(i<=curLast))return[3,4];return[4,map[first][i]];case 2:_a.sent();_a.label=3;case 3:++i;return[3,1];case 4:return[2];case 5:i=curFirst;_a.label=6;case 6:if(!(i<Deque.bucketSize))return[3,9];return[4,map[first][i]];case 7:_a.sent();_a.label=8;case 8:++i;return[3,6];case 9:i=first+1;_a.label=10;case 10:if(!(i<last))return[3,15];j=0;_a.label=11;case 11:if(!(j<Deque.bucketSize))return[3,14];return[4,map[i][j]];case 12:_a.sent();_a.label=13;case 13:++j;return[3,11];case 14:++i;return[3,10];case 15:i=0;_a.label=16;case 16:if(!(i<=curLast))return[3,19];return[4,map[last][i]];case 17:_a.sent();_a.label=18;case 18:++i;return[3,16];case 19:return[2]}})}()};(function(){var _len=Deque.bucketSize;if(container.size){_len=container.size()}else if(container.length){_len=container.length}var needSize=_len*Deque.sigma;bucketNum=Math.ceil(needSize/Deque.bucketSize);bucketNum=Math.max(bucketNum,3);for(var i=0;i<bucketNum;++i){map.push(new Array(Deque.bucketSize))}var needBucketNum=Math.ceil(_len/Deque.bucketSize);first=Math.floor(bucketNum/2)-Math.floor(needBucketNum/2);last=first;container.forEach(function(element){return _this.pushBack(element)})})();Object.freeze(this)}Object.freeze(Deque);exports.default=Deque},{}],89:[function(require,module,exports){"use strict";var __generator=this&&this.__generator||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}};var __values=this&&this.__values||function(o){var s=typeof Symbol==="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length==="number")return{next:function(){if(o&&i>=o.length)o=void 0;return{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:true});var LinkList_1=require("../LinkList/LinkList");var Map_1=require("../Map/Map");HashMap.initSize=1<<4;HashMap.maxSize=1<<30;HashMap.sigma=.75;HashMap.treeifyThreshold=8;HashMap.untreeifyThreshold=6;HashMap.minTreeifySize=64;function HashMap(container,initBucketNum,hashFunc){var _this=this;if(container===void 0){container=[]}if(initBucketNum===void 0){initBucketNum=HashMap.initSize}hashFunc=hashFunc||function(x){var e_1,_a;var hashCode=0;var str="";if(typeof x==="number"){hashCode=Math.floor(x);hashCode=(hashCode<<5)-hashCode;hashCode=hashCode&hashCode}else{if(typeof x!=="string"){str=JSON.stringify(x)}else str=x;try{for(var str_1=__values(str),str_1_1=str_1.next();!str_1_1.done;str_1_1=str_1.next()){var ch=str_1_1.value;var character=ch.charCodeAt(0);hashCode=(hashCode<<5)-hashCode+character;hashCode=hashCode&hashCode}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(str_1_1&&!str_1_1.done&&(_a=str_1.return))_a.call(str_1)}finally{if(e_1)throw e_1.error}}}hashCode^=hashCode>>>16;return hashCode};if((initBucketNum&initBucketNum-1)!==0){throw new Error("initBucketNum must be 2 to the power of n")}var len=0;var hashTable=[];var bucketNum=Math.max(HashMap.initSize,Math.min(HashMap.maxSize,initBucketNum));this.size=function(){return len};this.empty=function(){return len===0};this.clear=function(){len=0;bucketNum=initBucketNum;hashTable=[]};this.forEach=function(callback){var index=0;hashTable.forEach(function(container){container.forEach(function(element){callback(element,index++)})})};var reAllocate=function(originalBucketNum){if(originalBucketNum>=HashMap.maxSize)return;bucketNum=originalBucketNum*2;var newHashTable=[];hashTable.forEach(function(container,index){if(container.empty())return;if(container instanceof LinkList_1.default&&container.size()===1){var _a=container.front(),key=_a.key,value=_a.value;newHashTable[hashFunc(key)&bucketNum-1]=new LinkList_1.default([{key:key,value:value}])}else if(container instanceof Map_1.default){var lowList_1=new LinkList_1.default;var highList_1=new LinkList_1.default;container.forEach(function(pair){var hashCode=hashFunc(pair.key);if((hashCode&originalBucketNum)===0){lowList_1.pushBack(pair)}else highList_1.pushBack(pair)});if(lowList_1.size()>HashMap.untreeifyThreshold)newHashTable[index]=new Map_1.default(lowList_1);else if(lowList_1.size())newHashTable[index]=lowList_1;if(highList_1.size()>HashMap.untreeifyThreshold)newHashTable[index+originalBucketNum]=new Map_1.default(highList_1);else if(highList_1.size())newHashTable[index+originalBucketNum]=highList_1}else{var lowList_2=new LinkList_1.default;var highList_2=new LinkList_1.default;container.forEach(function(pair){var hashCode=hashFunc(pair.key);if((hashCode&originalBucketNum)===0){lowList_2.pushBack(pair)}else highList_2.pushBack(pair)});if(lowList_2.size())newHashTable[index]=lowList_2;if(highList_2.size())newHashTable[index+originalBucketNum]=highList_2}hashTable[index].clear()});hashTable=newHashTable};this.setElement=function(key,value){var e_2,_a;if(key===null||key===undefined){throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here")}if(value===null||value===undefined){this.eraseElementByKey(key);return}var index=hashFunc(key)&bucketNum-1;if(!hashTable[index]){++len;hashTable[index]=new LinkList_1.default([{key:key,value:value}])}else{var preSize=hashTable[index].size();if(hashTable[index]instanceof LinkList_1.default){try{for(var _b=__values(hashTable[index]),_c=_b.next();!_c.done;_c=_b.next()){var pair=_c.value;if(pair.key===key){pair.value=value;return}}}catch(e_2_1){e_2={error:e_2_1}}finally{try{if(_c&&!_c.done&&(_a=_b.return))_a.call(_b)}finally{if(e_2)throw e_2.error}}hashTable[index].pushBack({key:key,value:value});if(hashTable[index].size()>=HashMap.treeifyThreshold){hashTable[index]=new Map_1.default(hashTable[index])}}else hashTable[index].setElement(key,value);var curSize=hashTable[index].size();len+=curSize-preSize}if(len>bucketNum*HashMap.sigma){reAllocate.call(this,bucketNum)}};this.getElementByKey=function(key){var e_3,_a;var index=hashFunc(key)&bucketNum-1;if(!hashTable[index])return undefined;if(hashTable[index]instanceof Map_1.default)return hashTable[index].getElementByKey(key);else{try{for(var _b=__values(hashTable[index]),_c=_b.next();!_c.done;_c=_b.next()){var pair=_c.value;if(pair.key===key)return pair.value}}catch(e_3_1){e_3={error:e_3_1}}finally{try{if(_c&&!_c.done&&(_a=_b.return))_a.call(_b)}finally{if(e_3)throw e_3.error}}return undefined}};this.eraseElementByKey=function(key){var e_4,_a;var index=hashFunc(key)&bucketNum-1;if(!hashTable[index])return;var preSize=hashTable[index].size();if(hashTable[index]instanceof Map_1.default){hashTable[index].eraseElementByKey(key);if(hashTable[index].size()<=HashMap.untreeifyThreshold){hashTable[index]=new LinkList_1.default(hashTable[index])}}else{var pos=-1;try{for(var _b=__values(hashTable[index]),_c=_b.next();!_c.done;_c=_b.next()){var pair=_c.value;++pos;if(pair.key===key){hashTable[index].eraseElementByPos(pos);break}}}catch(e_4_1){e_4={error:e_4_1}}finally{try{if(_c&&!_c.done&&(_a=_b.return))_a.call(_b)}finally{if(e_4)throw e_4.error}}}var curSize=hashTable[index].size();len+=curSize-preSize};this.find=function(key){var e_5,_a;var index=hashFunc(key)&bucketNum-1;if(!hashTable[index])return false;if(hashTable[index]instanceof Map_1.default)return hashTable[index].find(key);try{for(var _b=__values(hashTable[index]),_c=_b.next();!_c.done;_c=_b.next()){var pair=_c.value;if(pair.key===key)return true}}catch(e_5_1){e_5={error:e_5_1}}finally{try{if(_c&&!_c.done&&(_a=_b.return))_a.call(_b)}finally{if(e_5)throw e_5.error}}return false};this[Symbol.iterator]=function(){return function(){var index,_a,_b,pair,e_6_1;var e_6,_c;return __generator(this,function(_d){switch(_d.label){case 0:index=0;_d.label=1;case 1:if(!(index<bucketNum))return[3,10];while(index<bucketNum&&!hashTable[index])++index;if(index>=bucketNum)return[3,10];_d.label=2;case 2:_d.trys.push([2,7,8,9]);_a=(e_6=void 0,__values(hashTable[index])),_b=_a.next();_d.label=3;case 3:if(!!_b.done)return[3,6];pair=_b.value;return[4,pair];case 4:_d.sent();_d.label=5;case 5:_b=_a.next();return[3,3];case 6:return[3,9];case 7:e_6_1=_d.sent();e_6={error:e_6_1};return[3,9];case 8:try{if(_b&&!_b.done&&(_c=_a.return))_c.call(_a)}finally{if(e_6)throw e_6.error}return[7];case 9:++index;return[3,1];case 10:return[2]}})}()};container.forEach(function(_a){var key=_a.key,value=_a.value;return _this.setElement(key,value)});Object.freeze(this)}Object.freeze(HashMap);exports.default=HashMap},{"../LinkList/LinkList":91,"../Map/Map":92}],90:[function(require,module,exports){"use strict";var __generator=this&&this.__generator||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}};var __values=this&&this.__values||function(o){var s=typeof Symbol==="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length==="number")return{next:function(){if(o&&i>=o.length)o=void 0;return{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:true});var Set_1=require("../Set/Set");var LinkList_1=require("../LinkList/LinkList");HashSet.initSize=1<<4;HashSet.maxSize=1<<30;HashSet.sigma=.75;HashSet.treeifyThreshold=8;HashSet.untreeifyThreshold=6;HashSet.minTreeifySize=64;function HashSet(container,initBucketNum,hashFunc){var _this=this;if(container===void 0){container=[]}if(initBucketNum===void 0){initBucketNum=HashSet.initSize}hashFunc=hashFunc||function(x){var hashCode=0;var str="";if(typeof x==="number"){hashCode=Math.floor(x);hashCode=(hashCode<<5)-hashCode;hashCode=hashCode&hashCode}else{if(typeof x!=="string"){str=JSON.stringify(x)}else str=x;for(var i=0;i<str.length;i++){var character=str.charCodeAt(i);hashCode=(hashCode<<5)-hashCode+character;hashCode=hashCode&hashCode}}hashCode^=hashCode>>>16;return hashCode};if((initBucketNum&initBucketNum-1)!==0){throw new Error("initBucketNum must be 2 to the power of n")}var len=0;var hashTable=[];var bucketNum=Math.max(HashSet.initSize,Math.min(HashSet.maxSize,initBucketNum));this.size=function(){return len};this.empty=function(){return len===0};this.clear=function(){len=0;bucketNum=initBucketNum;hashTable=[]};this.forEach=function(callback){var index=0;hashTable.forEach(function(container){container.forEach(function(element){callback(element,index++)})})};var reAllocate=function(originalBucketNum){if(originalBucketNum>=HashSet.maxSize)return;bucketNum=originalBucketNum*2;var newHashTable=[];hashTable.forEach(function(container,index){if(container.empty())return;if(container instanceof LinkList_1.default&&container.size()===1){var element=container.front();if(element===undefined)throw new Error("unknown error");newHashTable[hashFunc(element)&bucketNum-1]=new LinkList_1.default([element])}else if(container instanceof Set_1.default){var lowList_1=new LinkList_1.default;var highList_1=new LinkList_1.default;container.forEach(function(element){var hashCode=hashFunc(element);if((hashCode&originalBucketNum)===0){lowList_1.pushBack(element)}else highList_1.pushBack(element)});if(lowList_1.size()>HashSet.untreeifyThreshold)newHashTable[index]=new Set_1.default(lowList_1);else if(lowList_1.size())newHashTable[index]=lowList_1;if(highList_1.size()>HashSet.untreeifyThreshold)newHashTable[index+originalBucketNum]=new Set_1.default(highList_1);else if(highList_1.size())newHashTable[index+originalBucketNum]=highList_1}else{var lowList_2=new LinkList_1.default;var highList_2=new LinkList_1.default;container.forEach(function(element){var hashCode=hashFunc(element);if((hashCode&originalBucketNum)===0){lowList_2.pushBack(element)}else highList_2.pushBack(element)});if(lowList_2.size())newHashTable[index]=lowList_2;if(highList_2.size())newHashTable[index+originalBucketNum]=highList_2}hashTable[index].clear()});hashTable=newHashTable};this.insert=function(element){if(element===null||element===undefined){throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here")}var index=hashFunc(element)&bucketNum-1;if(!hashTable[index]){hashTable[index]=new LinkList_1.default([element]);++len}else{var preSize=hashTable[index].size();if(hashTable[index]instanceof LinkList_1.default){if(hashTable[index].find(element))return;hashTable[index].pushBack(element);if(hashTable[index].size()>=HashSet.treeifyThreshold){hashTable[index]=new Set_1.default(hashTable[index])}}else hashTable[index].insert(element);var curSize=hashTable[index].size();len+=curSize-preSize}if(len>bucketNum*HashSet.sigma){reAllocate.call(this,bucketNum)}};this.eraseElementByValue=function(element){var index=hashFunc(element)&bucketNum-1;if(!hashTable[index])return;var preSize=hashTable[index].size();hashTable[index].eraseElementByValue(element);if(hashTable[index]instanceof Set_1.default){if(hashTable[index].size()<=HashSet.untreeifyThreshold){hashTable[index]=new LinkList_1.default(hashTable[index])}}var curSize=hashTable[index].size();len+=curSize-preSize};this.find=function(element){var index=hashFunc(element)&bucketNum-1;if(!hashTable[index])return false;return hashTable[index].find(element)};this[Symbol.iterator]=function(){return function(){var index,_a,_b,element,e_1_1;var e_1,_c;return __generator(this,function(_d){switch(_d.label){case 0:index=0;_d.label=1;case 1:if(!(index<bucketNum))return[3,10];while(index<bucketNum&&!hashTable[index])++index;if(index>=bucketNum)return[3,10];_d.label=2;case 2:_d.trys.push([2,7,8,9]);_a=(e_1=void 0,__values(hashTable[index])),_b=_a.next();_d.label=3;case 3:if(!!_b.done)return[3,6];element=_b.value;return[4,element];case 4:_d.sent();_d.label=5;case 5:_b=_a.next();return[3,3];case 6:return[3,9];case 7:e_1_1=_d.sent();e_1={error:e_1_1};return[3,9];case 8:try{if(_b&&!_b.done&&(_c=_a.return))_c.call(_a)}finally{if(e_1)throw e_1.error}return[7];case 9:++index;return[3,1];case 10:return[2]}})}()};container.forEach(function(element){return _this.insert(element)});Object.freeze(this)}Object.freeze(HashSet);exports.default=HashSet},{"../LinkList/LinkList":91,"../Set/Set":95}],91:[function(require,module,exports){"use strict";var __generator=this&&this.__generator||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}};Object.defineProperty(exports,"__esModule",{value:true});var LinkNode=function(){function LinkNode(element){this.value=undefined;this.pre=undefined;this.next=undefined;this.value=element}return LinkNode}();function LinkList(container){var _this=this;if(container===void 0){container=[]}var len=0;var head=undefined;var tail=undefined;this.size=function(){return len};this.empty=function(){return len===0};this.clear=function(){head=tail=undefined;len=0};this.front=function(){return head===null||head===void 0?void 0:head.value};this.back=function(){return tail===null||tail===void 0?void 0:tail.value};this.forEach=function(callback){var curNode=head;var index=0;while(curNode){if(curNode.value===undefined)throw new Error("unknown error");callback(curNode.value,index++);curNode=curNode.next}};this.getElementByPos=function(pos){if(pos<0||pos>=len)throw new Error("pos must more then 0 and less then the list length");var curNode=head;while(pos--){if(!curNode)break;curNode=curNode.next}if(!curNode||curNode.value===undefined)throw new Error("unknown error");return curNode.value};this.eraseElementByPos=function(pos){if(pos<0||pos>=len)throw new Error("erase pos must more then 0 and less then the list length");if(pos===0)this.popFront();else if(pos===len-1)this.popBack();else{var curNode=head;while(pos--){if(!(curNode===null||curNode===void 0?void 0:curNode.next))throw new Error("unknown error");curNode=curNode.next}if(!curNode||!curNode.pre||!curNode.next){throw new Error("unknown error")}var pre=curNode.pre;var next=curNode.next;next.pre=pre;pre.next=next;if(len>0)--len}};this.eraseElementByValue=function(value){while(head&&head.value===value)this.popFront();while(tail&&tail.value===value)this.popBack();if(!head)return;var curNode=head;while(curNode){if(curNode.value===value){var pre=curNode.pre;var next=curNode.next;if(next)next.pre=pre;if(pre)pre.next=next;if(len>0)--len}curNode=curNode.next}};this.pushBack=function(element){if(element===null||element===undefined){throw new Error("you can't push null or undefined here")}++len;var newTail=new LinkNode(element);if(!tail){head=tail=newTail}else{tail.next=newTail;newTail.pre=tail;tail=newTail}};this.popBack=function(){if(!tail)return;if(len>0)--len;if(!tail)return;if(head===tail){head=tail=undefined}else{tail=tail.pre;if(tail)tail.next=undefined}};this.setElementByPos=function(pos,element){if(element===null||element===undefined){throw new Error("you can't set null or undefined here")}if(pos<0||pos>=len)throw new Error("pos must more then 0 and less then the list length");var curNode=head;while(pos--){if(!curNode)throw new Error("unknown error");curNode=curNode.next}if(curNode)curNode.value=element};this.insert=function(pos,element,num){if(num===void 0){num=1}if(element===null||element===undefined){throw new Error("you can't insert null or undefined here")}if(pos<0||pos>len)throw new Error("insert pos must more then 0 and less then or equal to the list length");if(num<0)throw new Error("insert size must more than 0");if(pos===0){while(num--)this.pushFront(element)}else if(pos===len){while(num--)this.pushBack(element)}else{var curNode=head;for(var i=1;i<pos;++i){if(!(curNode===null||curNode===void 0?void 0:curNode.next))throw new Error("unknown error");curNode=curNode===null||curNode===void 0?void 0:curNode.next}if(!curNode){throw new Error("unknown error")}var next=curNode.next;len+=num;while(num--){curNode.next=new LinkNode(element);curNode.next.pre=curNode;curNode=curNode.next}curNode.next=next;if(next)next.pre=curNode}};this.find=function(element){var curNode=head;while(curNode){if(curNode.value===element)return true;curNode=curNode.next}return false};this.reverse=function(){var pHead=head;var pTail=tail;var cnt=0;while(pHead&&pTail&&cnt*2<len){var tmp=pHead.value;pHead.value=pTail.value;pTail.value=tmp;pHead=pHead.next;pTail=pTail.pre;++cnt}};this.unique=function(){var curNode=head;while(curNode){var tmpNode=curNode;while(tmpNode&&tmpNode.next&&tmpNode.value===tmpNode.next.value){tmpNode=tmpNode.next;if(len>0)--len}curNode.next=tmpNode.next;if(curNode.next)curNode.next.pre=curNode;curNode=curNode.next}};this.sort=function(cmp){var arr=[];this.forEach(function(element){arr.push(element)});arr.sort(cmp);var curNode=head;arr.forEach(function(element){if(curNode){curNode.value=element;curNode=curNode.next}})};this.pushFront=function(element){if(element===null||element===undefined){throw new Error("you can't push null or undefined here")}++len;var newHead=new LinkNode(element);if(!head){head=tail=newHead}else{newHead.next=head;head.pre=newHead;head=newHead}};this.popFront=function(){if(!head)return;if(len>0)--len;if(!head)return;if(head===tail){head=tail=undefined}else{head=head.next;if(head)head.pre=undefined}};this.merge=function(list){var _this=this;var curNode=head;list.forEach(function(element){while(curNode&&curNode.value!==undefined&&curNode.value<=element){curNode=curNode.next}if(curNode===undefined){_this.pushBack(element);curNode=tail}else if(curNode===head){_this.pushFront(element);curNode=head}else{++len;var pre=curNode.pre;if(pre){pre.next=new LinkNode(element);pre.next.pre=pre;pre.next.next=curNode;if(curNode)curNode.pre=pre.next}}})};this[Symbol.iterator]=function(){return function(){var curNode;return __generator(this,function(_a){switch(_a.label){case 0:curNode=head;_a.label=1;case 1:if(!(curNode!==undefined))return[3,3];if(!curNode.value)throw new Error("unknown error");return[4,curNode.value];case 2:_a.sent();curNode=curNode.next;return[3,1];case 3:return[2]}})}()};container.forEach(function(element){return _this.pushBack(element)});Object.freeze(this)}Object.freeze(LinkList);exports.default=LinkList},{}],92:[function(require,module,exports){"use strict";var __generator=this&&this.__generator||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}};var __values=this&&this.__values||function(o){var s=typeof Symbol==="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length==="number")return{next:function(){if(o&&i>=o.length)o=void 0;return{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:true});var TreeNode_1=require("../Base/TreeNode");function Map(container,cmp){var _this=this;if(container===void 0){container=[]}cmp=cmp||function(x,y){if(x<y)return-1;if(x>y)return 1;return 0};var len=0;var root=new TreeNode_1.default;root.color=TreeNode_1.default.TreeNodeColorType.black;this.size=function(){return len};this.empty=function(){return len===0};this.clear=function(){len=0;root.key=root.value=undefined;root.leftChild=root.rightChild=root.brother=undefined};var findSubTreeMinNode=function(curNode){if(!curNode||curNode.key===undefined)throw new Error("unknown error");return curNode.leftChild?findSubTreeMinNode(curNode.leftChild):curNode};var findSubTreeMaxNode=function(curNode){if(!curNode||curNode.key===undefined)throw new Error("unknown error");return curNode.rightChild?findSubTreeMaxNode(curNode.rightChild):curNode};this.front=function(){if(this.empty())return undefined;var minNode=findSubTreeMinNode(root);if(minNode.key===undefined||minNode.value===undefined)throw new Error("unknown error");return{key:minNode.key,value:minNode.value}};this.back=function(){if(this.empty())return undefined;var maxNode=findSubTreeMaxNode(root);if(maxNode.key===undefined||maxNode.value===undefined)throw new Error("unknown error");return{key:maxNode.key,value:maxNode.value}};this.forEach=function(callback){var e_1,_a;var index=0;try{for(var _b=__values(this),_c=_b.next();!_c.done;_c=_b.next()){var pair=_c.value;callback(pair,index++)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(_c&&!_c.done&&(_a=_b.return))_a.call(_b)}finally{if(e_1)throw e_1.error}}};this.getElementByPos=function(pos){var e_2,_a;if(pos<0||pos>=this.size())throw new Error("pos must more than 0 and less than set's size");var index=0;try{for(var _b=__values(this),_c=_b.next();!_c.done;_c=_b.next()){var pair=_c.value;if(index===pos)return pair;++index}}catch(e_2_1){e_2={error:e_2_1}}finally{try{if(_c&&!_c.done&&(_a=_b.return))_a.call(_b)}finally{if(e_2)throw e_2.error}}throw new Error("unknown Error")};var _lowerBound=function(curNode,key){if(!curNode||curNode.key===undefined||curNode.value===undefined)return undefined;var cmpResult=cmp(curNode.key,key);if(cmpResult===0)return{key:curNode.key,value:curNode.value};if(cmpResult<0)return _lowerBound(curNode.rightChild,key);return _lowerBound(curNode.leftChild,key)||{key:curNode.key,value:curNode.value}};this.lowerBound=function(key){return _lowerBound(root,key)};var _upperBound=function(curNode,key){if(!curNode||curNode.key===undefined||curNode.value===undefined)return undefined;var cmpResult=cmp(curNode.key,key);if(cmpResult<=0)return _upperBound(curNode.rightChild,key);return _upperBound(curNode.leftChild,key)||{key:curNode.key,value:curNode.value}};this.upperBound=function(key){return _upperBound(root,key)};var _reverseLowerBound=function(curNode,key){if(!curNode||curNode.key===undefined||curNode.value===undefined)return undefined;var cmpResult=cmp(curNode.key,key);if(cmpResult===0)return{key:curNode.key,value:curNode.value};if(cmpResult>0)return _reverseLowerBound(curNode.leftChild,key);return _reverseLowerBound(curNode.rightChild,key)||{key:curNode.key,value:curNode.value}};this.reverseLowerBound=function(key){return _reverseLowerBound(root,key)};var _reverseUpperBound=function(curNode,key){if(!curNode||curNode.key===undefined||curNode.value===undefined)return undefined;var cmpResult=cmp(curNode.key,key);if(cmpResult>=0)return _reverseUpperBound(curNode.leftChild,key);return _reverseUpperBound(curNode.rightChild,key)||{key:curNode.key,value:curNode.value}};this.reverseUpperBound=function(key){return _reverseUpperBound(root,key)};var eraseNodeSelfBalance=function(curNode){var parentNode=curNode.parent;if(!parentNode){if(curNode===root)return;throw new Error("unknown error")}if(curNode.color===TreeNode_1.default.TreeNodeColorType.red){curNode.color=TreeNode_1.default.TreeNodeColorType.black;return}var brotherNode=curNode.brother;if(!brotherNode)throw new Error("unknown error");if(curNode===parentNode.leftChild){if(brotherNode.color===TreeNode_1.default.TreeNodeColorType.red){brotherNode.color=TreeNode_1.default.TreeNodeColorType.black;parentNode.color=TreeNode_1.default.TreeNodeColorType.red;var newRoot=parentNode.rotateLeft();if(root===parentNode)root=newRoot;eraseNodeSelfBalance(curNode)}else if(brotherNode.color===TreeNode_1.default.TreeNodeColorType.black){if(brotherNode.rightChild&&brotherNode.rightChild.color===TreeNode_1.default.TreeNodeColorType.red){brotherNode.color=parentNode.color;parentNode.color=TreeNode_1.default.TreeNodeColorType.black;if(brotherNode.rightChild)brotherNode.rightChild.color=TreeNode_1.default.TreeNodeColorType.black;var newRoot=parentNode.rotateLeft();if(root===parentNode)root=newRoot;curNode.color=TreeNode_1.default.TreeNodeColorType.black}else if((!brotherNode.rightChild||brotherNode.rightChild.color===TreeNode_1.default.TreeNodeColorType.black)&&brotherNode.leftChild&&brotherNode.leftChild.color===TreeNode_1.default.TreeNodeColorType.red){brotherNode.color=TreeNode_1.default.TreeNodeColorType.red;if(brotherNode.leftChild)brotherNode.leftChild.color=TreeNode_1.default.TreeNodeColorType.black;var newRoot=brotherNode.rotateRight();if(root===brotherNode)root=newRoot;eraseNodeSelfBalance(curNode)}else if((!brotherNode.leftChild||brotherNode.leftChild.color===TreeNode_1.default.TreeNodeColorType.black)&&(!brotherNode.rightChild||brotherNode.rightChild.color===TreeNode_1.default.TreeNodeColorType.black)){brotherNode.color=TreeNode_1.default.TreeNodeColorType.red;eraseNodeSelfBalance(parentNode)}}}else if(curNode===parentNode.rightChild){if(brotherNode.color===TreeNode_1.default.TreeNodeColorType.red){brotherNode.color=TreeNode_1.default.TreeNodeColorType.black;parentNode.color=TreeNode_1.default.TreeNodeColorType.red;var newRoot=parentNode.rotateRight();if(root===parentNode)root=newRoot;eraseNodeSelfBalance(curNode)}else if(brotherNode.color===TreeNode_1.default.TreeNodeColorType.black){if(brotherNode.leftChild&&brotherNode.leftChild.color===TreeNode_1.default.TreeNodeColorType.red){brotherNode.color=parentNode.color;parentNode.color=TreeNode_1.default.TreeNodeColorType.black;if(brotherNode.leftChild)brotherNode.leftChild.color=TreeNode_1.default.TreeNodeColorType.black;var newRoot=parentNode.rotateRight();if(root===parentNode)root=newRoot;curNode.color=TreeNode_1.default.TreeNodeColorType.black}else if((!brotherNode.leftChild||brotherNode.leftChild.color===TreeNode_1.default.TreeNodeColorType.black)&&brotherNode.rightChild&&brotherNode.rightChild.color===TreeNode_1.default.TreeNodeColorType.red){brotherNode.color=TreeNode_1.default.TreeNodeColorType.red;if(brotherNode.rightChild)brotherNode.rightChild.color=TreeNode_1.default.TreeNodeColorType.black;var newRoot=brotherNode.rotateLeft();if(root===brotherNode)root=newRoot;eraseNodeSelfBalance(curNode)}else if((!brotherNode.leftChild||brotherNode.leftChild.color===TreeNode_1.default.TreeNodeColorType.black)&&(!brotherNode.rightChild||brotherNode.rightChild.color===TreeNode_1.default.TreeNodeColorType.black)){brotherNode.color=TreeNode_1.default.TreeNodeColorType.red;eraseNodeSelfBalance(parentNode)}}}};var eraseNode=function(curNode){var swapNode=curNode;while(swapNode.leftChild||swapNode.rightChild){if(swapNode.rightChild){swapNode=findSubTreeMinNode(swapNode.rightChild);var tmpKey=curNode.key;curNode.key=swapNode.key;swapNode.key=tmpKey;var tmpValue=curNode.value;curNode.value=swapNode.value;swapNode.value=tmpValue;curNode=swapNode}if(swapNode.leftChild){swapNode=findSubTreeMaxNode(swapNode.leftChild);var tmpKey=curNode.key;curNode.key=swapNode.key;swapNode.key=tmpKey;var tmpValue=curNode.value;curNode.value=swapNode.value;swapNode.value=tmpValue;curNode=swapNode}}eraseNodeSelfBalance(swapNode);if(swapNode)swapNode.remove();--len;root.color=TreeNode_1.default.TreeNodeColorType.black};var inOrderTraversal=function(curNode,callback){if(!curNode||curNode.key===undefined)return false;var ifReturn=inOrderTraversal(curNode.leftChild,callback);if(ifReturn)return true;if(callback(curNode))return true;return inOrderTraversal(curNode.rightChild,callback)};this.eraseElementByPos=function(pos){if(pos<0||pos>=len)throw new Error("pos must more than 0 and less than set's size");var index=0;inOrderTraversal(root,function(curNode){if(pos===index){eraseNode(curNode);return true}++index;return false})};this.eraseElementByKey=function(key){if(this.empty())return;var curNode=findElementPos(root,key);if(curNode===undefined||curNode.key===undefined||cmp(curNode.key,key)!==0)return;eraseNode(curNode)};var findInsertPos=function(curNode,element){if(!curNode||curNode.key===undefined)throw new Error("unknown error");var cmpResult=cmp(element,curNode.key);if(cmpResult<0){if(!curNode.leftChild){curNode.leftChild=new TreeNode_1.default;curNode.leftChild.parent=curNode;curNode.leftChild.brother=curNode.rightChild;if(curNode.rightChild)curNode.rightChild.brother=curNode.leftChild;return curNode.leftChild}return findInsertPos(curNode.leftChild,element)}else if(cmpResult>0){if(!curNode.rightChild){curNode.rightChild=new TreeNode_1.default;curNode.rightChild.parent=curNode;curNode.rightChild.brother=curNode.leftChild;if(curNode.leftChild)curNode.leftChild.brother=curNode.rightChild;return curNode.rightChild}return findInsertPos(curNode.rightChild,element)}return curNode};var insertNodeSelfBalance=function(curNode){var parentNode=curNode.parent;if(!parentNode){if(curNode===root)return;throw new Error("unknown error")}if(parentNode.color===TreeNode_1.default.TreeNodeColorType.black)return;if(parentNode.color===TreeNode_1.default.TreeNodeColorType.red){var uncleNode=parentNode.brother;var grandParent=parentNode.parent;if(!grandParent)throw new Error("unknown error");if(uncleNode&&uncleNode.color===TreeNode_1.default.TreeNodeColorType.red){uncleNode.color=parentNode.color=TreeNode_1.default.TreeNodeColorType.black;grandParent.color=TreeNode_1.default.TreeNodeColorType.red;insertNodeSelfBalance(grandParent)}else if(!uncleNode||uncleNode.color===TreeNode_1.default.TreeNodeColorType.black){if(parentNode===grandParent.leftChild){if(curNode===parentNode.leftChild){parentNode.color=TreeNode_1.default.TreeNodeColorType.black;grandParent.color=TreeNode_1.default.TreeNodeColorType.red;var newRoot=grandParent.rotateRight();if(grandParent===root)root=newRoot}else if(curNode===parentNode.rightChild){var newRoot=parentNode.rotateLeft();if(grandParent===root)root=newRoot;insertNodeSelfBalance(parentNode)}}else if(parentNode===grandParent.rightChild){if(curNode===parentNode.leftChild){var newRoot=parentNode.rotateRight();if(grandParent===root)root=newRoot;insertNodeSelfBalance(parentNode)}else if(curNode===parentNode.rightChild){parentNode.color=TreeNode_1.default.TreeNodeColorType.black;grandParent.color=TreeNode_1.default.TreeNodeColorType.red;var newRoot=grandParent.rotateLeft();if(grandParent===root)root=newRoot}}}}};this.setElement=function(key,value){if(key===null||key===undefined){throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here")}if(value===null||value===undefined){this.eraseElementByKey(key);return}if(this.empty()){++len;root.key=key;root.value=value;root.color=TreeNode_1.default.TreeNodeColorType.black;return}var curNode=findInsertPos(root,key);if(curNode.key!==undefined&&cmp(curNode.key,key)===0){curNode.value=value;return}++len;curNode.key=key;curNode.value=value;insertNodeSelfBalance(curNode);root.color=TreeNode_1.default.TreeNodeColorType.black};var findElementPos=function(curNode,element){if(!curNode||curNode.key===undefined)return undefined;var cmpResult=cmp(element,curNode.key);if(cmpResult<0)return findElementPos(curNode.leftChild,element);else if(cmpResult>0)return findElementPos(curNode.rightChild,element);return curNode};this.find=function(element){return!!findElementPos(root,element)};this.getElementByKey=function(element){var curNode=findElementPos(root,element);if((curNode===null||curNode===void 0?void 0:curNode.key)===undefined||(curNode===null||curNode===void 0?void 0:curNode.value)===undefined)throw new Error("unknown error");return curNode.value};this.union=function(other){var _this=this;other.forEach(function(_a){var key=_a.key,value=_a.value;return _this.setElement(key,value)})};this.getHeight=function(){if(this.empty())return 0;var traversal=function(curNode){if(!curNode)return 1;return Math.max(traversal(curNode.leftChild),traversal(curNode.rightChild))+1};return traversal(root)};var iterationFunc=function(curNode){return __generator(this,function(_a){switch(_a.label){case 0:if(!curNode||curNode.key===undefined||curNode.value===undefined)return[2];return[5,__values(iterationFunc(curNode.leftChild))];case 1:_a.sent();return[4,{key:curNode.key,value:curNode.value}];case 2:_a.sent();return[5,__values(iterationFunc(curNode.rightChild))];case 3:_a.sent();return[2]}})};this[Symbol.iterator]=function(){return iterationFunc(root)};container.forEach(function(_a){var key=_a.key,value=_a.value;return _this.setElement(key,value)});Object.freeze(this)}Object.freeze(Map);exports.default=Map},{"../Base/TreeNode":87}],93:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function PriorityQueue(container,cmp){if(container===void 0){container=[]}cmp=cmp||function(x,y){if(x>y)return-1;if(x<y)return 1;return 0};var priorityQueue=[];container.forEach(function(element){return priorityQueue.push(element)});var len=priorityQueue.length;var swap=function(x,y){if(x<0||x>=len)throw new Error("unknown error");if(y<0||y>=len)throw new Error("unknown error");var tmp=priorityQueue[x];priorityQueue[x]=priorityQueue[y];priorityQueue[y]=tmp};var adjust=function(parent){if(parent<0||parent>=len)throw new Error("unknown error");var leftChild=parent*2+1;var rightChild=parent*2+2;if(leftChild<len&&cmp(priorityQueue[parent],priorityQueue[leftChild])>0)swap(parent,leftChild);if(rightChild<len&&cmp(priorityQueue[parent],priorityQueue[rightChild])>0)swap(parent,rightChild)};(function(){for(var parent_1=Math.floor((len-1)/2);parent_1>=0;--parent_1){var curParent=parent_1;var curChild=curParent*2+1;while(curChild<len){var leftChild=curChild;var rightChild=leftChild+1;var minChild=leftChild;if(rightChild<len&&cmp(priorityQueue[leftChild],priorityQueue[rightChild])>0)minChild=rightChild;if(cmp(priorityQueue[curParent],priorityQueue[minChild])<=0)break;swap(curParent,minChild);curParent=minChild;curChild=curParent*2+1}}})();this.size=function(){return len};this.empty=function(){return len===0};this.clear=function(){len=0;priorityQueue.length=0};this.push=function(element){priorityQueue.push(element);++len;if(len===1)return;var curNode=len-1;while(curNode>0){var parent_2=Math.floor((curNode-1)/2);if(cmp(priorityQueue[parent_2],element)<=0)break;adjust(parent_2);curNode=parent_2}};this.pop=function(){if(this.empty())return;if(this.size()===1){--len;return}var last=priorityQueue[len-1];--len;var parent=0;while(parent<this.size()){var leftChild=parent*2+1;var rightChild=parent*2+2;if(leftChild>=this.size())break;var minChild=leftChild;if(rightChild<this.size()&&cmp(priorityQueue[leftChild],priorityQueue[rightChild])>0)minChild=rightChild;if(cmp(priorityQueue[minChild],last)>=0)break;priorityQueue[parent]=priorityQueue[minChild];parent=minChild}priorityQueue[parent]=last};this.top=function(){return priorityQueue[0]};Object.freeze(this)}Object.freeze(PriorityQueue);exports.default=PriorityQueue},{}],94:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var LinkList_1=require("../LinkList/LinkList");function Queue(container){if(container===void 0){container=[]}var queue=new LinkList_1.default(container);this.size=function(){return queue.size()};this.empty=function(){return queue.empty()};this.clear=function(){queue.clear()};this.push=function(element){queue.pushBack(element)};this.pop=function(){queue.popFront()};this.front=function(){return queue.front()};Object.freeze(this)}Object.freeze(Queue);exports.default=Queue},{"../LinkList/LinkList":91}],95:[function(require,module,exports){"use strict";var __generator=this&&this.__generator||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}};var __values=this&&this.__values||function(o){var s=typeof Symbol==="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length==="number")return{next:function(){if(o&&i>=o.length)o=void 0;return{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:true});var TreeNode_1=require("../Base/TreeNode");function Set(container,cmp){var _this=this;if(container===void 0){container=[]}cmp=cmp||function(x,y){if(x<y)return-1;if(x>y)return 1;return 0};var len=0;var root=new TreeNode_1.default;root.color=TreeNode_1.default.TreeNodeColorType.black;this.size=function(){return len};this.empty=function(){return len===0};this.clear=function(){len=0;root.key=undefined;root.leftChild=root.rightChild=root.brother=root.parent=undefined;root.color=TreeNode_1.default.TreeNodeColorType.black};var findSubTreeMinNode=function(curNode){if(!curNode||curNode.key===undefined)throw new Error("unknown error");return curNode.leftChild?findSubTreeMinNode(curNode.leftChild):curNode};var findSubTreeMaxNode=function(curNode){if(!curNode||curNode.key===undefined)throw new Error("unknown error");return curNode.rightChild?findSubTreeMaxNode(curNode.rightChild):curNode};this.front=function(){if(this.empty())return undefined;var minNode=findSubTreeMinNode(root);return minNode.key};this.back=function(){if(this.empty())return undefined;var maxNode=findSubTreeMaxNode(root);return maxNode.key};this.forEach=function(callback){var e_1,_a;var index=0;try{for(var _b=__values(this),_c=_b.next();!_c.done;_c=_b.next()){var element=_c.value;callback(element,index++)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(_c&&!_c.done&&(_a=_b.return))_a.call(_b)}finally{if(e_1)throw e_1.error}}};this.getElementByPos=function(pos){var e_2,_a;if(pos<0||pos>=this.size())throw new Error("pos must more than 0 and less than set's size");var index=0;try{for(var _b=__values(this),_c=_b.next();!_c.done;_c=_b.next()){var element=_c.value;if(index===pos)return element;++index}}catch(e_2_1){e_2={error:e_2_1}}finally{try{if(_c&&!_c.done&&(_a=_b.return))_a.call(_b)}finally{if(e_2)throw e_2.error}}throw new Error("unknown error")};var eraseNodeSelfBalance=function(curNode){var parentNode=curNode.parent;if(!parentNode){if(curNode===root)return;throw new Error("unknown error")}if(curNode.color===TreeNode_1.default.TreeNodeColorType.red){curNode.color=TreeNode_1.default.TreeNodeColorType.black;return}var brotherNode=curNode.brother;if(!brotherNode)throw new Error("unknown error");if(curNode===parentNode.leftChild){if(brotherNode.color===TreeNode_1.default.TreeNodeColorType.red){brotherNode.color=TreeNode_1.default.TreeNodeColorType.black;parentNode.color=TreeNode_1.default.TreeNodeColorType.red;var newRoot=parentNode.rotateLeft();if(root===parentNode)root=newRoot;eraseNodeSelfBalance(curNode)}else if(brotherNode.color===TreeNode_1.default.TreeNodeColorType.black){if(brotherNode.rightChild&&brotherNode.rightChild.color===TreeNode_1.default.TreeNodeColorType.red){brotherNode.color=parentNode.color;parentNode.color=TreeNode_1.default.TreeNodeColorType.black;if(brotherNode.rightChild)brotherNode.rightChild.color=TreeNode_1.default.TreeNodeColorType.black;var newRoot=parentNode.rotateLeft();if(root===parentNode)root=newRoot;curNode.color=TreeNode_1.default.TreeNodeColorType.black}else if((!brotherNode.rightChild||brotherNode.rightChild.color===TreeNode_1.default.TreeNodeColorType.black)&&brotherNode.leftChild&&brotherNode.leftChild.color===TreeNode_1.default.TreeNodeColorType.red){brotherNode.color=TreeNode_1.default.TreeNodeColorType.red;if(brotherNode.leftChild)brotherNode.leftChild.color=TreeNode_1.default.TreeNodeColorType.black;var newRoot=brotherNode.rotateRight();if(root===brotherNode)root=newRoot;eraseNodeSelfBalance(curNode)}else if((!brotherNode.leftChild||brotherNode.leftChild.color===TreeNode_1.default.TreeNodeColorType.black)&&(!brotherNode.rightChild||brotherNode.rightChild.color===TreeNode_1.default.TreeNodeColorType.black)){brotherNode.color=TreeNode_1.default.TreeNodeColorType.red;eraseNodeSelfBalance(parentNode)}}}else if(curNode===parentNode.rightChild){if(brotherNode.color===TreeNode_1.default.TreeNodeColorType.red){brotherNode.color=TreeNode_1.default.TreeNodeColorType.black;parentNode.color=TreeNode_1.default.TreeNodeColorType.red;var newRoot=parentNode.rotateRight();if(root===parentNode)root=newRoot;eraseNodeSelfBalance(curNode)}else if(brotherNode.color===TreeNode_1.default.TreeNodeColorType.black){if(brotherNode.leftChild&&brotherNode.leftChild.color===TreeNode_1.default.TreeNodeColorType.red){brotherNode.color=parentNode.color;parentNode.color=TreeNode_1.default.TreeNodeColorType.black;if(brotherNode.leftChild)brotherNode.leftChild.color=TreeNode_1.default.TreeNodeColorType.black;var newRoot=parentNode.rotateRight();if(root===parentNode)root=newRoot;curNode.color=TreeNode_1.default.TreeNodeColorType.black}else if((!brotherNode.leftChild||brotherNode.leftChild.color===TreeNode_1.default.TreeNodeColorType.black)&&brotherNode.rightChild&&brotherNode.rightChild.color===TreeNode_1.default.TreeNodeColorType.red){brotherNode.color=TreeNode_1.default.TreeNodeColorType.red;if(brotherNode.rightChild)brotherNode.rightChild.color=TreeNode_1.default.TreeNodeColorType.black;var newRoot=brotherNode.rotateLeft();if(root===brotherNode)root=newRoot;eraseNodeSelfBalance(curNode)}else if((!brotherNode.leftChild||brotherNode.leftChild.color===TreeNode_1.default.TreeNodeColorType.black)&&(!brotherNode.rightChild||brotherNode.rightChild.color===TreeNode_1.default.TreeNodeColorType.black)){brotherNode.color=TreeNode_1.default.TreeNodeColorType.red;eraseNodeSelfBalance(parentNode)}}}};var eraseNode=function(curNode){var swapNode=curNode;while(swapNode.leftChild||swapNode.rightChild){if(swapNode.rightChild){swapNode=findSubTreeMinNode(swapNode.rightChild);var tmpKey=curNode.key;curNode.key=swapNode.key;swapNode.key=tmpKey;curNode=swapNode}if(swapNode.leftChild){swapNode=findSubTreeMaxNode(swapNode.leftChild);var tmpKey=curNode.key;curNode.key=swapNode.key;swapNode.key=tmpKey;curNode=swapNode}}eraseNodeSelfBalance(swapNode);if(swapNode)swapNode.remove();--len;root.color=TreeNode_1.default.TreeNodeColorType.black};var inOrderTraversal=function(curNode,callback){if(!curNode||curNode.key===undefined)return false;var ifReturn=inOrderTraversal(curNode.leftChild,callback);if(ifReturn)return true;if(callback(curNode))return true;return inOrderTraversal(curNode.rightChild,callback)};this.eraseElementByPos=function(pos){if(pos<0||pos>=len)throw new Error("pos must more than 0 and less than set's size");var index=0;inOrderTraversal(root,function(curNode){if(pos===index){eraseNode(curNode);return true}++index;return false})};this.eraseElementByValue=function(value){if(this.empty())return;var curNode=findElementPos(root,value);if(curNode===undefined||curNode.key===undefined||cmp(curNode.key,value)!==0)return;eraseNode(curNode)};var findInsertPos=function(curNode,element){if(!curNode||curNode.key===undefined)throw new Error("unknown error");var cmpResult=cmp(element,curNode.key);if(cmpResult<0){if(!curNode.leftChild){curNode.leftChild=new TreeNode_1.default;curNode.leftChild.parent=curNode;curNode.leftChild.brother=curNode.rightChild;if(curNode.rightChild)curNode.rightChild.brother=curNode.leftChild;return curNode.leftChild}return findInsertPos(curNode.leftChild,element)}else if(cmpResult>0){if(!curNode.rightChild){curNode.rightChild=new TreeNode_1.default;curNode.rightChild.parent=curNode;curNode.rightChild.brother=curNode.leftChild;if(curNode.leftChild)curNode.leftChild.brother=curNode.rightChild;return curNode.rightChild}return findInsertPos(curNode.rightChild,element)}return curNode};var insertNodeSelfBalance=function(curNode){var parentNode=curNode.parent;if(!parentNode){if(curNode===root)return;throw new Error("unknown error")}if(parentNode.color===TreeNode_1.default.TreeNodeColorType.black)return;if(parentNode.color===TreeNode_1.default.TreeNodeColorType.red){var uncleNode=parentNode.brother;var grandParent=parentNode.parent;if(!grandParent)throw new Error("unknown error");if(uncleNode&&uncleNode.color===TreeNode_1.default.TreeNodeColorType.red){uncleNode.color=parentNode.color=TreeNode_1.default.TreeNodeColorType.black;grandParent.color=TreeNode_1.default.TreeNodeColorType.red;insertNodeSelfBalance(grandParent)}else if(!uncleNode||uncleNode.color===TreeNode_1.default.TreeNodeColorType.black){if(parentNode===grandParent.leftChild){if(curNode===parentNode.leftChild){parentNode.color=TreeNode_1.default.TreeNodeColorType.black;grandParent.color=TreeNode_1.default.TreeNodeColorType.red;var newRoot=grandParent.rotateRight();if(grandParent===root)root=newRoot}else if(curNode===parentNode.rightChild){var newRoot=parentNode.rotateLeft();if(grandParent===root)root=newRoot;insertNodeSelfBalance(parentNode)}}else if(parentNode===grandParent.rightChild){if(curNode===parentNode.leftChild){var newRoot=parentNode.rotateRight();if(grandParent===root)root=newRoot;insertNodeSelfBalance(parentNode)}else if(curNode===parentNode.rightChild){parentNode.color=TreeNode_1.default.TreeNodeColorType.black;grandParent.color=TreeNode_1.default.TreeNodeColorType.red;var newRoot=grandParent.rotateLeft();if(grandParent===root)root=newRoot}}}}};this.insert=function(element){if(element===null||element===undefined){throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here")}if(this.empty()){++len;root.key=element;root.color=TreeNode_1.default.TreeNodeColorType.black;return}var curNode=findInsertPos(root,element);if(curNode.key!==undefined&&cmp(curNode.key,element)===0)return;++len;curNode.key=element;insertNodeSelfBalance(curNode);root.color=TreeNode_1.default.TreeNodeColorType.black};var findElementPos=function(curNode,element){if(!curNode||curNode.key===undefined)return undefined;var cmpResult=cmp(element,curNode.key);if(cmpResult<0)return findElementPos(curNode.leftChild,element);else if(cmpResult>0)return findElementPos(curNode.rightChild,element);return curNode};this.find=function(element){var curNode=findElementPos(root,element);return curNode!==undefined&&curNode.key!==undefined&&cmp(curNode.key,element)===0};var _lowerBound=function(curNode,key){if(!curNode||curNode.key===undefined)return undefined;var cmpResult=cmp(curNode.key,key);if(cmpResult===0)return curNode.key;if(cmpResult<0)return _lowerBound(curNode.rightChild,key);var res=_lowerBound(curNode.leftChild,key);if(res!==undefined)return res;return curNode.key};this.lowerBound=function(key){return _lowerBound(root,key)};var _upperBound=function(curNode,key){if(!curNode||curNode.key===undefined)return undefined;var cmpResult=cmp(curNode.key,key);if(cmpResult<=0)return _upperBound(curNode.rightChild,key);var res=_upperBound(curNode.leftChild,key);if(res!==undefined)return res;return curNode.key};this.upperBound=function(key){return _upperBound(root,key)};var _reverseLowerBound=function(curNode,key){if(!curNode||curNode.key===undefined)return undefined;var cmpResult=cmp(curNode.key,key);if(cmpResult===0)return curNode.key;if(cmpResult>0)return _reverseLowerBound(curNode.leftChild,key);var res=_reverseLowerBound(curNode.rightChild,key);if(res!==undefined)return res;return curNode.key};this.reverseLowerBound=function(key){return _reverseLowerBound(root,key)};var _reverseUpperBound=function(curNode,key){if(!curNode||curNode.key===undefined)return undefined;var cmpResult=cmp(curNode.key,key);if(cmpResult>=0)return _reverseUpperBound(curNode.leftChild,key);var res=_reverseUpperBound(curNode.rightChild,key);if(res!==undefined)return res;return curNode.key};this.reverseUpperBound=function(key){return _reverseUpperBound(root,key)};this.union=function(other){var _this=this;other.forEach(function(element){return _this.insert(element)})};this.getHeight=function(){if(this.empty())return 0;var traversal=function(curNode){if(!curNode)return 1;return Math.max(traversal(curNode.leftChild),traversal(curNode.rightChild))+1};return traversal(root)};var iterationFunc=function(curNode){return __generator(this,function(_a){switch(_a.label){case 0:if(!curNode||curNode.key===undefined)return[2];return[5,__values(iterationFunc(curNode.leftChild))];case 1:_a.sent();return[4,curNode.key];case 2:_a.sent();return[5,__values(iterationFunc(curNode.rightChild))];case 3:_a.sent();return[2]}})};this[Symbol.iterator]=function(){return iterationFunc(root)};container.forEach(function(element){return _this.insert(element)});Object.freeze(this)}Object.freeze(Set);exports.default=Set},{"../Base/TreeNode":87}],96:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function Stack(container){var _this=this;if(container===void 0){container=[]}var len=0;var stack=[];this.size=function(){return len};this.empty=function(){return len===0};this.clear=function(){len=0;stack.length=0};this.push=function(element){stack.push(element);++len};this.pop=function(){stack.pop();if(len>0)--len};this.top=function(){return stack[len-1]};container.forEach(function(element){return _this.push(element)});Object.freeze(this)}Object.freeze(Stack);exports.default=Stack},{}],97:[function(require,module,exports){"use strict";var __generator=this&&this.__generator||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}};var __read=this&&this.__read||function(o,n){var m=typeof Symbol==="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{while((n===void 0||n-- >0)&&!(r=i.next()).done)ar.push(r.value)}catch(error){e={error:error}}finally{try{if(r&&!r.done&&(m=i["return"]))m.call(i)}finally{if(e)throw e.error}}return ar};var __spreadArray=this&&this.__spreadArray||function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++){if(ar||!(i in from)){if(!ar)ar=Array.prototype.slice.call(from,0,i);ar[i]=from[i]}}return to.concat(ar||Array.prototype.slice.call(from))};var __values=this&&this.__values||function(o){var s=typeof Symbol==="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length==="number")return{next:function(){if(o&&i>=o.length)o=void 0;return{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:true});function Vector(container){var _this=this;if(container===void 0){container=[]}var len=0;var vector=[];this.size=function(){return len};this.empty=function(){return len===0};this.clear=function(){len=0;vector.length=0};this.front=function(){if(this.empty())return undefined;return vector[0]};this.back=function(){if(this.empty())return undefined;return vector[len-1]};this.forEach=function(callback){vector.forEach(callback)};this.getElementByPos=function(pos){if(pos<0||pos>=len)throw new Error("pos must more than 0 and less than vector's size");return vector[pos]};this.eraseElementByPos=function(pos){if(pos<0||pos>=len)throw new Error("pos must more than 0 and less than vector's size");for(var i=pos;i<len-1;++i)vector[i]=vector[i+1];this.popBack()};this.eraseElementByValue=function(value){var newArr=[];this.forEach(function(element){if(element!==value)newArr.push(element)});newArr.forEach(function(element,index){vector[index]=element});var newLen=newArr.length;while(len>newLen)this.popBack()};this.pushBack=function(element){vector.push(element);++len};this.popBack=function(){vector.pop();if(len>0)--len};this.setElementByPos=function(pos,element){if(pos<0||pos>=len)throw new Error("pos must more than 0 and less than vector's size");vector[pos]=element};this.insert=function(pos,element,num){if(num===void 0){num=1}if(pos<0||pos>len)throw new Error("pos must more than 0 and less than or equal to vector's size");vector.splice.apply(vector,__spreadArray([pos,0],__read(new Array(num).fill(element)),false));len+=num};this.find=function(element){return vector.includes(element)};this.reverse=function(){vector.reverse()};this.unique=function(){var pre;var newArr=[];this.forEach(function(element,index){if(index===0||element!==pre){newArr.push(element);pre=element}});newArr.forEach(function(element,index){vector[index]=element});var newLen=newArr.length;while(len>newLen)this.popBack()};this.sort=function(cmp){vector.sort(cmp)};this[Symbol.iterator]=function(){return function(){return __generator(this,function(_a){switch(_a.label){case 0:return[5,__values(vector)];case 1:return[2,_a.sent()]}})}()};container.forEach(function(element){return _this.pushBack(element)});Object.freeze(this)}Object.freeze(Vector);exports.default=Vector},{}],98:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HashMap=exports.HashSet=exports.Map=exports.Set=exports.PriorityQueue=exports.Deque=exports.LinkList=exports.Queue=exports.Stack=exports.Vector=void 0;var Vector_1=require("./Vector/Vector");exports.Vector=Vector_1.default;var Stack_1=require("./Stack/Stack");exports.Stack=Stack_1.default;var Queue_1=require("./Queue/Queue");exports.Queue=Queue_1.default;var LinkList_1=require("./LinkList/LinkList");exports.LinkList=LinkList_1.default;var Deque_1=require("./Deque/Deque");exports.Deque=Deque_1.default;var PriorityQueue_1=require("./PriorityQueue/PriorityQueue");exports.PriorityQueue=PriorityQueue_1.default;var Set_1=require("./Set/Set");exports.Set=Set_1.default;var Map_1=require("./Map/Map");exports.Map=Map_1.default;var HashSet_1=require("./HashSet/HashSet");exports.HashSet=HashSet_1.default;var HashMap_1=require("./HashMap/HashMap");exports.HashMap=HashMap_1.default},{"./Deque/Deque":88,"./HashMap/HashMap":89,"./HashSet/HashSet":90,"./LinkList/LinkList":91,"./Map/Map":92,"./PriorityQueue/PriorityQueue":93,"./Queue/Queue":94,"./Set/Set":95,"./Stack/Stack":96,"./Vector/Vector":97}],99:[function(require,module,exports){var wrappy=require("wrappy");module.exports=wrappy(once);module.exports.strict=wrappy(onceStrict);once.proto=once(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:true});Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return onceStrict(this)},configurable:true})});function once(fn){var f=function(){if(f.called)return f.value;f.called=true;return f.value=fn.apply(this,arguments)};f.called=false;return f}function onceStrict(fn){var f=function(){if(f.called)throw new Error(f.onceError);f.called=true;return f.value=fn.apply(this,arguments)};var name=fn.name||"Function wrapped with `once`";f.onceError=name+" shouldn't be called more than once";f.called=false;return f}},{wrappy:130}],100:[function(require,module,exports){(function(process){(function(){"use strict";if(typeof process==="undefined"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0){module.exports={nextTick:nextTick}}else{module.exports=process}function nextTick(fn,arg1,arg2,arg3){if(typeof fn!=="function"){throw new TypeError('"callback" argument must be a function')}var len=arguments.length;var args,i;switch(len){case 0:case 1:return process.nextTick(fn);case 2:return process.nextTick(function afterTickOne(){fn.call(null,arg1)});case 3:return process.nextTick(function afterTickTwo(){fn.call(null,arg1,arg2)});case 4:return process.nextTick(function afterTickThree(){fn.call(null,arg1,arg2,arg3)});default:args=new Array(len-1);i=0;while(i<args.length){args[i++]=arguments[i]}return process.nextTick(function afterTick(){fn.apply(null,args)})}}}).call(this)}).call(this,require("_process"))},{_process:101}],101:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],102:[function(require,module,exports){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&";eq=eq||"=";var obj={};if(typeof qs!=="string"||qs.length===0){return obj}var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;if(options&&typeof options.maxKeys==="number"){maxKeys=options.maxKeys}var len=qs.length;if(maxKeys>0&&len>maxKeys){len=maxKeys}for(var i=0;i<len;++i){var x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq),kstr,vstr,k,v;if(idx>=0){kstr=x.substr(0,idx);vstr=x.substr(idx+1)}else{kstr=x;vstr=""}k=decodeURIComponent(kstr);v=decodeURIComponent(vstr);if(!hasOwnProperty(obj,k)){obj[k]=v}else if(isArray(obj[k])){obj[k].push(v)}else{obj[k]=[obj[k],v]}}return obj};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"}},{}],103:[function(require,module,exports){"use strict";var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){sep=sep||"&";eq=eq||"=";if(obj===null){obj=undefined}if(typeof obj==="object"){return map(objectKeys(obj),function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;if(isArray(obj[k])){return map(obj[k],function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep)}else{return ks+encodeURIComponent(stringifyPrimitive(obj[k]))}}).join(sep)}if(!name)return"";return encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj))};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"};function map(xs,f){if(xs.map)return xs.map(f);var res=[];for(var i=0;i<xs.length;i++){res.push(f(xs[i],i))}return res}var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))res.push(key)}return res}},{}],104:[function(require,module,exports){"use strict";exports.decode=exports.parse=require("./decode");exports.encode=exports.stringify=require("./encode")},{"./decode":102,"./encode":103}],105:[function(require,module,exports){"use strict";function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;subClass.__proto__=superClass}var codes={};function createErrorType(code,message,Base){if(!Base){Base=Error}function getMessage(arg1,arg2,arg3){if(typeof message==="string"){return message}else{return message(arg1,arg2,arg3)}}var NodeError=function(_Base){_inheritsLoose(NodeError,_Base);function NodeError(arg1,arg2,arg3){return _Base.call(this,getMessage(arg1,arg2,arg3))||this}return NodeError}(Base);NodeError.prototype.name=Base.name;NodeError.prototype.code=code;codes[code]=NodeError}function oneOf(expected,thing){if(Array.isArray(expected)){var len=expected.length;expected=expected.map(function(i){return String(i)});if(len>2){return"one of ".concat(thing," ").concat(expected.slice(0,len-1).join(", "),", or ")+expected[len-1]}else if(len===2){return"one of ".concat(thing," ").concat(expected[0]," or ").concat(expected[1])}else{return"of ".concat(thing," ").concat(expected[0])}}else{return"of ".concat(thing," ").concat(String(expected))}}function startsWith(str,search,pos){return str.substr(!pos||pos<0?0:+pos,search.length)===search}function endsWith(str,search,this_len){if(this_len===undefined||this_len>str.length){this_len=str.length}return str.substring(this_len-search.length,this_len)===search}function includes(str,search,start){if(typeof start!=="number"){start=0}if(start+search.length>str.length){return false}else{return str.indexOf(search,start)!==-1}}createErrorType("ERR_INVALID_OPT_VALUE",function(name,value){return'The value "'+value+'" is invalid for option "'+name+'"'},TypeError);createErrorType("ERR_INVALID_ARG_TYPE",function(name,expected,actual){var determiner;if(typeof expected==="string"&&startsWith(expected,"not ")){determiner="must not be";expected=expected.replace(/^not /,"")}else{determiner="must be"}var msg;if(endsWith(name," argument")){msg="The ".concat(name," ").concat(determiner," ").concat(oneOf(expected,"type"))}else{var type=includes(name,".")?"property":"argument";msg='The "'.concat(name,'" ').concat(type," ").concat(determiner," ").concat(oneOf(expected,"type"))}msg+=". Received type ".concat(typeof actual);return msg},TypeError);createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(name){return"The "+name+" method is not implemented"});createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close");createErrorType("ERR_STREAM_DESTROYED",function(name){return"Cannot call "+name+" after a stream was destroyed"});createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times");createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);createErrorType("ERR_UNKNOWN_ENCODING",function(arg){return"Unknown encoding: "+arg},TypeError);createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");module.exports.codes=codes},{}],106:[function(require,module,exports){(function(process){(function(){"use strict";var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){keys.push(key)}return keys};module.exports=Duplex;var Readable=require("./_stream_readable");var Writable=require("./_stream_writable");require("inherits")(Duplex,Readable);{var keys=objectKeys(Writable.prototype);for(var v=0;v<keys.length;v++){var method=keys[v];if(!Duplex.prototype[method])Duplex.prototype[method]=Writable.prototype[method]}}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options);Writable.call(this,options);this.allowHalfOpen=true;if(options){if(options.readable===false)this.readable=false;if(options.writable===false)this.writable=false;if(options.allowHalfOpen===false){this.allowHalfOpen=false;this.once("end",onend)}}}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:false,get:function get(){return this._writableState.highWaterMark}});Object.defineProperty(Duplex.prototype,"writableBuffer",{enumerable:false,get:function get(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Duplex.prototype,"writableLength",{enumerable:false,get:function get(){return this._writableState.length}});function onend(){if(this._writableState.ended)return;process.nextTick(onEndNT,this)}function onEndNT(self){self.end()}Object.defineProperty(Duplex.prototype,"destroyed",{enumerable:false,get:function get(){if(this._readableState===undefined||this._writableState===undefined){return false}return this._readableState.destroyed&&this._writableState.destroyed},set:function set(value){if(this._readableState===undefined||this._writableState===undefined){return}this._readableState.destroyed=value;this._writableState.destroyed=value}})}).call(this)}).call(this,require("_process"))},{"./_stream_readable":108,"./_stream_writable":110,_process:101,inherits:62}],107:[function(require,module,exports){"use strict";module.exports=PassThrough;var Transform=require("./_stream_transform");require("inherits")(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},{"./_stream_transform":109,inherits:62}],108:[function(require,module,exports){(function(process,global){(function(){"use strict";module.exports=Readable;var Duplex;Readable.ReadableState=ReadableState;var EE=require("events").EventEmitter;var EElistenerCount=function EElistenerCount(emitter,type){return emitter.listeners(type).length};var Stream=require("./internal/streams/stream");var Buffer=require("buffer").Buffer;var OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}var debugUtil=require("util");var debug;if(debugUtil&&debugUtil.debuglog){debug=debugUtil.debuglog("stream")}else{debug=function debug(){}}var BufferList=require("./internal/streams/buffer_list");var destroyImpl=require("./internal/streams/destroy");var _require=require("./internal/streams/state"),getHighWaterMark=_require.getHighWaterMark;var _require$codes=require("../errors").codes,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_STREAM_PUSH_AFTER_EOF=_require$codes.ERR_STREAM_PUSH_AFTER_EOF,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_STREAM_UNSHIFT_AFTER_END_EVENT=_require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;var StringDecoder;var createReadableStreamAsyncIterator;var from;require("inherits")(Readable,Stream);var errorOrDestroy=destroyImpl.errorOrDestroy;var kProxyEvents=["error","close","destroy","pause","resume"];function prependListener(emitter,event,fn){if(typeof emitter.prependListener==="function")return emitter.prependListener(event,fn);if(!emitter._events||!emitter._events[event])emitter.on(event,fn);else if(Array.isArray(emitter._events[event]))emitter._events[event].unshift(fn);else emitter._events[event]=[fn,emitter._events[event]]}function ReadableState(options,stream,isDuplex){Duplex=Duplex||require("./_stream_duplex");options=options||{};if(typeof isDuplex!=="boolean")isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.readableObjectMode;this.highWaterMark=getHighWaterMark(this,options,"readableHighWaterMark",isDuplex);this.buffer=new BufferList;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.paused=true;this.emitClose=options.emitClose!==false;this.autoDestroy=!!options.autoDestroy;this.destroyed=false;this.defaultEncoding=options.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(options.encoding){if(!StringDecoder)StringDecoder=require("string_decoder/").StringDecoder;this.decoder=new StringDecoder(options.encoding);this.encoding=options.encoding}}function Readable(options){Duplex=Duplex||require("./_stream_duplex");if(!(this instanceof Readable))return new Readable(options);var isDuplex=this instanceof Duplex;this._readableState=new ReadableState(options,this,isDuplex);this.readable=true;if(options){if(typeof options.read==="function")this._read=options.read;if(typeof options.destroy==="function")this._destroy=options.destroy}Stream.call(this)}Object.defineProperty(Readable.prototype,"destroyed",{enumerable:false,get:function get(){if(this._readableState===undefined){return false}return this._readableState.destroyed},set:function set(value){if(!this._readableState){return}this._readableState.destroyed=value}});Readable.prototype.destroy=destroyImpl.destroy;Readable.prototype._undestroy=destroyImpl.undestroy;Readable.prototype._destroy=function(err,cb){cb(err)};Readable.prototype.push=function(chunk,encoding){var state=this._readableState;var skipChunkCheck;if(!state.objectMode){if(typeof chunk==="string"){encoding=encoding||state.defaultEncoding;if(encoding!==state.encoding){chunk=Buffer.from(chunk,encoding);encoding=""}skipChunkCheck=true}}else{skipChunkCheck=true}return readableAddChunk(this,chunk,encoding,false,skipChunkCheck)};Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,true,false)};function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){debug("readableAddChunk",chunk);var state=stream._readableState;if(chunk===null){state.reading=false;onEofChunk(stream,state)}else{var er;if(!skipChunkCheck)er=chunkInvalid(state,chunk);if(er){errorOrDestroy(stream,er)}else if(state.objectMode||chunk&&chunk.length>0){if(typeof chunk!=="string"&&!state.objectMode&&Object.getPrototypeOf(chunk)!==Buffer.prototype){chunk=_uint8ArrayToBuffer(chunk)}if(addToFront){if(state.endEmitted)errorOrDestroy(stream,new ERR_STREAM_UNSHIFT_AFTER_END_EVENT);else addChunk(stream,state,chunk,true)}else if(state.ended){errorOrDestroy(stream,new ERR_STREAM_PUSH_AFTER_EOF)}else if(state.destroyed){return false}else{state.reading=false;if(state.decoder&&!encoding){chunk=state.decoder.write(chunk);if(state.objectMode||chunk.length!==0)addChunk(stream,state,chunk,false);else maybeReadMore(stream,state)}else{addChunk(stream,state,chunk,false)}}}else if(!addToFront){state.reading=false;maybeReadMore(stream,state)}}return!state.ended&&(state.length<state.highWaterMark||state.length===0)}function addChunk(stream,state,chunk,addToFront){if(state.flowing&&state.length===0&&!state.sync){state.awaitDrain=0;stream.emit("data",chunk)}else{state.length+=state.objectMode?1:chunk.length;if(addToFront)state.buffer.unshift(chunk);else state.buffer.push(chunk);if(state.needReadable)emitReadable(stream)}maybeReadMore(stream,state)}function chunkInvalid(state,chunk){var er;if(!_isUint8Array(chunk)&&typeof chunk!=="string"&&chunk!==undefined&&!state.objectMode){er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer","Uint8Array"],chunk)}return er}Readable.prototype.isPaused=function(){return this._readableState.flowing===false};Readable.prototype.setEncoding=function(enc){if(!StringDecoder)StringDecoder=require("string_decoder/").StringDecoder;var decoder=new StringDecoder(enc);this._readableState.decoder=decoder;this._readableState.encoding=this._readableState.decoder.encoding;var p=this._readableState.buffer.head;var content="";while(p!==null){content+=decoder.write(p.data);p=p.next}this._readableState.buffer.clear();if(content!=="")this._readableState.buffer.push(content);this._readableState.length=content.length;return this};var MAX_HWM=1073741824;function computeNewHighWaterMark(n){if(n>=MAX_HWM){n=MAX_HWM}else{n--;n|=n>>>1;n|=n>>>2;n|=n>>>4;n|=n>>>8;n|=n>>>16;n++}return n}function howMuchToRead(n,state){if(n<=0||state.length===0&&state.ended)return 0;if(state.objectMode)return 1;if(n!==n){if(state.flowing&&state.length)return state.buffer.head.data.length;else return state.length}if(n>state.highWaterMark)state.highWaterMark=computeNewHighWaterMark(n);if(n<=state.length)return n;if(!state.ended){state.needReadable=true;return 0}return state.length}Readable.prototype.read=function(n){debug("read",n);n=parseInt(n,10);var state=this._readableState;var nOrig=n;if(n!==0)state.emittedReadable=false;if(n===0&&state.needReadable&&((state.highWaterMark!==0?state.length>=state.highWaterMark:state.length>0)||state.ended)){debug("read: emitReadable",state.length,state.ended);if(state.length===0&&state.ended)endReadable(this);else emitReadable(this);return null}n=howMuchToRead(n,state);if(n===0&&state.ended){if(state.length===0)endReadable(this);return null}var doRead=state.needReadable;debug("need readable",doRead);if(state.length===0||state.length-n<state.highWaterMark){doRead=true;debug("length less than watermark",doRead)}if(state.ended||state.reading){doRead=false;debug("reading or ended",doRead)}else if(doRead){debug("do read");state.reading=true;state.sync=true;if(state.length===0)state.needReadable=true;this._read(state.highWaterMark);state.sync=false;if(!state.reading)n=howMuchToRead(nOrig,state)}var ret;if(n>0)ret=fromList(n,state);else ret=null;if(ret===null){state.needReadable=state.length<=state.highWaterMark;n=0}else{state.length-=n;state.awaitDrain=0}if(state.length===0){if(!state.ended)state.needReadable=true;if(nOrig!==n&&state.ended)endReadable(this)}if(ret!==null)this.emit("data",ret);return ret};function onEofChunk(stream,state){debug("onEofChunk");if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();if(chunk&&chunk.length){state.buffer.push(chunk);state.length+=state.objectMode?1:chunk.length}}state.ended=true;if(state.sync){emitReadable(stream)}else{state.needReadable=false;if(!state.emittedReadable){state.emittedReadable=true;emitReadable_(stream)}}}function emitReadable(stream){var state=stream._readableState;debug("emitReadable",state.needReadable,state.emittedReadable);state.needReadable=false;if(!state.emittedReadable){debug("emitReadable",state.flowing);state.emittedReadable=true;process.nextTick(emitReadable_,stream)}}function emitReadable_(stream){var state=stream._readableState;debug("emitReadable_",state.destroyed,state.length,state.ended);if(!state.destroyed&&(state.length||state.ended)){stream.emit("readable");state.emittedReadable=false}state.needReadable=!state.flowing&&!state.ended&&state.length<=state.highWaterMark;flow(stream)}function maybeReadMore(stream,state){if(!state.readingMore){state.readingMore=true;process.nextTick(maybeReadMore_,stream,state)}}function maybeReadMore_(stream,state){while(!state.reading&&!state.ended&&(state.length<state.highWaterMark||state.flowing&&state.length===0)){var len=state.length;debug("maybeReadMore read 0");stream.read(0);if(len===state.length)break}state.readingMore=false}Readable.prototype._read=function(n){errorOrDestroy(this,new ERR_METHOD_NOT_IMPLEMENTED("_read()"))};Readable.prototype.pipe=function(dest,pipeOpts){var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break}state.pipesCount+=1;debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==false)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:unpipe;if(state.endEmitted)process.nextTick(endFn);else src.once("end",endFn);dest.on("unpipe",onunpipe);function onunpipe(readable,unpipeInfo){debug("onunpipe");if(readable===src){if(unpipeInfo&&unpipeInfo.hasUnpiped===false){unpipeInfo.hasUnpiped=true;cleanup()}}}function onend(){debug("onend");dest.end()}var ondrain=pipeOnDrain(src);dest.on("drain",ondrain);var cleanedUp=false;function cleanup(){debug("cleanup");dest.removeListener("close",onclose);dest.removeListener("finish",onfinish);dest.removeListener("drain",ondrain);dest.removeListener("error",onerror);dest.removeListener("unpipe",onunpipe);src.removeListener("end",onend);src.removeListener("end",unpipe);src.removeListener("data",ondata);cleanedUp=true;if(state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain))ondrain()}src.on("data",ondata);function ondata(chunk){debug("ondata");var ret=dest.write(chunk);debug("dest.write",ret);if(ret===false){if((state.pipesCount===1&&state.pipes===dest||state.pipesCount>1&&indexOf(state.pipes,dest)!==-1)&&!cleanedUp){debug("false write response, pause",state.awaitDrain);state.awaitDrain++}src.pause()}}function onerror(er){debug("onerror",er);unpipe();dest.removeListener("error",onerror);if(EElistenerCount(dest,"error")===0)errorOrDestroy(dest,er)}prependListener(dest,"error",onerror);function onclose(){dest.removeListener("finish",onfinish);unpipe()}dest.once("close",onclose);function onfinish(){debug("onfinish");dest.removeListener("close",onclose);unpipe()}dest.once("finish",onfinish);function unpipe(){debug("unpipe");src.unpipe(dest)}dest.emit("pipe",src);if(!state.flowing){debug("pipe resume");src.resume()}return dest};function pipeOnDrain(src){return function pipeOnDrainFunctionResult(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain);if(state.awaitDrain)state.awaitDrain--;if(state.awaitDrain===0&&EElistenerCount(src,"data")){state.flowing=true;flow(src)}}}Readable.prototype.unpipe=function(dest){var state=this._readableState;var unpipeInfo={hasUnpiped:false};if(state.pipesCount===0)return this;if(state.pipesCount===1){if(dest&&dest!==state.pipes)return this;if(!dest)dest=state.pipes;state.pipes=null;state.pipesCount=0;state.flowing=false;if(dest)dest.emit("unpipe",this,unpipeInfo);return this}if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;state.flowing=false;for(var i=0;i<len;i++){dests[i].emit("unpipe",this,{hasUnpiped:false})}return this}var index=indexOf(state.pipes,dest);if(index===-1)return this;state.pipes.splice(index,1);state.pipesCount-=1;if(state.pipesCount===1)state.pipes=state.pipes[0];dest.emit("unpipe",this,unpipeInfo);return this};Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);var state=this._readableState;if(ev==="data"){state.readableListening=this.listenerCount("readable")>0;if(state.flowing!==false)this.resume()}else if(ev==="readable"){if(!state.endEmitted&&!state.readableListening){state.readableListening=state.needReadable=true;state.flowing=false;state.emittedReadable=false;debug("on readable",state.length,state.reading);if(state.length){emitReadable(this)}else if(!state.reading){process.nextTick(nReadingNextTick,this)}}}return res};Readable.prototype.addListener=Readable.prototype.on;Readable.prototype.removeListener=function(ev,fn){var res=Stream.prototype.removeListener.call(this,ev,fn);if(ev==="readable"){process.nextTick(updateReadableListening,this)}return res};Readable.prototype.removeAllListeners=function(ev){var res=Stream.prototype.removeAllListeners.apply(this,arguments);if(ev==="readable"||ev===undefined){process.nextTick(updateReadableListening,this)}return res};function updateReadableListening(self){var state=self._readableState;state.readableListening=self.listenerCount("readable")>0;if(state.resumeScheduled&&!state.paused){state.flowing=true}else if(self.listenerCount("data")>0){self.resume()}}function nReadingNextTick(self){debug("readable nexttick read 0");self.read(0)}Readable.prototype.resume=function(){var state=this._readableState;if(!state.flowing){debug("resume");state.flowing=!state.readableListening;resume(this,state)}state.paused=false;return this};function resume(stream,state){if(!state.resumeScheduled){state.resumeScheduled=true;process.nextTick(resume_,stream,state)}}function resume_(stream,state){debug("resume",state.reading);if(!state.reading){stream.read(0)}state.resumeScheduled=false;stream.emit("resume");flow(stream);if(state.flowing&&!state.reading)stream.read(0)}Readable.prototype.pause=function(){debug("call pause flowing=%j",this._readableState.flowing);if(this._readableState.flowing!==false){debug("pause");this._readableState.flowing=false;this.emit("pause")}this._readableState.paused=true;return this};function flow(stream){var state=stream._readableState;debug("flow",state.flowing);while(state.flowing&&stream.read()!==null){}}Readable.prototype.wrap=function(stream){var _this=this;var state=this._readableState;var paused=false;stream.on("end",function(){debug("wrapped end");if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length)_this.push(chunk)}_this.push(null)});stream.on("data",function(chunk){debug("wrapped data");if(state.decoder)chunk=state.decoder.write(chunk);if(state.objectMode&&(chunk===null||chunk===undefined))return;else if(!state.objectMode&&(!chunk||!chunk.length))return;var ret=_this.push(chunk);if(!ret){paused=true;stream.pause()}});for(var i in stream){if(this[i]===undefined&&typeof stream[i]==="function"){this[i]=function methodWrap(method){return function methodWrapReturnFunction(){return stream[method].apply(stream,arguments)}}(i)}}for(var n=0;n<kProxyEvents.length;n++){stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]))}this._read=function(n){debug("wrapped _read",n);if(paused){paused=false;stream.resume()}};return this};if(typeof Symbol==="function"){Readable.prototype[Symbol.asyncIterator]=function(){if(createReadableStreamAsyncIterator===undefined){createReadableStreamAsyncIterator=require("./internal/streams/async_iterator")}return createReadableStreamAsyncIterator(this)}}Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:false,get:function get(){return this._readableState.highWaterMark}});Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:false,get:function get(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:false,get:function get(){return this._readableState.flowing},set:function set(state){if(this._readableState){this._readableState.flowing=state}}});Readable._fromList=fromList;Object.defineProperty(Readable.prototype,"readableLength",{enumerable:false,get:function get(){return this._readableState.length}});function fromList(n,state){if(state.length===0)return null;var ret;if(state.objectMode)ret=state.buffer.shift();else if(!n||n>=state.length){if(state.decoder)ret=state.buffer.join("");else if(state.buffer.length===1)ret=state.buffer.first();else ret=state.buffer.concat(state.length);state.buffer.clear()}else{ret=state.buffer.consume(n,state.decoder)}return ret}function endReadable(stream){var state=stream._readableState;debug("endReadable",state.endEmitted);if(!state.endEmitted){state.ended=true;process.nextTick(endReadableNT,state,stream)}}function endReadableNT(state,stream){debug("endReadableNT",state.endEmitted,state.length);if(!state.endEmitted&&state.length===0){state.endEmitted=true;stream.readable=false;stream.emit("end");if(state.autoDestroy){var wState=stream._writableState;if(!wState||wState.autoDestroy&&wState.finished){stream.destroy()}}}}if(typeof Symbol==="function"){Readable.from=function(iterable,opts){if(from===undefined){from=require("./internal/streams/from")}return from(Readable,iterable,opts)}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++){if(xs[i]===x)return i}return-1}}).call(this)}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../errors":105,"./_stream_duplex":106,"./internal/streams/async_iterator":111,"./internal/streams/buffer_list":112,"./internal/streams/destroy":113,"./internal/streams/from":115,"./internal/streams/state":117,"./internal/streams/stream":118,_process:101,buffer:54,events:60,inherits:62,"string_decoder/":125,util:52}],109:[function(require,module,exports){"use strict";module.exports=Transform;var _require$codes=require("../errors").codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes.ERR_TRANSFORM_WITH_LENGTH_0;var Duplex=require("./_stream_duplex");require("inherits")(Transform,Duplex);function afterTransform(er,data){var ts=this._transformState;ts.transforming=false;var cb=ts.writecb;if(cb===null){return this.emit("error",new ERR_MULTIPLE_CALLBACK)}ts.writechunk=null;ts.writecb=null;if(data!=null)this.push(data);cb(er);var rs=this._readableState;rs.reading=false;if(rs.needReadable||rs.length<rs.highWaterMark){this._read(rs.highWaterMark)}}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options);this._transformState={afterTransform:afterTransform.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(options){if(typeof options.transform==="function")this._transform=options.transform;if(typeof options.flush==="function")this._flush=options.flush}this.on("prefinish",prefinish)}function prefinish(){var _this=this;if(typeof this._flush==="function"&&!this._readableState.destroyed){this._flush(function(er,data){done(_this,er,data)})}else{done(this,null,null)}}Transform.prototype.push=function(chunk,encoding){this._transformState.needTransform=false;return Duplex.prototype.push.call(this,chunk,encoding)};Transform.prototype._transform=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;if(!ts.transforming){var rs=this._readableState;if(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)this._read(rs.highWaterMark)}};Transform.prototype._read=function(n){var ts=this._transformState;if(ts.writechunk!==null&&!ts.transforming){ts.transforming=true;this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)}else{ts.needTransform=true}};Transform.prototype._destroy=function(err,cb){Duplex.prototype._destroy.call(this,err,function(err2){cb(err2)})};function done(stream,er,data){if(er)return stream.emit("error",er);if(data!=null)stream.push(data);if(stream._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(stream._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return stream.push(null)}},{"../errors":105,"./_stream_duplex":106,inherits:62}],110:[function(require,module,exports){(function(process,global){(function(){"use strict";module.exports=Writable;function WriteReq(chunk,encoding,cb){this.chunk=chunk;this.encoding=encoding;this.callback=cb;this.next=null}function CorkedRequest(state){var _this=this;this.next=null;this.entry=null;this.finish=function(){onCorkedFinish(_this,state)}}var Duplex;Writable.WritableState=WritableState;var internalUtil={deprecate:require("util-deprecate")};var Stream=require("./internal/streams/stream");var Buffer=require("buffer").Buffer;var OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}var destroyImpl=require("./internal/streams/destroy");var _require=require("./internal/streams/state"),getHighWaterMark=_require.getHighWaterMark;var _require$codes=require("../errors").codes,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_STREAM_CANNOT_PIPE=_require$codes.ERR_STREAM_CANNOT_PIPE,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED,ERR_STREAM_NULL_VALUES=_require$codes.ERR_STREAM_NULL_VALUES,ERR_STREAM_WRITE_AFTER_END=_require$codes.ERR_STREAM_WRITE_AFTER_END,ERR_UNKNOWN_ENCODING=_require$codes.ERR_UNKNOWN_ENCODING;var errorOrDestroy=destroyImpl.errorOrDestroy;require("inherits")(Writable,Stream);function nop(){}function WritableState(options,stream,isDuplex){Duplex=Duplex||require("./_stream_duplex");options=options||{};if(typeof isDuplex!=="boolean")isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.writableObjectMode;this.highWaterMark=getHighWaterMark(this,options,"writableHighWaterMark",isDuplex);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var noDecode=options.decodeStrings===false;this.decodeStrings=!noDecode;this.defaultEncoding=options.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(er){onwrite(stream,er)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.emitClose=options.emitClose!==false;this.autoDestroy=!!options.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function getBuffer(){var current=this.bufferedRequest;var out=[];while(current){out.push(current);current=current.next}return out};(function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate(function writableStateBufferGetter(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(_){}})();var realHasInstance;if(typeof Symbol==="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==="function"){realHasInstance=Function.prototype[Symbol.hasInstance];Object.defineProperty(Writable,Symbol.hasInstance,{value:function value(object){if(realHasInstance.call(this,object))return true;if(this!==Writable)return false;return object&&object._writableState instanceof WritableState}})}else{realHasInstance=function realHasInstance(object){return object instanceof this}}function Writable(options){Duplex=Duplex||require("./_stream_duplex");var isDuplex=this instanceof Duplex;if(!isDuplex&&!realHasInstance.call(Writable,this))return new Writable(options);this._writableState=new WritableState(options,this,isDuplex);this.writable=true;if(options){if(typeof options.write==="function")this._write=options.write;if(typeof options.writev==="function")this._writev=options.writev;if(typeof options.destroy==="function")this._destroy=options.destroy;if(typeof options.final==="function")this._final=options.final}Stream.call(this)}Writable.prototype.pipe=function(){errorOrDestroy(this,new ERR_STREAM_CANNOT_PIPE)};function writeAfterEnd(stream,cb){var er=new ERR_STREAM_WRITE_AFTER_END;errorOrDestroy(stream,er);process.nextTick(cb,er)}function validChunk(stream,state,chunk,cb){var er;if(chunk===null){er=new ERR_STREAM_NULL_VALUES}else if(typeof chunk!=="string"&&!state.objectMode){er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer"],chunk)}if(er){errorOrDestroy(stream,er);process.nextTick(cb,er);return false}return true}Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=false;var isBuf=!state.objectMode&&_isUint8Array(chunk);if(isBuf&&!Buffer.isBuffer(chunk)){chunk=_uint8ArrayToBuffer(chunk)}if(typeof encoding==="function"){cb=encoding;encoding=null}if(isBuf)encoding="buffer";else if(!encoding)encoding=state.defaultEncoding;if(typeof cb!=="function")cb=nop;if(state.ending)writeAfterEnd(this,cb);else if(isBuf||validChunk(this,state,chunk,cb)){state.pendingcb++;ret=writeOrBuffer(this,state,isBuf,chunk,encoding,cb)}return ret};Writable.prototype.cork=function(){this._writableState.corked++};Writable.prototype.uncork=function(){var state=this._writableState;if(state.corked){state.corked--;if(!state.writing&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest)clearBuffer(this,state)}};Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if(typeof encoding==="string")encoding=encoding.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new ERR_UNKNOWN_ENCODING(encoding);this._writableState.defaultEncoding=encoding;return this};Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:false,get:function get(){return this._writableState&&this._writableState.getBuffer()}});function decodeChunk(state,chunk,encoding){if(!state.objectMode&&state.decodeStrings!==false&&typeof chunk==="string"){chunk=Buffer.from(chunk,encoding)}return chunk}Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:false,get:function get(){return this._writableState.highWaterMark}});function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=decodeChunk(state,chunk,encoding);if(chunk!==newChunk){isBuf=true;encoding="buffer";chunk=newChunk}}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(!ret)state.needDrain=true;if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null};if(last){last.next=state.lastBufferedRequest}else{state.bufferedRequest=state.lastBufferedRequest}state.bufferedRequestCount+=1}else{doWrite(stream,state,false,len,chunk,encoding,cb)}return ret}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=true;state.sync=true;if(state.destroyed)state.onwrite(new ERR_STREAM_DESTROYED("write"));else if(writev)stream._writev(chunk,state.onwrite);else stream._write(chunk,encoding,state.onwrite);state.sync=false}function onwriteError(stream,state,sync,er,cb){--state.pendingcb;if(sync){process.nextTick(cb,er);process.nextTick(finishMaybe,stream,state);stream._writableState.errorEmitted=true;errorOrDestroy(stream,er)}else{cb(er);stream._writableState.errorEmitted=true;errorOrDestroy(stream,er);finishMaybe(stream,state)}}function onwriteStateUpdate(state){state.writing=false;state.writecb=null;state.length-=state.writelen;state.writelen=0}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;if(typeof cb!=="function")throw new ERR_MULTIPLE_CALLBACK;onwriteStateUpdate(state);if(er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state)||stream.destroyed;if(!finished&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest){clearBuffer(stream,state)}if(sync){process.nextTick(afterWrite,stream,state,finished,cb)}else{afterWrite(stream,state,finished,cb)}}}function afterWrite(stream,state,finished,cb){if(!finished)onwriteDrain(stream,state);state.pendingcb--;cb();finishMaybe(stream,state)}function onwriteDrain(stream,state){if(state.length===0&&state.needDrain){state.needDrain=false;stream.emit("drain")}}function clearBuffer(stream,state){state.bufferProcessing=true;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount;var buffer=new Array(l);var holder=state.corkedRequestsFree;holder.entry=entry;var count=0;var allBuffers=true;while(entry){buffer[count]=entry;if(!entry.isBuf)allBuffers=false;entry=entry.next;count+=1}buffer.allBuffers=allBuffers;doWrite(stream,state,true,state.length,buffer,"",holder.finish);state.pendingcb++;state.lastBufferedRequest=null;if(holder.next){state.corkedRequestsFree=holder.next;holder.next=null}else{state.corkedRequestsFree=new CorkedRequest(state)}state.bufferedRequestCount=0}else{while(entry){var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;doWrite(stream,state,false,len,chunk,encoding,cb);entry=entry.next;state.bufferedRequestCount--;if(state.writing){break}}if(entry===null)state.lastBufferedRequest=null}state.bufferedRequest=entry;state.bufferProcessing=false}Writable.prototype._write=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_write()"))};Writable.prototype._writev=null;Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;if(typeof chunk==="function"){cb=chunk;chunk=null;encoding=null}else if(typeof encoding==="function"){cb=encoding;encoding=null}if(chunk!==null&&chunk!==undefined)this.write(chunk,encoding);if(state.corked){state.corked=1;this.uncork()}if(!state.ending)endWritable(this,state,cb);return this};Object.defineProperty(Writable.prototype,"writableLength",{enumerable:false,get:function get(){return this._writableState.length}});function needFinish(state){return state.ending&&state.length===0&&state.bufferedRequest===null&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final(function(err){state.pendingcb--;if(err){errorOrDestroy(stream,err)}state.prefinished=true;stream.emit("prefinish");finishMaybe(stream,state)})}function prefinish(stream,state){if(!state.prefinished&&!state.finalCalled){if(typeof stream._final==="function"&&!state.destroyed){state.pendingcb++;state.finalCalled=true;process.nextTick(callFinal,stream,state)}else{state.prefinished=true;stream.emit("prefinish")}}}function finishMaybe(stream,state){var need=needFinish(state);if(need){prefinish(stream,state);if(state.pendingcb===0){state.finished=true;stream.emit("finish");if(state.autoDestroy){var rState=stream._readableState;if(!rState||rState.autoDestroy&&rState.endEmitted){stream.destroy()}}}}return need}function endWritable(stream,state,cb){state.ending=true;finishMaybe(stream,state);if(cb){if(state.finished)process.nextTick(cb);else stream.once("finish",cb)}state.ended=true;stream.writable=false}function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;while(entry){var cb=entry.callback;state.pendingcb--;cb(err);entry=entry.next}state.corkedRequestsFree.next=corkReq}Object.defineProperty(Writable.prototype,"destroyed",{enumerable:false,get:function get(){if(this._writableState===undefined){return false}return this._writableState.destroyed},set:function set(value){if(!this._writableState){return}this._writableState.destroyed=value}});Writable.prototype.destroy=destroyImpl.destroy;Writable.prototype._undestroy=destroyImpl.undestroy;Writable.prototype._destroy=function(err,cb){cb(err)}}).call(this)}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../errors":105,"./_stream_duplex":106,"./internal/streams/destroy":113,"./internal/streams/state":117,"./internal/streams/stream":118,_process:101,buffer:54,inherits:62,"util-deprecate":129}],111:[function(require,module,exports){(function(process){(function(){"use strict";var _Object$setPrototypeO;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var finished=require("./end-of-stream");var kLastResolve=Symbol("lastResolve");var kLastReject=Symbol("lastReject");var kError=Symbol("error");var kEnded=Symbol("ended");var kLastPromise=Symbol("lastPromise");var kHandlePromise=Symbol("handlePromise");var kStream=Symbol("stream");function createIterResult(value,done){return{value:value,done:done}}function readAndResolve(iter){var resolve=iter[kLastResolve];if(resolve!==null){var data=iter[kStream].read();if(data!==null){iter[kLastPromise]=null;iter[kLastResolve]=null;iter[kLastReject]=null;resolve(createIterResult(data,false))}}}function onReadable(iter){process.nextTick(readAndResolve,iter)}function wrapForNext(lastPromise,iter){return function(resolve,reject){lastPromise.then(function(){if(iter[kEnded]){resolve(createIterResult(undefined,true));return}iter[kHandlePromise](resolve,reject)},reject)}}var AsyncIteratorPrototype=Object.getPrototypeOf(function(){});var ReadableStreamAsyncIteratorPrototype=Object.setPrototypeOf((_Object$setPrototypeO={get stream(){return this[kStream]},next:function next(){var _this=this;var error=this[kError];if(error!==null){return Promise.reject(error)}if(this[kEnded]){return Promise.resolve(createIterResult(undefined,true))}if(this[kStream].destroyed){return new Promise(function(resolve,reject){process.nextTick(function(){if(_this[kError]){reject(_this[kError])}else{resolve(createIterResult(undefined,true))}})})}var lastPromise=this[kLastPromise];var promise;if(lastPromise){promise=new Promise(wrapForNext(lastPromise,this))}else{var data=this[kStream].read();if(data!==null){return Promise.resolve(createIterResult(data,false))}promise=new Promise(this[kHandlePromise])}this[kLastPromise]=promise;return promise}},_defineProperty(_Object$setPrototypeO,Symbol.asyncIterator,function(){return this}),_defineProperty(_Object$setPrototypeO,"return",function _return(){var _this2=this;return new Promise(function(resolve,reject){_this2[kStream].destroy(null,function(err){if(err){reject(err);return}resolve(createIterResult(undefined,true))})})}),_Object$setPrototypeO),AsyncIteratorPrototype);var createReadableStreamAsyncIterator=function createReadableStreamAsyncIterator(stream){var _Object$create;var iterator=Object.create(ReadableStreamAsyncIteratorPrototype,(_Object$create={},_defineProperty(_Object$create,kStream,{value:stream,writable:true}),_defineProperty(_Object$create,kLastResolve,{value:null,writable:true}),_defineProperty(_Object$create,kLastReject,{value:null,writable:true}),_defineProperty(_Object$create,kError,{value:null,writable:true}),_defineProperty(_Object$create,kEnded,{value:stream._readableState.endEmitted,writable:true}),_defineProperty(_Object$create,kHandlePromise,{value:function value(resolve,reject){var data=iterator[kStream].read();if(data){iterator[kLastPromise]=null;iterator[kLastResolve]=null;iterator[kLastReject]=null;resolve(createIterResult(data,false))}else{iterator[kLastResolve]=resolve;iterator[kLastReject]=reject}},writable:true}),_Object$create));iterator[kLastPromise]=null;finished(stream,function(err){if(err&&err.code!=="ERR_STREAM_PREMATURE_CLOSE"){var reject=iterator[kLastReject];if(reject!==null){iterator[kLastPromise]=null;iterator[kLastResolve]=null;iterator[kLastReject]=null;reject(err)}iterator[kError]=err;return}var resolve=iterator[kLastResolve];if(resolve!==null){iterator[kLastPromise]=null;iterator[kLastResolve]=null;iterator[kLastReject]=null;resolve(createIterResult(undefined,true))}iterator[kEnded]=true});stream.on("readable",onReadable.bind(null,iterator));return iterator};module.exports=createReadableStreamAsyncIterator}).call(this)}).call(this,require("_process"))},{"./end-of-stream":114,_process:101}],112:[function(require,module,exports){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var _require=require("buffer"),Buffer=_require.Buffer;var _require2=require("util"),inspect=_require2.inspect;var custom=inspect&&inspect.custom||"inspect";function copyBuffer(src,target,offset){Buffer.prototype.copy.call(src,target,offset)}module.exports=function(){function BufferList(){_classCallCheck(this,BufferList);this.head=null;this.tail=null;this.length=0}_createClass(BufferList,[{key:"push",value:function push(v){var entry={data:v,next:null};if(this.length>0)this.tail.next=entry;else this.head=entry;this.tail=entry;++this.length}},{key:"unshift",value:function unshift(v){var entry={data:v,next:this.head};if(this.length===0)this.tail=entry;this.head=entry;++this.length}},{key:"shift",value:function shift(){if(this.length===0)return;var ret=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return ret}},{key:"clear",value:function clear(){this.head=this.tail=null;this.length=0}},{key:"join",value:function join(s){if(this.length===0)return"";var p=this.head;var ret=""+p.data;while(p=p.next){ret+=s+p.data}return ret}},{key:"concat",value:function concat(n){if(this.length===0)return Buffer.alloc(0);var ret=Buffer.allocUnsafe(n>>>0);var p=this.head;var i=0;while(p){copyBuffer(p.data,ret,i);i+=p.data.length;p=p.next}return ret}},{key:"consume",value:function consume(n,hasStrings){var ret;if(n<this.head.data.length){ret=this.head.data.slice(0,n);this.head.data=this.head.data.slice(n)}else if(n===this.head.data.length){ret=this.shift()}else{ret=hasStrings?this._getString(n):this._getBuffer(n)}return ret}},{key:"first",value:function first(){return this.head.data}},{key:"_getString",value:function _getString(n){var p=this.head;var c=1;var ret=p.data;n-=ret.length;while(p=p.next){var str=p.data;var nb=n>str.length?str.length:n;if(nb===str.length)ret+=str;else ret+=str.slice(0,n);n-=nb;if(n===0){if(nb===str.length){++c;if(p.next)this.head=p.next;else this.head=this.tail=null}else{this.head=p;p.data=str.slice(nb)}break}++c}this.length-=c;return ret}},{key:"_getBuffer",value:function _getBuffer(n){var ret=Buffer.allocUnsafe(n);var p=this.head;var c=1;p.data.copy(ret);n-=p.data.length;while(p=p.next){var buf=p.data;var nb=n>buf.length?buf.length:n;buf.copy(ret,ret.length-n,0,nb);n-=nb;if(n===0){if(nb===buf.length){++c;if(p.next)this.head=p.next;else this.head=this.tail=null}else{this.head=p;p.data=buf.slice(nb)}break}++c}this.length-=c;return ret}},{key:custom,value:function value(_,options){return inspect(this,_objectSpread({},options,{depth:0,customInspect:false}))}}]);return BufferList}()},{buffer:54,util:52}],113:[function(require,module,exports){(function(process){(function(){"use strict";function destroy(err,cb){var _this=this;var readableDestroyed=this._readableState&&this._readableState.destroyed;var writableDestroyed=this._writableState&&this._writableState.destroyed;if(readableDestroyed||writableDestroyed){if(cb){cb(err)}else if(err){if(!this._writableState){process.nextTick(emitErrorNT,this,err)}else if(!this._writableState.errorEmitted){this._writableState.errorEmitted=true;process.nextTick(emitErrorNT,this,err)}}return this}if(this._readableState){this._readableState.destroyed=true}if(this._writableState){this._writableState.destroyed=true}this._destroy(err||null,function(err){if(!cb&&err){if(!_this._writableState){process.nextTick(emitErrorAndCloseNT,_this,err)}else if(!_this._writableState.errorEmitted){_this._writableState.errorEmitted=true;process.nextTick(emitErrorAndCloseNT,_this,err)}else{process.nextTick(emitCloseNT,_this)}}else if(cb){process.nextTick(emitCloseNT,_this);cb(err)}else{process.nextTick(emitCloseNT,_this)}});return this}function emitErrorAndCloseNT(self,err){emitErrorNT(self,err);emitCloseNT(self)}function emitCloseNT(self){if(self._writableState&&!self._writableState.emitClose)return;if(self._readableState&&!self._readableState.emitClose)return;self.emit("close")}function undestroy(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finalCalled=false;this._writableState.prefinished=false;this._writableState.finished=false;this._writableState.errorEmitted=false}}function emitErrorNT(self,err){self.emit("error",err)}function errorOrDestroy(stream,err){var rState=stream._readableState;var wState=stream._writableState;if(rState&&rState.autoDestroy||wState&&wState.autoDestroy)stream.destroy(err);else stream.emit("error",err)}module.exports={destroy:destroy,undestroy:undestroy,errorOrDestroy:errorOrDestroy}}).call(this)}).call(this,require("_process"))},{_process:101}],114:[function(require,module,exports){"use strict";var ERR_STREAM_PREMATURE_CLOSE=require("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function once(callback){var called=false;return function(){if(called)return;called=true;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}callback.apply(this,args)}}function noop(){}function isRequest(stream){return stream.setHeader&&typeof stream.abort==="function"}function eos(stream,opts,callback){if(typeof opts==="function")return eos(stream,null,opts);if(!opts)opts={};callback=once(callback||noop);var readable=opts.readable||opts.readable!==false&&stream.readable;var writable=opts.writable||opts.writable!==false&&stream.writable;var onlegacyfinish=function onlegacyfinish(){if(!stream.writable)onfinish()};var writableEnded=stream._writableState&&stream._writableState.finished;var onfinish=function onfinish(){writable=false;writableEnded=true;if(!readable)callback.call(stream)};var readableEnded=stream._readableState&&stream._readableState.endEmitted;var onend=function onend(){readable=false;readableEnded=true;if(!writable)callback.call(stream)};var onerror=function onerror(err){callback.call(stream,err)};var onclose=function onclose(){var err;if(readable&&!readableEnded){if(!stream._readableState||!stream._readableState.ended)err=new ERR_STREAM_PREMATURE_CLOSE;return callback.call(stream,err)}if(writable&&!writableEnded){if(!stream._writableState||!stream._writableState.ended)err=new ERR_STREAM_PREMATURE_CLOSE;return callback.call(stream,err)}};var onrequest=function onrequest(){stream.req.on("finish",onfinish)};if(isRequest(stream)){stream.on("complete",onfinish);stream.on("abort",onclose);if(stream.req)onrequest();else stream.on("request",onrequest)}else if(writable&&!stream._writableState){stream.on("end",onlegacyfinish);stream.on("close",onlegacyfinish)}stream.on("end",onend);stream.on("finish",onfinish);if(opts.error!==false)stream.on("error",onerror);stream.on("close",onclose);return function(){stream.removeListener("complete",onfinish);stream.removeListener("abort",onclose);stream.removeListener("request",onrequest);if(stream.req)stream.req.removeListener("finish",onfinish);stream.removeListener("end",onlegacyfinish);stream.removeListener("close",onlegacyfinish);stream.removeListener("finish",onfinish);stream.removeListener("end",onend);stream.removeListener("error",onerror);stream.removeListener("close",onclose)}}module.exports=eos},{"../../../errors":105}],115:[function(require,module,exports){module.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],116:[function(require,module,exports){"use strict";var eos;function once(callback){var called=false;return function(){if(called)return;called=true;callback.apply(void 0,arguments)}}var _require$codes=require("../../../errors").codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop(err){if(err)throw err}function isRequest(stream){return stream.setHeader&&typeof stream.abort==="function"}function destroyer(stream,reading,writing,callback){callback=once(callback);var closed=false;stream.on("close",function(){closed=true});if(eos===undefined)eos=require("./end-of-stream");eos(stream,{readable:reading,writable:writing},function(err){if(err)return callback(err);closed=true;callback()});var destroyed=false;return function(err){if(closed)return;if(destroyed)return;destroyed=true;if(isRequest(stream))return stream.abort();if(typeof stream.destroy==="function")return stream.destroy();callback(err||new ERR_STREAM_DESTROYED("pipe"))}}function call(fn){fn()}function pipe(from,to){return from.pipe(to)}function popCallback(streams){if(!streams.length)return noop;if(typeof streams[streams.length-1]!=="function")return noop;return streams.pop()}function pipeline(){for(var _len=arguments.length,streams=new Array(_len),_key=0;_key<_len;_key++){streams[_key]=arguments[_key]}var callback=popCallback(streams);if(Array.isArray(streams[0]))streams=streams[0];if(streams.length<2){throw new ERR_MISSING_ARGS("streams")}var error;var destroys=streams.map(function(stream,i){var reading=i<streams.length-1;var writing=i>0;return destroyer(stream,reading,writing,function(err){if(!error)error=err;if(err)destroys.forEach(call);if(reading)return;destroys.forEach(call);callback(error)})});return streams.reduce(pipe)}module.exports=pipeline},{"../../../errors":105,"./end-of-stream":114}],117:[function(require,module,exports){"use strict";var ERR_INVALID_OPT_VALUE=require("../../../errors").codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(options,isDuplex,duplexKey){return options.highWaterMark!=null?options.highWaterMark:isDuplex?options[duplexKey]:null}function getHighWaterMark(state,options,duplexKey,isDuplex){var hwm=highWaterMarkFrom(options,isDuplex,duplexKey);if(hwm!=null){if(!(isFinite(hwm)&&Math.floor(hwm)===hwm)||hwm<0){var name=isDuplex?duplexKey:"highWaterMark";throw new ERR_INVALID_OPT_VALUE(name,hwm)}return Math.floor(hwm)}return state.objectMode?16:16*1024}module.exports={getHighWaterMark:getHighWaterMark}},{"../../../errors":105}],118:[function(require,module,exports){module.exports=require("events").EventEmitter},{events:60}],119:[function(require,module,exports){exports=module.exports=require("./lib/_stream_readable.js");exports.Stream=exports;exports.Readable=exports;exports.Writable=require("./lib/_stream_writable.js");exports.Duplex=require("./lib/_stream_duplex.js");exports.Transform=require("./lib/_stream_transform.js");exports.PassThrough=require("./lib/_stream_passthrough.js");exports.finished=require("./lib/internal/streams/end-of-stream.js");exports.pipeline=require("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":106,"./lib/_stream_passthrough.js":107,"./lib/_stream_readable.js":108,"./lib/_stream_transform.js":109,"./lib/_stream_writable.js":110,"./lib/internal/streams/end-of-stream.js":114,"./lib/internal/streams/pipeline.js":116}],120:[function(require,module,exports){"use strict";function ReInterval(callback,interval,args){var self=this;this._callback=callback;this._args=args;this._interval=setInterval(callback,interval,this._args);this.reschedule=function(interval){if(!interval)interval=self._interval;if(self._interval)clearInterval(self._interval);self._interval=setInterval(self._callback,interval,self._args)};this.clear=function(){if(self._interval){clearInterval(self._interval);self._interval=undefined}};this.destroy=function(){if(self._interval){clearInterval(self._interval)}self._callback=undefined;self._interval=undefined;self._args=undefined}}function reInterval(){if(typeof arguments[0]!=="function")throw new Error("callback needed");if(typeof arguments[1]!=="number")throw new Error("interval needed");var args;if(arguments.length>0){args=new Array(arguments.length-2);for(var i=0;i<args.length;i++){args[i]=arguments[i+2]}}return new ReInterval(arguments[0],arguments[1],args)}module.exports=reInterval},{}],121:[function(require,module,exports){"use strict";module.exports=require("./index.js")()},{"./index.js":122}],122:[function(require,module,exports){(function(Buffer){(function(){"use strict";module.exports=rfdc;function copyBuffer(cur){if(cur instanceof Buffer){return Buffer.from(cur)}return new cur.constructor(cur.buffer.slice(),cur.byteOffset,cur.length)}function rfdc(opts){opts=opts||{};if(opts.circles)return rfdcCircles(opts);return opts.proto?cloneProto:clone;function cloneArray(a,fn){var keys=Object.keys(a);var a2=new Array(keys.length);for(var i=0;i<keys.length;i++){var k=keys[i];var cur=a[k];if(typeof cur!=="object"||cur===null){a2[k]=cur}else if(cur instanceof Date){a2[k]=new Date(cur)}else if(ArrayBuffer.isView(cur)){a2[k]=copyBuffer(cur)}else{a2[k]=fn(cur)}}return a2}function clone(o){if(typeof o!=="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return cloneArray(o,clone);if(o instanceof Map)return new Map(cloneArray(Array.from(o),clone));if(o instanceof Set)return new Set(cloneArray(Array.from(o),clone));var o2={};for(var k in o){if(Object.hasOwnProperty.call(o,k)===false)continue;var cur=o[k];if(typeof cur!=="object"||cur===null){o2[k]=cur}else if(cur instanceof Date){o2[k]=new Date(cur)}else if(cur instanceof Map){o2[k]=new Map(cloneArray(Array.from(cur),clone))}else if(cur instanceof Set){o2[k]=new Set(cloneArray(Array.from(cur),clone))}else if(ArrayBuffer.isView(cur)){o2[k]=copyBuffer(cur)}else{o2[k]=clone(cur)}}return o2}function cloneProto(o){if(typeof o!=="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return cloneArray(o,cloneProto);if(o instanceof Map)return new Map(cloneArray(Array.from(o),cloneProto));if(o instanceof Set)return new Set(cloneArray(Array.from(o),cloneProto));var o2={};for(var k in o){var cur=o[k];if(typeof cur!=="object"||cur===null){o2[k]=cur}else if(cur instanceof Date){o2[k]=new Date(cur)}else if(cur instanceof Map){o2[k]=new Map(cloneArray(Array.from(cur),cloneProto))}else if(cur instanceof Set){o2[k]=new Set(cloneArray(Array.from(cur),cloneProto))}else if(ArrayBuffer.isView(cur)){o2[k]=copyBuffer(cur)}else{o2[k]=cloneProto(cur)}}return o2}}function rfdcCircles(opts){var refs=[];var refsNew=[];return opts.proto?cloneProto:clone;function cloneArray(a,fn){var keys=Object.keys(a);var a2=new Array(keys.length);for(var i=0;i<keys.length;i++){var k=keys[i];var cur=a[k];if(typeof cur!=="object"||cur===null){a2[k]=cur}else if(cur instanceof Date){a2[k]=new Date(cur)}else if(ArrayBuffer.isView(cur)){a2[k]=copyBuffer(cur)}else{var index=refs.indexOf(cur);if(index!==-1){a2[k]=refsNew[index]}else{a2[k]=fn(cur)}}}return a2}function clone(o){if(typeof o!=="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return cloneArray(o,clone);if(o instanceof Map)return new Map(cloneArray(Array.from(o),clone));if(o instanceof Set)return new Set(cloneArray(Array.from(o),clone));var o2={};refs.push(o);refsNew.push(o2);for(var k in o){if(Object.hasOwnProperty.call(o,k)===false)continue;var cur=o[k];if(typeof cur!=="object"||cur===null){o2[k]=cur}else if(cur instanceof Date){o2[k]=new Date(cur)}else if(cur instanceof Map){o2[k]=new Map(cloneArray(Array.from(cur),clone))}else if(cur instanceof Set){o2[k]=new Set(cloneArray(Array.from(cur),clone))}else if(ArrayBuffer.isView(cur)){o2[k]=copyBuffer(cur)}else{var i=refs.indexOf(cur);if(i!==-1){o2[k]=refsNew[i]}else{o2[k]=clone(cur)}}}refs.pop();refsNew.pop();return o2}function cloneProto(o){if(typeof o!=="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return cloneArray(o,cloneProto);if(o instanceof Map)return new Map(cloneArray(Array.from(o),cloneProto));if(o instanceof Set)return new Set(cloneArray(Array.from(o),cloneProto));var o2={};refs.push(o);refsNew.push(o2);for(var k in o){var cur=o[k];if(typeof cur!=="object"||cur===null){o2[k]=cur}else if(cur instanceof Date){o2[k]=new Date(cur)}else if(cur instanceof Map){o2[k]=new Map(cloneArray(Array.from(cur),cloneProto))}else if(cur instanceof Set){o2[k]=new Set(cloneArray(Array.from(cur),cloneProto))}else if(ArrayBuffer.isView(cur)){o2[k]=copyBuffer(cur)}else{var i=refs.indexOf(cur);if(i!==-1){o2[k]=refsNew[i]}else{o2[k]=cloneProto(cur)}}}refs.pop();refsNew.pop();return o2}}}).call(this)}).call(this,require("buffer").Buffer)},{buffer:54}],123:[function(require,module,exports){var buffer=require("buffer");var Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src){dst[key]=src[key]}}if(Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow){module.exports=buffer}else{copyProps(buffer,exports);exports.Buffer=SafeBuffer}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}SafeBuffer.prototype=Object.create(Buffer.prototype);copyProps(Buffer,SafeBuffer);SafeBuffer.from=function(arg,encodingOrOffset,length){if(typeof arg==="number"){throw new TypeError("Argument must not be a number")}return Buffer(arg,encodingOrOffset,length)};SafeBuffer.alloc=function(size,fill,encoding){if(typeof size!=="number"){throw new TypeError("Argument must be a number")}var buf=Buffer(size);if(fill!==undefined){if(typeof encoding==="string"){buf.fill(fill,encoding)}else{buf.fill(fill)}}else{buf.fill(0)}return buf};SafeBuffer.allocUnsafe=function(size){if(typeof size!=="number"){throw new TypeError("Argument must be a number")}return Buffer(size)};SafeBuffer.allocUnsafeSlow=function(size){if(typeof size!=="number"){throw new TypeError("Argument must be a number")}return buffer.SlowBuffer(size)}},{buffer:54}],124:[function(require,module,exports){module.exports=shift;function shift(stream){var rs=stream._readableState;if(!rs)return null;return rs.objectMode||typeof stream._duplexState==="number"?stream.read():stream.read(getStateLength(rs))}function getStateLength(state){if(state.buffer.length){if(state.buffer.head){return state.buffer.head.data.length}return state.buffer[0].length}return state.length}},{}],125:[function(require,module,exports){"use strict";var Buffer=require("safe-buffer").Buffer;var isEncoding=Buffer.isEncoding||function(encoding){encoding=""+encoding;switch(encoding&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function _normalizeEncoding(enc){if(!enc)return"utf8";var retried;while(true){switch(enc){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return enc;default:if(retried)return;enc=(""+enc).toLowerCase();retried=true}}}function normalizeEncoding(enc){var nenc=_normalizeEncoding(enc);if(typeof nenc!=="string"&&(Buffer.isEncoding===isEncoding||!isEncoding(enc)))throw new Error("Unknown encoding: "+enc);return nenc||enc}exports.StringDecoder=StringDecoder;function StringDecoder(encoding){this.encoding=normalizeEncoding(encoding);var nb;switch(this.encoding){case"utf16le":this.text=utf16Text;this.end=utf16End;nb=4;break;case"utf8":this.fillLast=utf8FillLast;nb=4;break;case"base64":this.text=base64Text;this.end=base64End;nb=3;break;default:this.write=simpleWrite;this.end=simpleEnd;return}this.lastNeed=0;this.lastTotal=0;this.lastChar=Buffer.allocUnsafe(nb)}StringDecoder.prototype.write=function(buf){if(buf.length===0)return"";var r;var i;if(this.lastNeed){r=this.fillLast(buf);if(r===undefined)return"";i=this.lastNeed;this.lastNeed=0}else{i=0}if(i<buf.length)return r?r+this.text(buf,i):this.text(buf,i);return r||""};StringDecoder.prototype.end=utf8End;StringDecoder.prototype.text=utf8Text;StringDecoder.prototype.fillLast=function(buf){if(this.lastNeed<=buf.length){buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,buf.length);this.lastNeed-=buf.length};function utf8CheckByte(byte){if(byte<=127)return 0;else if(byte>>5===6)return 2;else if(byte>>4===14)return 3;else if(byte>>3===30)return 4;return byte>>6===2?-1:-2}function utf8CheckIncomplete(self,buf,i){var j=buf.length-1;if(j<i)return 0;var nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0)self.lastNeed=nb-1;return nb}if(--j<i||nb===-2)return 0;nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0)self.lastNeed=nb-2;return nb}if(--j<i||nb===-2)return 0;nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0){if(nb===2)nb=0;else self.lastNeed=nb-3}return nb}return 0}function utf8CheckExtraBytes(self,buf,p){if((buf[0]&192)!==128){self.lastNeed=0;return"�"}if(self.lastNeed>1&&buf.length>1){if((buf[1]&192)!==128){self.lastNeed=1;return"�"}if(self.lastNeed>2&&buf.length>2){if((buf[2]&192)!==128){self.lastNeed=2;return"�"}}}}function utf8FillLast(buf){var p=this.lastTotal-this.lastNeed;var r=utf8CheckExtraBytes(this,buf,p);if(r!==undefined)return r;if(this.lastNeed<=buf.length){buf.copy(this.lastChar,p,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}buf.copy(this.lastChar,p,0,buf.length);this.lastNeed-=buf.length}function utf8Text(buf,i){var total=utf8CheckIncomplete(this,buf,i);if(!this.lastNeed)return buf.toString("utf8",i);this.lastTotal=total;var end=buf.length-(total-this.lastNeed);buf.copy(this.lastChar,0,end);return buf.toString("utf8",i,end)}function utf8End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed)return r+"�";return r}function utf16Text(buf,i){if((buf.length-i)%2===0){var r=buf.toString("utf16le",i);if(r){var c=r.charCodeAt(r.length-1);if(c>=55296&&c<=56319){this.lastNeed=2;this.lastTotal=4;this.lastChar[0]=buf[buf.length-2];this.lastChar[1]=buf[buf.length-1];return r.slice(0,-1)}}return r}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=buf[buf.length-1];return buf.toString("utf16le",i,buf.length-1)}function utf16End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed){var end=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,end)}return r}function base64Text(buf,i){var n=(buf.length-i)%3;if(n===0)return buf.toString("base64",i);this.lastNeed=3-n;this.lastTotal=3;if(n===1){this.lastChar[0]=buf[buf.length-1]}else{this.lastChar[0]=buf[buf.length-2];this.lastChar[1]=buf[buf.length-1]}return buf.toString("base64",i,buf.length-n)}function base64End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed)return r+this.lastChar.toString("base64",0,3-this.lastNeed);return r}function simpleWrite(buf){return buf.toString(this.encoding)}function simpleEnd(buf){return buf&&buf.length?this.write(buf):""}},{"safe-buffer":123}],126:[function(require,module,exports){(function(setImmediate,clearImmediate){(function(){var nextTick=require("process/browser.js").nextTick;var apply=Function.prototype.apply;var slice=Array.prototype.slice;var immediateIds={};var nextImmediateId=0;exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)};exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)};exports.clearTimeout=exports.clearInterval=function(timeout){timeout.close()};function Timeout(id,clearFn){this._id=id;this._clearFn=clearFn}Timeout.prototype.unref=Timeout.prototype.ref=function(){};Timeout.prototype.close=function(){this._clearFn.call(window,this._id)};exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId);item._idleTimeout=msecs};exports.unenroll=function(item){clearTimeout(item._idleTimeoutId);item._idleTimeout=-1};exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;if(msecs>=0){item._idleTimeoutId=setTimeout(function onTimeout(){if(item._onTimeout)item._onTimeout()},msecs)}};exports.setImmediate=typeof setImmediate==="function"?setImmediate:function(fn){var id=nextImmediateId++;var args=arguments.length<2?false:slice.call(arguments,1);immediateIds[id]=true;nextTick(function onNextTick(){if(immediateIds[id]){if(args){fn.apply(null,args)}else{fn.call(null)}exports.clearImmediate(id)}});return id};exports.clearImmediate=typeof clearImmediate==="function"?clearImmediate:function(id){delete immediateIds[id]}}).call(this)}).call(this,require("timers").setImmediate,require("timers").clearImmediate)},{"process/browser.js":101,timers:126}],127:[function(require,module,exports){"use strict";var punycode=require("punycode");var util=require("./util");exports.parse=urlParse;exports.resolve=urlResolve;exports.resolveObject=urlResolveObject;exports.format=urlFormat;exports.Url=Url;function Url(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r","\n","\t"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:true,"javascript:":true},hostlessProtocol={javascript:true,"javascript:":true},slashedProtocol={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},querystring=require("querystring");function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&util.isObject(url)&&url instanceof Url)return url;var u=new Url;u.parse(url,parseQueryString,slashesDenoteHost);return u}Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!util.isString(url)){throw new TypeError("Parameter 'url' must be a string, not "+typeof url)}var queryIndex=url.indexOf("?"),splitter=queryIndex!==-1&&queryIndex<url.indexOf("#")?"?":"#",uSplit=url.split(splitter),slashRegex=/\\/g;uSplit[0]=uSplit[0].replace(slashRegex,"/");url=uSplit.join(splitter);var rest=url;rest=rest.trim();if(!slashesDenoteHost&&url.split("#").length===1){var simplePath=simplePathPattern.exec(rest);if(simplePath){this.path=rest;this.href=rest;this.pathname=simplePath[1];if(simplePath[2]){this.search=simplePath[2];if(parseQueryString){this.query=querystring.parse(this.search.substr(1))}else{this.query=this.search.substr(1)}}else if(parseQueryString){this.search="";this.query={}}return this}}var proto=protocolPattern.exec(rest);if(proto){proto=proto[0];var lowerProto=proto.toLowerCase();this.protocol=lowerProto;rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes=rest.substr(0,2)==="//";if(slashes&&!(proto&&hostlessProtocol[proto])){rest=rest.substr(2);this.slashes=true}}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){var hostEnd=-1;for(var i=0;i<hostEndingChars.length;i++){var hec=rest.indexOf(hostEndingChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}var auth,atSign;if(hostEnd===-1){atSign=rest.lastIndexOf("@")}else{atSign=rest.lastIndexOf("@",hostEnd)}if(atSign!==-1){auth=rest.slice(0,atSign);rest=rest.slice(atSign+1);this.auth=decodeURIComponent(auth)}hostEnd=-1;for(var i=0;i<nonHostChars.length;i++){var hec=rest.indexOf(nonHostChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}if(hostEnd===-1)hostEnd=rest.length;this.host=rest.slice(0,hostEnd);rest=rest.slice(hostEnd);this.parseHost();this.hostname=this.hostname||"";var ipv6Hostname=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ipv6Hostname){var hostparts=this.hostname.split(/\./);for(var i=0,l=hostparts.length;i<l;i++){var part=hostparts[i];if(!part)continue;if(!part.match(hostnamePartPattern)){var newpart="";for(var j=0,k=part.length;j<k;j++){if(part.charCodeAt(j)>127){newpart+="x"}else{newpart+=part[j]}}if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i);var notHost=hostparts.slice(i+1);var bit=part.match(hostnamePartStart);if(bit){validParts.push(bit[1]);notHost.unshift(bit[2])}if(notHost.length){rest="/"+notHost.join(".")+rest}this.hostname=validParts.join(".");break}}}}if(this.hostname.length>hostnameMaxLen){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!ipv6Hostname){this.hostname=punycode.toASCII(this.hostname)}var p=this.port?":"+this.port:"";var h=this.hostname||"";this.host=h+p;this.href+=this.host;if(ipv6Hostname){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(rest[0]!=="/"){rest="/"+rest}}}if(!unsafeProtocol[lowerProto]){for(var i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i];if(rest.indexOf(ae)===-1)continue;var esc=encodeURIComponent(ae);if(esc===ae){esc=escape(ae)}rest=rest.split(ae).join(esc)}}var hash=rest.indexOf("#");if(hash!==-1){this.hash=rest.substr(hash);rest=rest.slice(0,hash)}var qm=rest.indexOf("?");if(qm!==-1){this.search=rest.substr(qm);this.query=rest.substr(qm+1);if(parseQueryString){this.query=querystring.parse(this.query)}rest=rest.slice(0,qm)}else if(parseQueryString){this.search="";this.query={}}if(rest)this.pathname=rest;if(slashedProtocol[lowerProto]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var p=this.pathname||"";var s=this.search||"";this.path=p+s}this.href=this.format();return this};function urlFormat(obj){if(util.isString(obj))obj=urlParse(obj);if(!(obj instanceof Url))return Url.prototype.format.call(obj);return obj.format()}Url.prototype.format=function(){var auth=this.auth||"";if(auth){auth=encodeURIComponent(auth);auth=auth.replace(/%3A/i,":");auth+="@"}var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=false,query="";if(this.host){host=auth+this.host}else if(this.hostname){host=auth+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){host+=":"+this.port}}if(this.query&&util.isObject(this.query)&&Object.keys(this.query).length){query=querystring.stringify(this.query)}var search=this.search||query&&"?"+query||"";if(protocol&&protocol.substr(-1)!==":")protocol+=":";if(this.slashes||(!protocol||slashedProtocol[protocol])&&host!==false){host="//"+(host||"");if(pathname&&pathname.charAt(0)!=="/")pathname="/"+pathname}else if(!host){host=""}if(hash&&hash.charAt(0)!=="#")hash="#"+hash;if(search&&search.charAt(0)!=="?")search="?"+search;pathname=pathname.replace(/[?#]/g,function(match){return encodeURIComponent(match)});search=search.replace("#","%23");return protocol+host+pathname+search+hash};function urlResolve(source,relative){return urlParse(source,false,true).resolve(relative)}Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,false,true)).format()};function urlResolveObject(source,relative){if(!source)return relative;return urlParse(source,false,true).resolveObject(relative)}Url.prototype.resolveObject=function(relative){if(util.isString(relative)){var rel=new Url;rel.parse(relative,false,true);relative=rel}var result=new Url;var tkeys=Object.keys(this);for(var tk=0;tk<tkeys.length;tk++){var tkey=tkeys[tk];result[tkey]=this[tkey]}result.hash=relative.hash;if(relative.href===""){result.href=result.format();return result}if(relative.slashes&&!relative.protocol){var rkeys=Object.keys(relative);for(var rk=0;rk<rkeys.length;rk++){var rkey=rkeys[rk];if(rkey!=="protocol")result[rkey]=relative[rkey]}if(slashedProtocol[result.protocol]&&result.hostname&&!result.pathname){result.path=result.pathname="/"}result.href=result.format();return result}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){var keys=Object.keys(relative);for(var v=0;v<keys.length;v++){var k=keys[v];result[k]=relative[k]}result.href=result.format();return result}result.protocol=relative.protocol;if(!relative.host&&!hostlessProtocol[relative.protocol]){var relPath=(relative.pathname||"").split("/");while(relPath.length&&!(relative.host=relPath.shift()));if(!relative.host)relative.host="";if(!relative.hostname)relative.hostname="";if(relPath[0]!=="")relPath.unshift("");if(relPath.length<2)relPath.unshift("");result.pathname=relPath.join("/")}else{result.pathname=relative.pathname}result.search=relative.search;result.query=relative.query;result.host=relative.host||"";result.auth=relative.auth;result.hostname=relative.hostname||relative.host;result.port=relative.port;if(result.pathname||result.search){var p=result.pathname||"";var s=result.search||"";result.path=p+s}result.slashes=result.slashes||relative.slashes;result.href=result.format();return result}var isSourceAbs=result.pathname&&result.pathname.charAt(0)==="/",isRelAbs=relative.host||relative.pathname&&relative.pathname.charAt(0)==="/",mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],relPath=relative.pathname&&relative.pathname.split("/")||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic){result.hostname="";result.port=null;if(result.host){if(srcPath[0]==="")srcPath[0]=result.host;else srcPath.unshift(result.host)}result.host="";if(relative.protocol){relative.hostname=null;relative.port=null;if(relative.host){if(relPath[0]==="")relPath[0]=relative.host;else relPath.unshift(relative.host)}relative.host=null}mustEndAbs=mustEndAbs&&(relPath[0]===""||srcPath[0]==="")}if(isRelAbs){result.host=relative.host||relative.host===""?relative.host:result.host;result.hostname=relative.hostname||relative.hostname===""?relative.hostname:result.hostname;result.search=relative.search;result.query=relative.query;srcPath=relPath}else if(relPath.length){if(!srcPath)srcPath=[];srcPath.pop();srcPath=srcPath.concat(relPath);result.search=relative.search;result.query=relative.query}else if(!util.isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}result.search=relative.search;result.query=relative.query;if(!util.isNull(result.pathname)||!util.isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.href=result.format();return result}if(!srcPath.length){result.pathname=null;if(result.search){result.path="/"+result.search}else{result.path=null}result.href=result.format();return result}var last=srcPath.slice(-1)[0];var hasTrailingSlash=(result.host||relative.host||srcPath.length>1)&&(last==="."||last==="..")||last==="";var up=0;for(var i=srcPath.length;i>=0;i--){last=srcPath[i];if(last==="."){srcPath.splice(i,1)}else if(last===".."){srcPath.splice(i,1);up++}else if(up){srcPath.splice(i,1);up--}}if(!mustEndAbs&&!removeAllDots){for(;up--;up){srcPath.unshift("..")}}if(mustEndAbs&&srcPath[0]!==""&&(!srcPath[0]||srcPath[0].charAt(0)!=="/")){srcPath.unshift("")}if(hasTrailingSlash&&srcPath.join("/").substr(-1)!=="/"){srcPath.push("")}var isAbsolute=srcPath[0]===""||srcPath[0]&&srcPath[0].charAt(0)==="/";if(psychotic){result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"";var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}mustEndAbs=mustEndAbs||result.host&&srcPath.length;if(mustEndAbs&&!isAbsolute){srcPath.unshift("")}if(!srcPath.length){result.pathname=null;result.path=null}else{result.pathname=srcPath.join("/")}if(!util.isNull(result.pathname)||!util.isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.auth=relative.auth||result.auth;result.slashes=result.slashes||relative.slashes;result.href=result.format();return result};Url.prototype.parseHost=function(){var host=this.host;var port=portPattern.exec(host);if(port){port=port[0];if(port!==":"){this.port=port.substr(1)}host=host.substr(0,host.length-port.length)}if(host)this.hostname=host}},{"./util":128,punycode:53,querystring:104}],128:[function(require,module,exports){"use strict";module.exports={isString:function(arg){return typeof arg==="string"},isObject:function(arg){return typeof arg==="object"&&arg!==null},isNull:function(arg){return arg===null},isNullOrUndefined:function(arg){return arg==null}}},{}],129:[function(require,module,exports){(function(global){(function(){module.exports=deprecate;function deprecate(fn,msg){if(config("noDeprecation")){return fn}var warned=false;function deprecated(){if(!warned){if(config("throwDeprecation")){throw new Error(msg)}else if(config("traceDeprecation")){console.trace(msg)}else{console.warn(msg)}warned=true}return fn.apply(this,arguments)}return deprecated}function config(name){try{if(!global.localStorage)return false}catch(_){return false}var val=global.localStorage[name];if(null==val)return false;return String(val).toLowerCase()==="true"}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],130:[function(require,module,exports){module.exports=wrappy;function wrappy(fn,cb){if(fn&&cb)return wrappy(fn)(cb);if(typeof fn!=="function")throw new TypeError("need wrapper function");Object.keys(fn).forEach(function(k){wrapper[k]=fn[k]});return wrapper;function wrapper(){var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}var ret=fn.apply(this,args);var cb=args[args.length-1];if(typeof ret==="function"&&ret!==cb){Object.keys(cb).forEach(function(k){ret[k]=cb[k]})}return ret}}},{}],131:[function(require,module,exports){"use strict";module.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native "+"WebSocket object")}},{}],132:[function(require,module,exports){module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty;function extend(){var target={};for(var i=0;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target}},{}],133:[function(require,module,exports){"use strict";module.exports=function(Yallist){Yallist.prototype[Symbol.iterator]=function*(){for(let walker=this.head;walker;walker=walker.next){yield walker.value}}}},{}],134:[function(require,module,exports){"use strict";module.exports=Yallist;Yallist.Node=Node;Yallist.create=Yallist;function Yallist(list){var self=this;if(!(self instanceof Yallist)){self=new Yallist}self.tail=null;self.head=null;self.length=0;if(list&&typeof list.forEach==="function"){list.forEach(function(item){self.push(item)})}else if(arguments.length>0){for(var i=0,l=arguments.length;i<l;i++){self.push(arguments[i])}}return self}Yallist.prototype.removeNode=function(node){if(node.list!==this){throw new Error("removing node which does not belong to this list")}var next=node.next;var prev=node.prev;if(next){next.prev=prev}if(prev){prev.next=next}if(node===this.head){this.head=next}if(node===this.tail){this.tail=prev}node.list.length--;node.next=null;node.prev=null;node.list=null;return next};Yallist.prototype.unshiftNode=function(node){if(node===this.head){return}if(node.list){node.list.removeNode(node)}var head=this.head;node.list=this;node.next=head;if(head){head.prev=node}this.head=node;if(!this.tail){this.tail=node}this.length++};Yallist.prototype.pushNode=function(node){if(node===this.tail){return}if(node.list){node.list.removeNode(node)}var tail=this.tail;node.list=this;node.prev=tail;if(tail){tail.next=node}this.tail=node;if(!this.head){this.head=node}this.length++};Yallist.prototype.push=function(){for(var i=0,l=arguments.length;i<l;i++){push(this,arguments[i])}return this.length};Yallist.prototype.unshift=function(){for(var i=0,l=arguments.length;i<l;i++){unshift(this,arguments[i])}return this.length};Yallist.prototype.pop=function(){if(!this.tail){return undefined}var res=this.tail.value;this.tail=this.tail.prev;if(this.tail){this.tail.next=null}else{this.head=null}this.length--;return res};Yallist.prototype.shift=function(){if(!this.head){return undefined}var res=this.head.value;this.head=this.head.next;if(this.head){this.head.prev=null}else{this.tail=null}this.length--;return res};Yallist.prototype.forEach=function(fn,thisp){thisp=thisp||this;for(var walker=this.head,i=0;walker!==null;i++){fn.call(thisp,walker.value,i,this);walker=walker.next}};Yallist.prototype.forEachReverse=function(fn,thisp){thisp=thisp||this;for(var walker=this.tail,i=this.length-1;walker!==null;i--){fn.call(thisp,walker.value,i,this);walker=walker.prev}};Yallist.prototype.get=function(n){for(var i=0,walker=this.head;walker!==null&&i<n;i++){walker=walker.next}if(i===n&&walker!==null){return walker.value}};Yallist.prototype.getReverse=function(n){for(var i=0,walker=this.tail;walker!==null&&i<n;i++){walker=walker.prev}if(i===n&&walker!==null){return walker.value}};Yallist.prototype.map=function(fn,thisp){thisp=thisp||this;var res=new Yallist;for(var walker=this.head;walker!==null;){res.push(fn.call(thisp,walker.value,this));walker=walker.next}return res};Yallist.prototype.mapReverse=function(fn,thisp){thisp=thisp||this;var res=new Yallist;for(var walker=this.tail;walker!==null;){res.push(fn.call(thisp,walker.value,this));walker=walker.prev}return res};Yallist.prototype.reduce=function(fn,initial){var acc;var walker=this.head;if(arguments.length>1){acc=initial}else if(this.head){walker=this.head.next;acc=this.head.value}else{throw new TypeError("Reduce of empty list with no initial value")}for(var i=0;walker!==null;i++){acc=fn(acc,walker.value,i);walker=walker.next}return acc};Yallist.prototype.reduceReverse=function(fn,initial){var acc;var walker=this.tail;if(arguments.length>1){acc=initial}else if(this.tail){walker=this.tail.prev;acc=this.tail.value}else{throw new TypeError("Reduce of empty list with no initial value")}for(var i=this.length-1;walker!==null;i--){acc=fn(acc,walker.value,i);walker=walker.prev}return acc};Yallist.prototype.toArray=function(){var arr=new Array(this.length);for(var i=0,walker=this.head;walker!==null;i++){arr[i]=walker.value;walker=walker.next}return arr};Yallist.prototype.toArrayReverse=function(){var arr=new Array(this.length);for(var i=0,walker=this.tail;walker!==null;i++){arr[i]=walker.value;walker=walker.prev}return arr};Yallist.prototype.slice=function(from,to){to=to||this.length;if(to<0){to+=this.length}from=from||0;if(from<0){from+=this.length}var ret=new Yallist;if(to<from||to<0){return ret}if(from<0){from=0}if(to>this.length){to=this.length}for(var i=0,walker=this.head;walker!==null&&i<from;i++){walker=walker.next}for(;walker!==null&&i<to;i++,walker=walker.next){ret.push(walker.value)}return ret};Yallist.prototype.sliceReverse=function(from,to){to=to||this.length;if(to<0){to+=this.length}from=from||0;if(from<0){from+=this.length}var ret=new Yallist;if(to<from||to<0){return ret}if(from<0){from=0}if(to>this.length){to=this.length}for(var i=this.length,walker=this.tail;walker!==null&&i>to;i--){walker=walker.prev}for(;walker!==null&&i>from;i--,walker=walker.prev){ret.push(walker.value)}return ret};Yallist.prototype.splice=function(start,deleteCount,...nodes){if(start>this.length){start=this.length-1}if(start<0){start=this.length+start}for(var i=0,walker=this.head;walker!==null&&i<start;i++){walker=walker.next}var ret=[];for(var i=0;walker&&i<deleteCount;i++){ret.push(walker.value);walker=this.removeNode(walker)}if(walker===null){walker=this.tail}if(walker!==this.head&&walker!==this.tail){walker=walker.prev}for(var i=0;i<nodes.length;i++){walker=insert(this,walker,nodes[i])}return ret};Yallist.prototype.reverse=function(){var head=this.head;var tail=this.tail;for(var walker=head;walker!==null;walker=walker.prev){var p=walker.prev;walker.prev=walker.next;walker.next=p}this.head=tail;this.tail=head;return this};function insert(self,node,value){var inserted=node===self.head?new Node(value,null,node,self):new Node(value,node,node.next,self);if(inserted.next===null){self.tail=inserted}if(inserted.prev===null){self.head=inserted}self.length++;return inserted}function push(self,item){self.tail=new Node(item,self.tail,null,self);if(!self.head){self.head=self.tail}self.length++}function unshift(self,item){self.head=new Node(item,null,self.head,self);if(!self.tail){self.tail=self.head}self.length++}function Node(value,prev,next,list){if(!(this instanceof Node)){return new Node(value,prev,next,list)}this.list=list;this.value=value;if(prev){prev.next=this;this.prev=prev}else{this.prev=null}if(next){next.prev=this;this.next=next}else{this.next=null}}try{require("./iterator.js")(Yallist)}catch(er){}},{"./iterator.js":133}]},{},[1])(1)});
